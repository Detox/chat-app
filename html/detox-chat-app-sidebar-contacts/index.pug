dom-module(id="detox-chat-app-sidebar-contacts")
	link(rel="import" href="style.css" type="css")
	template
		div(hidden="[[_hide_header(contacts_requests, add_contact)]]")
			h4 Contacts requests
			csw-group(vertical)
				template(is="dom-repeat" items="{{contacts_requests}}")
					.contact-item(on-click="_accept_contact_request" unconfirmed) [[item.secret_name]]: [[item.name]]
		div(hidden="[[contacts.length]]")
			csw-button(icon="plus"): button(type="button" on-click="_add_contact") Add new contact
		div(hidden="[[_hide_header(contacts, add_contact)]]")
			h4
				div Contacts
				csw-button(icon="plus" tooltip="Add new contact"): button(type="button" on-click="_add_contact")
		csw-form.add-contact(hidden="[[!add_contact]]"): form
			label Contact ID:
			csw-textarea: textarea(rows="4" value="{{new_contact_id}}")
			label Contact nickname (optional):
			csw-textarea: textarea(rows="3" value="{{new_contact_name}}")
			csw-button(primary): button(type="button" on-click="_add_contact_confirm") Save contact
			csw-button: button(type="button" on-click="_add_contact_cancel") Cancel
		div(hidden="[[!contacts.length]]")
			csw-group(vertical)
				template(is="dom-repeat" items="{{contacts}}")
					//- TODO: Add [unread] property
					.contact-item(
						on-click="_set_active_contact"
						online$="[[_online(item.id, online_contacts)]]"
						selected$="[[_selected(item.id, ui_active_contact)]]"
						unconfirmed$="[[!item.local_secret]]"
					)
						.nickname [[item.nickname]]
						csw-icon(icon="times" on-click="_del_contact" tooltip="Delete contact")
	script(src="script.js")
