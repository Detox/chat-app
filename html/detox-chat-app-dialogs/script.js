// Generated by LiveScript 1.5.0
/**
 * @package Detox chat app
 * @author  Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @license 0BSD
 */
(function(){
  Polymer({
    is: 'detox-chat-app-dialogs',
    behaviors: [detoxChatApp.behaviors.state],
    properties: {
      active_contact: {
        type: Boolean,
        value: false
      },
      messages: Array
    },
    ready: function(){
      var this$ = this;
      Promise.all([require(['@detox/utils']), this._state_instance_ready]).then(function(arg$){
        var detoxUtils, state;
        detoxUtils = arg$[0][0];
        state = this$._state_instance;
        state.on('ui_active_contact_changed', function(new_active_contact){
          this$.active_contact = true;
          this$.messages = state.get_contact_messages(new_active_contact).slice();
          this$.notifyPath('messages');
        }).on('contact_messages_changed', function(public_key){
          if (detoxUtils.are_arrays_equal(public_key, state.get_ui_active_contact())) {
            this$.messages = state.get_contact_messages(public_key).slice();
            this$.notifyPath('messages');
          }
        });
      });
    }
  });
}).call(this);
