// Generated by LiveScript 1.5.0
/**
 * @package Detox chat app
 * @author  Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @license 0BSD
 */
(function(){
  Polymer.setPassiveTouchGestures(true);
  function register_sw(){
    require(['@detox/chat']).then(function(arg$){
      var detoxChat, this$ = this;
      detoxChat = arg$[0];
      detoxChat.ready(function(){
        navigator.serviceWorker.register(detox_sw_path).then(function(registration){
          registration.onupdatefound = function(){
            var installingWorker;
            installingWorker = registration.installing;
            installingWorker.onstatechange = function(){
              switch (installingWorker.state) {
              case 'installed':
                if (navigator.serviceWorker.controller) {
                  csw.functions.notify('New application version available, refresh page or restart app to see updated version', 'success', 'right', 10);
                } else {
                  csw.functions.notify('Application is ready to work offline', 'success', 'right', 10);
                }
                break;
              case 'redundant':
                console.error('The installing service worker became redundant.');
              }
            };
          };
        })['catch'](function(e){
          console.error('Error during service worker registration:', e);
        });
      });
    });
  }
  if ('serviceWorker' in navigator && window.detox_sw_path) {
    if (document.fonts) {
      document.fonts.load('bold 0 "Font Awesome 5 Free"').then(register_sw);
    } else {
      register_sw();
    }
  }
}).call(this);
