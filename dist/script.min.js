document.head.querySelector("[media=async]").removeAttribute("media"),function(){var e,t,n,i,r,s;e={},t={exports:null},n={},i=function(n,i){return"exports"===n?{}:"module"===n?t:(n.startsWith("./")&&(n=i.split("/").slice(0,-1).join("/")+"/"+n.substr(2)),e[n])},r=function(e,t,n){var r;return r=[],e.every(function(e){var s;return(s=i(e,t))?(r.push(s),!0):(n(e),!1)})?r:null},s=function(e,t){(n[e]||(n[e]=[])).push(t)},window.require=window.requirejs=function(e,t){return new Promise(function(n){var i;(i=r(e,"",function(i){s(i,function(){return window.require(e,function(){var e,i,r,s;for(i=[],r=0,s=arguments.length;r<s;++r)i.push(arguments[r]);e=i,t&&t.apply(null,e),n(e)})})}))&&(t&&t.apply(null,i),n(i))})},window.define=function(i,o,a){var c;a||(a=o,o=[]),(c=r(o,i,function(e){s(e,function(){return define(i,o,a)})}))&&(e[i]=a.apply(null,c)||t.exports,n[i]&&(n[i].forEach(function(e){e()}),delete n[i]))},define.amd={}}.call(this);var __supercopwasm=function(e){var t;e=e||{},t||(t=void 0!==e?e:{});var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);t.arguments=[],t.thisProgram="./this.program",t.quit=function(e,t){throw t},t.preRun=[],t.postRun=[];var r,s,o=!1,a=!1,c=!1,l=!1;if(t.ENVIRONMENT)if("WEB"===t.ENVIRONMENT)o=!0;else if("WORKER"===t.ENVIRONMENT)a=!0;else if("NODE"===t.ENVIRONMENT)c=!0;else{if("SHELL"!==t.ENVIRONMENT)throw Error("Module['ENVIRONMENT'] value is not valid. must be one of: WEB|WORKER|NODE|SHELL.");l=!0}else o="object"==typeof window,a="function"==typeof importScripts,c="object"==typeof process&&"function"==typeof require&&!o&&!a,l=!o&&!c&&!a;if(!t.scriptDirectory)if(t.scriptDirectory="",c)t.scriptDirectory=__dirname+"/";else if(o){var u=this._currentScript||document.currentScript;0!==u.src.indexOf("blob:")&&(t.scriptDirectory=u.src.split("/").slice(0,-1).join("/")+"/")}else a&&(t.scriptDirectory=(this._selfLocation||self.location).href.split("/").slice(0,-1).join("/")+"/");(t.memoryInitializerPrefixURL||(t.memoryInitializerPrefixURL=t.scriptDirectory),t.pthreadMainPrefixURL||(t.pthreadMainPrefixURL=t.scriptDirectory),t.cdInitializerPrefixURL||(t.cdInitializerPrefixURL=t.scriptDirectory),t.filePackagePrefixURL||(t.filePackagePrefixURL=t.scriptDirectory),c)?(t.read=function(e,t){return r||(r=require("fs")),s||(s=require("path")),e=s.normalize(e),e=r.readFileSync(e),t?e:e.toString()},t.readBinary=function(e){return(e=t.read(e,!0)).buffer||(e=new Uint8Array(e)),E(e.buffer),e},1<process.argv.length&&(t.thisProgram=process.argv[1].replace(/\\/g,"/")),t.arguments=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof F))throw e}),process.on("unhandledRejection",function(){process.exit(1)}),t.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(t.read=function(e){return read(e)}),t.readBinary=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(E("object"==typeof(e=read(e,"binary"))),e)},"undefined"!=typeof scriptArgs?t.arguments=scriptArgs:void 0!==arguments&&(t.arguments=arguments),"function"==typeof quit&&(t.quit=function(e){quit(e)})):(o||a)&&(t.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},a&&(t.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),t.readAsync=function(e,t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?t(i.response):n()},i.onerror=n,i.send(null)},void 0!==arguments&&(t.arguments=arguments),t.setWindowTitle=function(e){document.title=e});for(n in t.print="undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null,t.printErr="undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||t.print,t.print=t.print,t.printErr=t.printErr,i)i.hasOwnProperty(n)&&(t[n]=i[n]);function h(e){var t;return t||(t=16),Math.ceil(e/t)*t}i=void 0;var d,_,f,p,m,g,y,b,v,w=0;function E(e,t){e||W("Assertion failed: "+t)}function k(){t.HEAP8=new Int8Array(d),t.HEAP16=f=new Int16Array(d),t.HEAP32=p=new Int32Array(d),t.HEAPU8=_=new Uint8Array(d),t.HEAPU16=new Uint16Array(d),t.HEAPU32=new Uint32Array(d),t.HEAPF32=new Float32Array(d),t.HEAPF64=new Float64Array(d)}function A(){W("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+S+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}"undefined"!=typeof TextDecoder&&new TextDecoder("utf8"),"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le"),m=y=0,g=!1;var x=t.TOTAL_STACK||5242880,S=t.TOTAL_MEMORY||16777216;if(S<x&&t.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+S+"! (TOTAL_STACK="+x+")"),t.buffer?d=t.buffer:("object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(t.wasmMemory=new WebAssembly.Memory({initial:S/65536,maximum:S/65536}),d=t.wasmMemory.buffer):d=new ArrayBuffer(S),t.buffer=d),k(),p[0]=1668509029,f[1]=25459,115!==_[2]||99!==_[3])throw"Runtime error: expected the system to be little-endian!";function T(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n();else{var i=n.f;"number"==typeof i?void 0===n.a?t.dynCall_v(i):t.dynCall_vi(i,n.a):i(void 0===n.a?null:n.a)}}}var P=[],O=[],C=[],N=[],R=[],I=!1;function M(){var e=t.preRun.shift();P.unshift(e)}var D=0,L=null,z=null;function B(e){return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}t.preloadedImages={},t.preloadedAudios={},function(){function e(){try{if(t.wasmBinary)return new Uint8Array(t.wasmBinary);if(t.readBinary)return t.readBinary(s);throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)"}catch(e){W(e)}}function n(){return t.wasmBinary||!o&&!a||"function"!=typeof fetch?new Promise(function(t){t(e())}):fetch(s,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+s+"'";return e.arrayBuffer()}).catch(function(){return e()})}function i(e){function i(e){if((u=e.exports).memory){e=u.memory;var n=t.buffer;e.byteLength<n.byteLength&&t.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),n=new Int8Array(n),new Int8Array(e).set(n),t.buffer=d=e,k()}t.asm=u,t.usingWasm=!0,D--,t.monitorRunDependencies&&t.monitorRunDependencies(D),0==D&&(null!==L&&(clearInterval(L),L=null),z&&(e=z,z=null,e()))}function r(e){i(e.instance)}function o(e){n().then(function(e){return WebAssembly.instantiate(e,l)}).then(e).catch(function(e){t.printErr("failed to asynchronously prepare wasm: "+e),W(e)})}if("object"!=typeof WebAssembly)return t.printErr("no native wasm support detected"),!1;if(!(t.wasmMemory instanceof WebAssembly.Memory))return t.printErr("no native wasm Memory in use"),!1;if(e.memory=t.wasmMemory,l.global={NaN:NaN,Infinity:1/0},l["global.Math"]=Math,l.env=e,D++,t.monitorRunDependencies&&t.monitorRunDependencies(D),t.instantiateWasm)try{return t.instantiateWasm(l,i)}catch(e){return t.printErr("Module.instantiateWasm callback failed with error: "+e),!1}return t.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||B(s)||"function"!=typeof fetch?o(r):WebAssembly.instantiateStreaming(fetch(s,{credentials:"same-origin"}),l).then(r).catch(function(e){t.printErr("wasm streaming compile failed: "+e),t.printErr("falling back to ArrayBuffer instantiation"),o(r)}),{}}var r="supercop.wast",s="supercop.wasm?ed96f",c="supercop.temp.asm.js";"function"==typeof t.locateFile?(B(r)||(r=t.locateFile(r)),B(s)||(s=t.locateFile(s)),B(c)||(c=t.locateFile(c))):(B(r)||(r=t.scriptDirectory+r),B(s)||(s=t.scriptDirectory+s),B(c)||(c=t.scriptDirectory+c));var l={global:null,env:null,asm2wasm:{"f64-rem":function(e,t){return e%t},debugger:function(){}},parent:t},u=null;t.asmPreload=t.asm;var h=t.reallocBuffer;t.reallocBuffer=function(e){if("asmjs"===_)var n=h(e);else e:{var i=t.usingWasm?65536:16777216;if(0<e%i&&(e+=i-e%i),i=t.buffer.byteLength,t.usingWasm)try{n=-1!==t.wasmMemory.grow((e-i)/65536)?t.buffer=t.wasmMemory.buffer:null;break e}catch(e){n=null;break e}n=void 0}return n};var _="";t.asm=function(e,n){if(!n.table){void 0===(e=t.wasmTableSize)&&(e=1024);var r=t.wasmMaxTableSize;n.table="object"==typeof WebAssembly&&"function"==typeof WebAssembly.Table?void 0!==r?new WebAssembly.Table({initial:e,maximum:r,element:"anyfunc"}):new WebAssembly.Table({initial:e,element:"anyfunc"}):Array(e),t.wasmTable=n.table}return n.memoryBase||(n.memoryBase=t.STATIC_BASE),n.tableBase||(n.tableBase=0),(n=i(n))||W("no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods"),n}}(),m=34992,O.push(),t.STATIC_BASE=1024,t.STATIC_BUMP=33968,m+=16,E(!g),v=m,b=h((y=h(m=m+4+15&-16))+x),p[v>>2]=b,g=!0,t.wasmTableSize=0,t.wasmMaxTableSize=0,t.b={},t.c={enlargeMemory:function(){A()},getTotalMemory:function(){return S},abortOnCannotGrowMemory:A,___setErrNo:function(e){return t.___errno_location&&(p[t.___errno_location()>>2]=e),e},DYNAMICTOP_PTR:v,STACKTOP:y};var U=t.asm(t.b,t.c,d);t.asm=U,t._ed25519_create_keypair=function(){return t.asm._ed25519_create_keypair.apply(null,arguments)},t._ed25519_sign=function(){return t.asm._ed25519_sign.apply(null,arguments)},t._ed25519_verify=function(){return t.asm._ed25519_verify.apply(null,arguments)};var j=t._free=function(){return t.asm._free.apply(null,arguments)},q=t._malloc=function(){return t.asm._malloc.apply(null,arguments)};function F(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function H(){function e(){if(!t.calledRun&&(t.calledRun=!0,!w)){if(I||(I=!0,T(O)),T(C),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();R.unshift(e)}T(R)}}if(!(0<D)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)M();T(P),0<D||t.calledRun||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e())}}function W(e){throw t.onAbort&&t.onAbort(e),void 0!==e?(t.print(e),t.printErr(e),e=JSON.stringify(e)):e="",w=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(t.asm=U,t.then=function(e){if(t.calledRun)e(t);else{var n=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){n&&n(),e(t)}}return t},F.prototype=Error(),F.prototype.constructor=F,z=function e(){t.calledRun||H(),t.calledRun||(z=e)},t.run=H,t.exit=function(e,n){n&&t.noExitRuntime&&0===e||(!t.noExitRuntime&&(w=!0,y=void 0,T(N),t.onExit)&&t.onExit(e),c&&process.exit(e),t.quit(e,new F(e)))},t.abort=W,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return t.noExitRuntime=!0,H(),function(){function e(e){if(e&&e.buffer instanceof ArrayBuffer)e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else if("string"==typeof e){for(var t=e.length,n=new Uint8Array(t+1),i=0;i<t;++i)n[i]=e.charCodeAt(i);return n}return e}function n(t,i){var s=new Number(t);return s.length=i,s.get=function(e){return new(e=e||Uint8Array)(d,s,i/e.BYTES_PER_ELEMENT).slice()},s.dereference=function(e){return e=e||4,n(s.get(Uint32Array)[0],e)},s.set=function(t){if((t=e(t)).length>i)throw RangeError("invalid array length");_.set(t,s)},s.free=function(){j(s),r.splice(r.indexOf(s),1)},r.push(s),s}function i(t,i){i=e(i),0===t&&(t=i.length);var r=n(q(t),t);return void 0!==i?(r.set(i),i.length<t&&_.fill(0,r+i.length,r+t)):_.fill(0,r,r+t),r}var r=[];t.createPointer=n,t.allocatePointer=function(e){return e&&(e=Uint32Array.of(e)),i(4,e)},t.allocateBytes=i,t.freeBytes=function(){for(var e=0,t=r.length;e<t;++e)j(r[e]);r=[]}}(),e};__supercopwasm=__supercopwasm.bind({_currentScript:"undefined"!=typeof document?document.currentScript:void 0,_selfLocation:"undefined"!=typeof self?self.location:void 0}),"object"==typeof exports&&"object"==typeof module?module.exports=__supercopwasm:"function"==typeof define&&define.amd?define("supercop.wasm/src/supercop",[],function(){return __supercopwasm}):"object"==typeof exports&&(exports.__supercopwasm=__supercopwasm),function(){function e(e){var n,i;return e=e(),n=e.allocateBytes,i=e.freeBytes,{ready:e.then,createSeed:function(){return t(32)},createKeyPair:function(t){var r,s;if(!(t instanceof Uint8Array))throw new Error("not Uint8Array!");return t=n(0,t),r=n(32),s=n(64),e._ed25519_create_keypair(r,s,t),r=r.get(),s=s.get(),i(),{publicKey:r,secretKey:s}},sign:function(t,r,s){var o;if(!(t instanceof Uint8Array&&r instanceof Uint8Array&&s instanceof Uint8Array))throw new Error("not Uint8Arrays!");return t=n(0,t),r=n(0,r),s=n(0,s),o=n(64),e._ed25519_sign(o,t,t.length,r,s),o=o.get(),i(),o},verify:function(t,r,s){var o;if(!(t instanceof Uint8Array&&r instanceof Uint8Array&&s instanceof Uint8Array))throw new Error("not Uint8Arrays!");return r=n(0,r),s=n(0,s),t=n(0,t),o=1===e._ed25519_verify(t,r,r.length,s),i(),o}}}var t;t="undefined"!=typeof crypto?function(e){var t;return t=new Uint8Array(e),crypto.getRandomValues(t),t}:require("crypto").randomBytes,define("supercop.wasm/src/index.min",["./supercop"],e)}.call(this),define("supercop.wasm",["supercop.wasm/src/index.min"],function(e){return e});var __ed25519_to_x25519_wasm=function(e){var t;e=e||{},t||(t=void 0!==e?e:{});var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);t.arguments=[],t.thisProgram="./this.program",t.quit=function(e,t){throw t},t.preRun=[],t.postRun=[];var r,s,o=!1,a=!1,c=!1,l=!1;if(t.ENVIRONMENT)if("WEB"===t.ENVIRONMENT)o=!0;else if("WORKER"===t.ENVIRONMENT)a=!0;else if("NODE"===t.ENVIRONMENT)c=!0;else{if("SHELL"!==t.ENVIRONMENT)throw Error("Module['ENVIRONMENT'] value is not valid. must be one of: WEB|WORKER|NODE|SHELL.");l=!0}else o="object"==typeof window,a="function"==typeof importScripts,c="object"==typeof process&&"function"==typeof require&&!o&&!a,l=!o&&!c&&!a;if(!t.scriptDirectory)if(t.scriptDirectory="",c)t.scriptDirectory=__dirname+"/";else if(o){var u=this._currentScript||document.currentScript;0!==u.src.indexOf("blob:")&&(t.scriptDirectory=u.src.split("/").slice(0,-1).join("/")+"/")}else a&&(t.scriptDirectory=(this._selfLocation||self.location).href.split("/").slice(0,-1).join("/")+"/");(t.memoryInitializerPrefixURL||(t.memoryInitializerPrefixURL=t.scriptDirectory),t.pthreadMainPrefixURL||(t.pthreadMainPrefixURL=t.scriptDirectory),t.cdInitializerPrefixURL||(t.cdInitializerPrefixURL=t.scriptDirectory),t.filePackagePrefixURL||(t.filePackagePrefixURL=t.scriptDirectory),c)?(t.read=function(e,t){return r||(r=require("fs")),s||(s=require("path")),e=s.normalize(e),e=r.readFileSync(e),t?e:e.toString()},t.readBinary=function(e){return(e=t.read(e,!0)).buffer||(e=new Uint8Array(e)),E(e.buffer),e},1<process.argv.length&&(t.thisProgram=process.argv[1].replace(/\\/g,"/")),t.arguments=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof F))throw e}),process.on("unhandledRejection",function(){process.exit(1)}),t.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(t.read=function(e){return read(e)}),t.readBinary=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(E("object"==typeof(e=read(e,"binary"))),e)},"undefined"!=typeof scriptArgs?t.arguments=scriptArgs:void 0!==arguments&&(t.arguments=arguments),"function"==typeof quit&&(t.quit=function(e){quit(e)})):(o||a)&&(t.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},a&&(t.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),t.readAsync=function(e,t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?t(i.response):n()},i.onerror=n,i.send(null)},void 0!==arguments&&(t.arguments=arguments),t.setWindowTitle=function(e){document.title=e});for(n in t.print="undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null,t.printErr="undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||t.print,t.print=t.print,t.printErr=t.printErr,i)i.hasOwnProperty(n)&&(t[n]=i[n]);function h(e){var t;return t||(t=16),Math.ceil(e/t)*t}i=void 0;var d,_,f,p,m,g,y,b,v,w=0;function E(e,t){e||W("Assertion failed: "+t)}function k(){t.HEAP8=new Int8Array(d),t.HEAP16=f=new Int16Array(d),t.HEAP32=p=new Int32Array(d),t.HEAPU8=_=new Uint8Array(d),t.HEAPU16=new Uint16Array(d),t.HEAPU32=new Uint32Array(d),t.HEAPF32=new Float32Array(d),t.HEAPF64=new Float64Array(d)}function A(){W("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+S+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}"undefined"!=typeof TextDecoder&&new TextDecoder("utf8"),"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le"),m=y=0,g=!1;var x=t.TOTAL_STACK||5242880,S=t.TOTAL_MEMORY||16777216;if(S<x&&t.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+S+"! (TOTAL_STACK="+x+")"),t.buffer?d=t.buffer:("object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(t.wasmMemory=new WebAssembly.Memory({initial:S/65536,maximum:S/65536}),d=t.wasmMemory.buffer):d=new ArrayBuffer(S),t.buffer=d),k(),p[0]=1668509029,f[1]=25459,115!==_[2]||99!==_[3])throw"Runtime error: expected the system to be little-endian!";function T(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n();else{var i=n.f;"number"==typeof i?void 0===n.a?t.dynCall_v(i):t.dynCall_vi(i,n.a):i(void 0===n.a?null:n.a)}}}var P=[],O=[],C=[],N=[],R=[],I=!1;function M(){var e=t.preRun.shift();P.unshift(e)}var D=0,L=null,z=null;function B(e){return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}t.preloadedImages={},t.preloadedAudios={},function(){function e(){try{if(t.wasmBinary)return new Uint8Array(t.wasmBinary);if(t.readBinary)return t.readBinary(s);throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)"}catch(e){W(e)}}function n(){return t.wasmBinary||!o&&!a||"function"!=typeof fetch?new Promise(function(t){t(e())}):fetch(s,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+s+"'";return e.arrayBuffer()}).catch(function(){return e()})}function i(e){function i(e){if((u=e.exports).memory){e=u.memory;var n=t.buffer;e.byteLength<n.byteLength&&t.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),n=new Int8Array(n),new Int8Array(e).set(n),t.buffer=d=e,k()}t.asm=u,t.usingWasm=!0,D--,t.monitorRunDependencies&&t.monitorRunDependencies(D),0==D&&(null!==L&&(clearInterval(L),L=null),z&&(e=z,z=null,e()))}function r(e){i(e.instance)}function o(e){n().then(function(e){return WebAssembly.instantiate(e,l)}).then(e).catch(function(e){t.printErr("failed to asynchronously prepare wasm: "+e),W(e)})}if("object"!=typeof WebAssembly)return t.printErr("no native wasm support detected"),!1;if(!(t.wasmMemory instanceof WebAssembly.Memory))return t.printErr("no native wasm Memory in use"),!1;if(e.memory=t.wasmMemory,l.global={NaN:NaN,Infinity:1/0},l["global.Math"]=Math,l.env=e,D++,t.monitorRunDependencies&&t.monitorRunDependencies(D),t.instantiateWasm)try{return t.instantiateWasm(l,i)}catch(e){return t.printErr("Module.instantiateWasm callback failed with error: "+e),!1}return t.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||B(s)||"function"!=typeof fetch?o(r):WebAssembly.instantiateStreaming(fetch(s,{credentials:"same-origin"}),l).then(r).catch(function(e){t.printErr("wasm streaming compile failed: "+e),t.printErr("falling back to ArrayBuffer instantiation"),o(r)}),{}}var r="ed25519-to-x25519.wast",s="ed25519-to-x25519.wasm?006dd",c="ed25519-to-x25519.temp.asm.js";"function"==typeof t.locateFile?(B(r)||(r=t.locateFile(r)),B(s)||(s=t.locateFile(s)),B(c)||(c=t.locateFile(c))):(B(r)||(r=t.scriptDirectory+r),B(s)||(s=t.scriptDirectory+s),B(c)||(c=t.scriptDirectory+c));var l={global:null,env:null,asm2wasm:{"f64-rem":function(e,t){return e%t},debugger:function(){}},parent:t},u=null;t.asmPreload=t.asm;var h=t.reallocBuffer;t.reallocBuffer=function(e){if("asmjs"===_)var n=h(e);else e:{var i=t.usingWasm?65536:16777216;if(0<e%i&&(e+=i-e%i),i=t.buffer.byteLength,t.usingWasm)try{n=-1!==t.wasmMemory.grow((e-i)/65536)?t.buffer=t.wasmMemory.buffer:null;break e}catch(e){n=null;break e}n=void 0}return n};var _="";t.asm=function(e,n){if(!n.table){void 0===(e=t.wasmTableSize)&&(e=1024);var r=t.wasmMaxTableSize;n.table="object"==typeof WebAssembly&&"function"==typeof WebAssembly.Table?void 0!==r?new WebAssembly.Table({initial:e,maximum:r,element:"anyfunc"}):new WebAssembly.Table({initial:e,element:"anyfunc"}):Array(e),t.wasmTable=n.table}return n.memoryBase||(n.memoryBase=t.STATIC_BASE),n.tableBase||(n.tableBase=0),(n=i(n))||W("no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods"),n}}(),m=3984,O.push(),t.STATIC_BASE=1024,t.STATIC_BUMP=2960,m+=16,E(!g),v=m,b=h((y=h(m=m+4+15&-16))+x),p[v>>2]=b,g=!0,t.wasmTableSize=0,t.wasmMaxTableSize=0,t.b={},t.c={enlargeMemory:function(){A()},getTotalMemory:function(){return S},abortOnCannotGrowMemory:A,___setErrNo:function(e){return t.___errno_location&&(p[t.___errno_location()>>2]=e),e},DYNAMICTOP_PTR:v,STACKTOP:y};var U=t.asm(t.b,t.c,d);t.asm=U,t._crypto_sign_ed25519_pk_to_curve25519=function(){return t.asm._crypto_sign_ed25519_pk_to_curve25519.apply(null,arguments)},t._crypto_sign_ed25519_sk_to_curve25519=function(){return t.asm._crypto_sign_ed25519_sk_to_curve25519.apply(null,arguments)};var j=t._free=function(){return t.asm._free.apply(null,arguments)},q=t._malloc=function(){return t.asm._malloc.apply(null,arguments)};function F(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function H(){function e(){if(!t.calledRun&&(t.calledRun=!0,!w)){if(I||(I=!0,T(O)),T(C),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();R.unshift(e)}T(R)}}if(!(0<D)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)M();T(P),0<D||t.calledRun||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e())}}function W(e){throw t.onAbort&&t.onAbort(e),void 0!==e?(t.print(e),t.printErr(e),e=JSON.stringify(e)):e="",w=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(t.asm=U,t.then=function(e){if(t.calledRun)e(t);else{var n=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){n&&n(),e(t)}}return t},F.prototype=Error(),F.prototype.constructor=F,z=function e(){t.calledRun||H(),t.calledRun||(z=e)},t.run=H,t.exit=function(e,n){n&&t.noExitRuntime&&0===e||(!t.noExitRuntime&&(w=!0,y=void 0,T(N),t.onExit)&&t.onExit(e),c&&process.exit(e),t.quit(e,new F(e)))},t.abort=W,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return t.noExitRuntime=!0,H(),function(){function e(e){if(e&&e.buffer instanceof ArrayBuffer)e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else if("string"==typeof e){for(var t=e.length,n=new Uint8Array(t+1),i=0;i<t;++i)n[i]=e.charCodeAt(i);return n}return e}function n(t,i){var s=new Number(t);return s.length=i,s.get=function(e){return new(e=e||Uint8Array)(d,s,i/e.BYTES_PER_ELEMENT).slice()},s.dereference=function(e){return e=e||4,n(s.get(Uint32Array)[0],e)},s.set=function(t){if((t=e(t)).length>i)throw RangeError("invalid array length");_.set(t,s)},s.free=function(){j(s),r.splice(r.indexOf(s),1)},r.push(s),s}function i(t,i){i=e(i),0===t&&(t=i.length);var r=n(q(t),t);return void 0!==i?(r.set(i),i.length<t&&_.fill(0,r+i.length,r+t)):_.fill(0,r,r+t),r}var r=[];t.createPointer=n,t.allocatePointer=function(e){return e&&(e=Uint32Array.of(e)),i(4,e)},t.allocateBytes=i,t.freeBytes=function(){for(var e=0,t=r.length;e<t;++e)j(r[e]);r=[]}}(),e};__ed25519_to_x25519_wasm=__ed25519_to_x25519_wasm.bind({_currentScript:"undefined"!=typeof document?document.currentScript:void 0,_selfLocation:"undefined"!=typeof self?self.location:void 0}),"object"==typeof exports&&"object"==typeof module?module.exports=__ed25519_to_x25519_wasm:"function"==typeof define&&define.amd?define("ed25519-to-x25519.wasm/src/ed25519-to-x25519",[],function(){return __ed25519_to_x25519_wasm}):"object"==typeof exports&&(exports.__ed25519_to_x25519_wasm=__ed25519_to_x25519_wasm),function(){function e(e){var t,n;return e=e(),t=e.allocateBytes,n=e.freeBytes,{ready:e.then,convert_public_key:function(i){var r;return r=t(32),i=t(0,i),0!==e._crypto_sign_ed25519_pk_to_curve25519(r,i)?null:(r=r.get(),n(),r)},convert_private_key:function(i){var r;return r=t(32),i=t(0,i),e._crypto_sign_ed25519_sk_to_curve25519(r,i),r=r.get(),n(),r}}}define("ed25519-to-x25519.wasm/src/index.min",["./ed25519-to-x25519"],e)}.call(this),define("ed25519-to-x25519.wasm",["ed25519-to-x25519.wasm/src/index.min"],function(e){return e});var __aez_wasm=function(e){var t;e=e||{},t||(t=void 0!==e?e:{});var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);t.arguments=[],t.thisProgram="./this.program",t.quit=function(e,t){throw t},t.preRun=[],t.postRun=[];var r,s,o=!1,a=!1,c=!1,l=!1;if(t.ENVIRONMENT)if("WEB"===t.ENVIRONMENT)o=!0;else if("WORKER"===t.ENVIRONMENT)a=!0;else if("NODE"===t.ENVIRONMENT)c=!0;else{if("SHELL"!==t.ENVIRONMENT)throw Error("Module['ENVIRONMENT'] value is not valid. must be one of: WEB|WORKER|NODE|SHELL.");l=!0}else o="object"==typeof window,a="function"==typeof importScripts,c="object"==typeof process&&"function"==typeof require&&!o&&!a,l=!o&&!c&&!a;if(!t.scriptDirectory)if(t.scriptDirectory="",c)t.scriptDirectory=__dirname+"/";else if(o){var u=this._currentScript||document.currentScript;0!==u.src.indexOf("blob:")&&(t.scriptDirectory=u.src.split("/").slice(0,-1).join("/")+"/")}else a&&(t.scriptDirectory=(this._selfLocation||self.location).href.split("/").slice(0,-1).join("/")+"/");(t.memoryInitializerPrefixURL||(t.memoryInitializerPrefixURL=t.scriptDirectory),t.pthreadMainPrefixURL||(t.pthreadMainPrefixURL=t.scriptDirectory),t.cdInitializerPrefixURL||(t.cdInitializerPrefixURL=t.scriptDirectory),t.filePackagePrefixURL||(t.filePackagePrefixURL=t.scriptDirectory),c)?(t.read=function(e,t){return r||(r=require("fs")),s||(s=require("path")),e=s.normalize(e),e=r.readFileSync(e),t?e:e.toString()},t.readBinary=function(e){return(e=t.read(e,!0)).buffer||(e=new Uint8Array(e)),E(e.buffer),e},1<process.argv.length&&(t.thisProgram=process.argv[1].replace(/\\/g,"/")),t.arguments=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof F))throw e}),process.on("unhandledRejection",function(){process.exit(1)}),t.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(t.read=function(e){return read(e)}),t.readBinary=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(E("object"==typeof(e=read(e,"binary"))),e)},"undefined"!=typeof scriptArgs?t.arguments=scriptArgs:void 0!==arguments&&(t.arguments=arguments),"function"==typeof quit&&(t.quit=function(e){quit(e)})):(o||a)&&(t.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},a&&(t.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),t.readAsync=function(e,t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?t(i.response):n()},i.onerror=n,i.send(null)},void 0!==arguments&&(t.arguments=arguments),t.setWindowTitle=function(e){document.title=e});for(n in t.print="undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null,t.printErr="undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||t.print,t.print=t.print,t.printErr=t.printErr,i)i.hasOwnProperty(n)&&(t[n]=i[n]);function h(e){var t;return t||(t=16),Math.ceil(e/t)*t}i=void 0;var d,_,f,p,m,g,y,b,v,w=0;function E(e,t){e||W("Assertion failed: "+t)}function k(){t.HEAP8=new Int8Array(d),t.HEAP16=f=new Int16Array(d),t.HEAP32=p=new Int32Array(d),t.HEAPU8=_=new Uint8Array(d),t.HEAPU16=new Uint16Array(d),t.HEAPU32=new Uint32Array(d),t.HEAPF32=new Float32Array(d),t.HEAPF64=new Float64Array(d)}function A(){W("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+S+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}"undefined"!=typeof TextDecoder&&new TextDecoder("utf8"),"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le"),m=y=0,g=!1;var x=t.TOTAL_STACK||5242880,S=t.TOTAL_MEMORY||16777216;if(S<x&&t.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+S+"! (TOTAL_STACK="+x+")"),t.buffer?d=t.buffer:("object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(t.wasmMemory=new WebAssembly.Memory({initial:S/65536,maximum:S/65536}),d=t.wasmMemory.buffer):d=new ArrayBuffer(S),t.buffer=d),k(),p[0]=1668509029,f[1]=25459,115!==_[2]||99!==_[3])throw"Runtime error: expected the system to be little-endian!";function T(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n();else{var i=n.f;"number"==typeof i?void 0===n.a?t.dynCall_v(i):t.dynCall_vi(i,n.a):i(void 0===n.a?null:n.a)}}}var P=[],O=[],C=[],N=[],R=[],I=!1;function M(){var e=t.preRun.shift();P.unshift(e)}var D=0,L=null,z=null;function B(e){return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}t.preloadedImages={},t.preloadedAudios={},function(){function e(){try{if(t.wasmBinary)return new Uint8Array(t.wasmBinary);if(t.readBinary)return t.readBinary(s);throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)"}catch(e){W(e)}}function n(){return t.wasmBinary||!o&&!a||"function"!=typeof fetch?new Promise(function(t){t(e())}):fetch(s,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+s+"'";return e.arrayBuffer()}).catch(function(){return e()})}function i(e){function i(e){if((u=e.exports).memory){e=u.memory;var n=t.buffer;e.byteLength<n.byteLength&&t.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),n=new Int8Array(n),new Int8Array(e).set(n),t.buffer=d=e,k()}t.asm=u,t.usingWasm=!0,D--,t.monitorRunDependencies&&t.monitorRunDependencies(D),0==D&&(null!==L&&(clearInterval(L),L=null),z&&(e=z,z=null,e()))}function r(e){i(e.instance)}function o(e){n().then(function(e){return WebAssembly.instantiate(e,l)}).then(e).catch(function(e){t.printErr("failed to asynchronously prepare wasm: "+e),W(e)})}if("object"!=typeof WebAssembly)return t.printErr("no native wasm support detected"),!1;if(!(t.wasmMemory instanceof WebAssembly.Memory))return t.printErr("no native wasm Memory in use"),!1;if(e.memory=t.wasmMemory,l.global={NaN:NaN,Infinity:1/0},l["global.Math"]=Math,l.env=e,D++,t.monitorRunDependencies&&t.monitorRunDependencies(D),t.instantiateWasm)try{return t.instantiateWasm(l,i)}catch(e){return t.printErr("Module.instantiateWasm callback failed with error: "+e),!1}return t.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||B(s)||"function"!=typeof fetch?o(r):WebAssembly.instantiateStreaming(fetch(s,{credentials:"same-origin"}),l).then(r).catch(function(e){t.printErr("wasm streaming compile failed: "+e),t.printErr("falling back to ArrayBuffer instantiation"),o(r)}),{}}var r="aez.wast",s="aez.wasm?a2fe3",c="aez.temp.asm.js";"function"==typeof t.locateFile?(B(r)||(r=t.locateFile(r)),B(s)||(s=t.locateFile(s)),B(c)||(c=t.locateFile(c))):(B(r)||(r=t.scriptDirectory+r),B(s)||(s=t.scriptDirectory+s),B(c)||(c=t.scriptDirectory+c));var l={global:null,env:null,asm2wasm:{"f64-rem":function(e,t){return e%t},debugger:function(){}},parent:t},u=null;t.asmPreload=t.asm;var h=t.reallocBuffer;t.reallocBuffer=function(e){if("asmjs"===_)var n=h(e);else e:{var i=t.usingWasm?65536:16777216;if(0<e%i&&(e+=i-e%i),i=t.buffer.byteLength,t.usingWasm)try{n=-1!==t.wasmMemory.grow((e-i)/65536)?t.buffer=t.wasmMemory.buffer:null;break e}catch(e){n=null;break e}n=void 0}return n};var _="";t.asm=function(e,n){if(!n.table){void 0===(e=t.wasmTableSize)&&(e=1024);var r=t.wasmMaxTableSize;n.table="object"==typeof WebAssembly&&"function"==typeof WebAssembly.Table?void 0!==r?new WebAssembly.Table({initial:e,maximum:r,element:"anyfunc"}):new WebAssembly.Table({initial:e,element:"anyfunc"}):Array(e),t.wasmTable=n.table}return n.memoryBase||(n.memoryBase=t.STATIC_BASE),n.tableBase||(n.tableBase=0),(n=i(n))||W("no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods"),n}}(),m=7920,O.push(),t.STATIC_BASE=1024,t.STATIC_BUMP=6896,m+=16,E(!g),v=m,b=h((y=h(m=m+4+15&-16))+x),p[v>>2]=b,g=!0,t.wasmTableSize=0,t.wasmMaxTableSize=0,t.b={},t.c={enlargeMemory:function(){A()},getTotalMemory:function(){return S},abortOnCannotGrowMemory:A,___setErrNo:function(e){return t.___errno_location&&(p[t.___errno_location()>>2]=e),e},_emscripten_memcpy_big:function(e,t,n){return _.set(_.subarray(t,t+n),e),e},DYNAMICTOP_PTR:v,STACKTOP:y};var U=t.asm(t.b,t.c,d);t.asm=U,t._aez_decrypt=function(){return t.asm._aez_decrypt.apply(null,arguments)},t._aez_encrypt=function(){return t.asm._aez_encrypt.apply(null,arguments)};var j=t._free=function(){return t.asm._free.apply(null,arguments)},q=t._malloc=function(){return t.asm._malloc.apply(null,arguments)};function F(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function H(){function e(){if(!t.calledRun&&(t.calledRun=!0,!w)){if(I||(I=!0,T(O)),T(C),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();R.unshift(e)}T(R)}}if(!(0<D)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)M();T(P),0<D||t.calledRun||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e())}}function W(e){throw t.onAbort&&t.onAbort(e),void 0!==e?(t.print(e),t.printErr(e),e=JSON.stringify(e)):e="",w=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(t.asm=U,t.then=function(e){if(t.calledRun)e(t);else{var n=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){n&&n(),e(t)}}return t},F.prototype=Error(),F.prototype.constructor=F,z=function e(){t.calledRun||H(),t.calledRun||(z=e)},t.run=H,t.exit=function(e,n){n&&t.noExitRuntime&&0===e||(!t.noExitRuntime&&(w=!0,y=void 0,T(N),t.onExit)&&t.onExit(e),c&&process.exit(e),t.quit(e,new F(e)))},t.abort=W,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return t.noExitRuntime=!0,H(),function(){function e(e){if(e&&e.buffer instanceof ArrayBuffer)e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else if("string"==typeof e){for(var t=e.length,n=new Uint8Array(t+1),i=0;i<t;++i)n[i]=e.charCodeAt(i);return n}return e}function n(t,i){var s=new Number(t);return s.length=i,s.get=function(e){return new(e=e||Uint8Array)(d,s,i/e.BYTES_PER_ELEMENT).slice()},s.dereference=function(e){return e=e||4,n(s.get(Uint32Array)[0],e)},s.set=function(t){if((t=e(t)).length>i)throw RangeError("invalid array length");_.set(t,s)},s.free=function(){j(s),r.splice(r.indexOf(s),1)},r.push(s),s}function i(t,i){i=e(i),0===t&&(t=i.length);var r=n(q(t),t);return void 0!==i?(r.set(i),i.length<t&&_.fill(0,r+i.length,r+t)):_.fill(0,r,r+t),r}var r=[];t.createPointer=n,t.allocatePointer=function(e){return e&&(e=Uint32Array.of(e)),i(4,e)},t.allocateBytes=i,t.freeBytes=function(){for(var e=0,t=r.length;e<t;++e)j(r[e]);r=[]}}(),e};__aez_wasm=__aez_wasm.bind({_currentScript:"undefined"!=typeof document?document.currentScript:void 0,_selfLocation:"undefined"!=typeof self?self.location:void 0}),"object"==typeof exports&&"object"==typeof module?module.exports=__aez_wasm:"function"==typeof define&&define.amd?define("aez.wasm/src/aez",[],function(){return __aez_wasm}):"object"==typeof exports&&(exports.__aez_wasm=__aez_wasm),function(){function e(e){var t,n;function i(e){return e&&e.length?[e.length,t(0,e)]:[0,null]}return e=e(),t=e.allocateBytes,n=e.freeBytes,{ready:e.then,encrypt:function(r,s,o,a,c){var l,u,h,d,_;if(u=(l=i(r))[0],r=l[1],h=(l=i(s))[0],s=l[1],d=(l=i(o))[0],o=l[1],a=t(0,a),u+c===0)throw new Error("Can't encrypt empty plaintext without ciphertext expansion");return _=t(u+c),e._aez_encrypt(_,r,u,s,h,o,d,a,a.length,c),_=_.get(),n(),_},decrypt:function(r,s,o,a,c){var l,u,h,d,_;if(u=(l=i(r))[0],r=l[1],h=(l=i(s))[0],s=l[1],d=(l=i(o))[0],o=l[1],a=t(0,a),_=u-c>0?t(u-c):null,0!==e._aez_decrypt(_,r,u,s,h,o,d,a,a.length,c))throw n(),new Error("Decryption failed");return _?(_=_.get(),n(),_):(n(),new Uint8Array(0))}}}define("aez.wasm/src/index.min",["./aez"],e)}.call(this),define("aez.wasm",["aez.wasm/src/index.min"],function(e){return e});var __noise_c_wasm=function(e){var t;e=e||{},t||(t=void 0!==e?e:{});var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);t.arguments=[],t.thisProgram="./this.program",t.quit=function(e,t){throw t},t.preRun=[],t.postRun=[];var r,s,o=!1,a=!1,c=!1,l=!1;if(t.ENVIRONMENT)if("WEB"===t.ENVIRONMENT)o=!0;else if("WORKER"===t.ENVIRONMENT)a=!0;else if("NODE"===t.ENVIRONMENT)c=!0;else{if("SHELL"!==t.ENVIRONMENT)throw Error("Module['ENVIRONMENT'] value is not valid. must be one of: WEB|WORKER|NODE|SHELL.");l=!0}else o="object"==typeof window,a="function"==typeof importScripts,c="object"==typeof process&&"function"==typeof require&&!o&&!a,l=!o&&!c&&!a;if(!t.scriptDirectory)if(t.scriptDirectory="",c)t.scriptDirectory=__dirname+"/";else if(o){var u=this._currentScript||document.currentScript;0!==u.src.indexOf("blob:")&&(t.scriptDirectory=u.src.split("/").slice(0,-1).join("/")+"/")}else a&&(t.scriptDirectory=(this._selfLocation||self.location).href.split("/").slice(0,-1).join("/")+"/");(t.memoryInitializerPrefixURL||(t.memoryInitializerPrefixURL=t.scriptDirectory),t.pthreadMainPrefixURL||(t.pthreadMainPrefixURL=t.scriptDirectory),t.cdInitializerPrefixURL||(t.cdInitializerPrefixURL=t.scriptDirectory),t.filePackagePrefixURL||(t.filePackagePrefixURL=t.scriptDirectory),c)?(t.read=function(e,t){return r||(r=require("fs")),s||(s=require("path")),e=s.normalize(e),e=r.readFileSync(e),t?e:e.toString()},t.readBinary=function(e){return(e=t.read(e,!0)).buffer||(e=new Uint8Array(e)),_(e.buffer),e},1<process.argv.length&&(t.thisProgram=process.argv[1].replace(/\\/g,"/")),t.arguments=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof Y))throw e}),process.on("unhandledRejection",function(){process.exit(1)}),t.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(t.read=function(e){return read(e)}),t.readBinary=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(_("object"==typeof(e=read(e,"binary"))),e)},"undefined"!=typeof scriptArgs?t.arguments=scriptArgs:void 0!==arguments&&(t.arguments=arguments),"function"==typeof quit&&(t.quit=function(e){quit(e)})):(o||a)&&(t.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},a&&(t.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),t.readAsync=function(e,t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?t(i.response):n()},i.onerror=n,i.send(null)},void 0!==arguments&&(t.arguments=arguments),t.setWindowTitle=function(e){document.title=e});for(n in t.print="undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null,t.printErr="undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||t.print,t.print=t.print,t.printErr=t.printErr,i)i.hasOwnProperty(n)&&(t[n]=i[n]);function h(e){var t;return t||(t=16),Math.ceil(e/t)*t}i=void 0;var d=0;function _(e,t){e||X("Assertion failed: "+t)}function f(e){var t;if(0===t||!e)return"";for(var n,i=0,r=0;(i|=n=m[e+r>>0],0!=n||t)&&(r++,!t||r!=t););if(t||(t=r),n="",128>i){for(;0<t;)i=String.fromCharCode.apply(String,m.subarray(e,e+Math.min(t,1024))),n=n?n+i:i,e+=1024,t-=1024;return n}e:{for(t=m,i=e;t[i];)++i;if(16<i-e&&t.subarray&&A)e=A.decode(t.subarray(e,i));else for(i="";;){if(!(n=t[e++])){e=i;break e}if(128&n)if(r=63&t[e++],192==(224&n))i+=String.fromCharCode((31&n)<<6|r);else{var s=63&t[e++];if(224==(240&n))n=(15&n)<<12|r<<6|s;else{var o=63&t[e++];if(240==(248&n))n=(7&n)<<18|r<<12|s<<6|o;else{var a=63&t[e++];if(248==(252&n))n=(3&n)<<24|r<<18|s<<12|o<<6|a;else n=(1&n)<<30|r<<24|s<<18|o<<12|a<<6|63&t[e++]}}65536>n?i+=String.fromCharCode(n):(n-=65536,i+=String.fromCharCode(55296|n>>10,56320|1023&n))}else i+=String.fromCharCode(n)}}return e}var p,m,g,y,b,v,w,E,k,A="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function x(){t.HEAP8=new Int8Array(p),t.HEAP16=g=new Int16Array(p),t.HEAP32=y=new Int32Array(p),t.HEAPU8=m=new Uint8Array(p),t.HEAPU16=new Uint16Array(p),t.HEAPU32=new Uint32Array(p),t.HEAPF32=new Float32Array(p),t.HEAPF64=new Float64Array(p)}function S(){X("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+P+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le"),b=w=0,v=!1;var T=t.TOTAL_STACK||5242880,P=t.TOTAL_MEMORY||16777216;if(P<T&&t.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+P+"! (TOTAL_STACK="+T+")"),t.buffer?p=t.buffer:("object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(t.wasmMemory=new WebAssembly.Memory({initial:P/65536,maximum:P/65536}),p=t.wasmMemory.buffer):p=new ArrayBuffer(P),t.buffer=p),x(),y[0]=1668509029,g[1]=25459,115!==m[2]||99!==m[3])throw"Runtime error: expected the system to be little-endian!";function O(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n();else{var i=n.g;"number"==typeof i?void 0===n.b?t.dynCall_v(i):t.dynCall_vi(i,n.b):i(void 0===n.b?null:n.b)}}}var C=[],N=[],R=[],I=[],M=[],D=!1;function L(){var e=t.preRun.shift();C.unshift(e)}var z=0,B=null,U=null;function j(e){return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}function q(){return q.a||(q.a=[]),q.a.push(G()),q.a.length-1}t.preloadedImages={},t.preloadedAudios={},function(){function e(){try{if(t.wasmBinary)return new Uint8Array(t.wasmBinary);if(t.readBinary)return t.readBinary(s);throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)"}catch(e){X(e)}}function n(){return t.wasmBinary||!o&&!a||"function"!=typeof fetch?new Promise(function(t){t(e())}):fetch(s,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+s+"'";return e.arrayBuffer()}).catch(function(){return e()})}function i(e){function i(e){if((u=e.exports).memory){e=u.memory;var n=t.buffer;e.byteLength<n.byteLength&&t.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),n=new Int8Array(n),new Int8Array(e).set(n),t.buffer=p=e,x()}t.asm=u,t.usingWasm=!0,z--,t.monitorRunDependencies&&t.monitorRunDependencies(z),0==z&&(null!==B&&(clearInterval(B),B=null),U&&(e=U,U=null,e()))}function r(e){i(e.instance)}function o(e){n().then(function(e){return WebAssembly.instantiate(e,l)}).then(e).catch(function(e){t.printErr("failed to asynchronously prepare wasm: "+e),X(e)})}if("object"!=typeof WebAssembly)return t.printErr("no native wasm support detected"),!1;if(!(t.wasmMemory instanceof WebAssembly.Memory))return t.printErr("no native wasm Memory in use"),!1;if(e.memory=t.wasmMemory,l.global={NaN:NaN,Infinity:1/0},l["global.Math"]=Math,l.env=e,z++,t.monitorRunDependencies&&t.monitorRunDependencies(z),t.instantiateWasm)try{return t.instantiateWasm(l,i)}catch(e){return t.printErr("Module.instantiateWasm callback failed with error: "+e),!1}return t.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||j(s)||"function"!=typeof fetch?o(r):WebAssembly.instantiateStreaming(fetch(s,{credentials:"same-origin"}),l).then(r).catch(function(e){t.printErr("wasm streaming compile failed: "+e),t.printErr("falling back to ArrayBuffer instantiation"),o(r)}),{}}var r="noise-c.wast",s="noise-c.wasm?4f6d8",c="noise-c.temp.asm.js";"function"==typeof t.locateFile?(j(r)||(r=t.locateFile(r)),j(s)||(s=t.locateFile(s)),j(c)||(c=t.locateFile(c))):(j(r)||(r=t.scriptDirectory+r),j(s)||(s=t.scriptDirectory+s),j(c)||(c=t.scriptDirectory+c));var l={global:null,env:null,asm2wasm:{"f64-rem":function(e,t){return e%t},debugger:function(){}},parent:t},u=null;t.asmPreload=t.asm;var h=t.reallocBuffer;t.reallocBuffer=function(e){if("asmjs"===d)var n=h(e);else e:{var i=t.usingWasm?65536:16777216;if(0<e%i&&(e+=i-e%i),i=t.buffer.byteLength,t.usingWasm)try{n=-1!==t.wasmMemory.grow((e-i)/65536)?t.buffer=t.wasmMemory.buffer:null;break e}catch(e){n=null;break e}n=void 0}return n};var d="";t.asm=function(e,n){if(!n.table){void 0===(e=t.wasmTableSize)&&(e=1024);var r=t.wasmMaxTableSize;n.table="object"==typeof WebAssembly&&"function"==typeof WebAssembly.Table?void 0!==r?new WebAssembly.Table({initial:e,maximum:r,element:"anyfunc"}):new WebAssembly.Table({initial:e,element:"anyfunc"}):Array(e),t.wasmTable=n.table}return n.memoryBase||(n.memoryBase=t.STATIC_BASE),n.tableBase||(n.tableBase=0),(n=i(n))||X("no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods"),n}}(),b=43712,N.push(),t.STATIC_BASE=1024,t.STATIC_BUMP=42688,b+=16,_(!v),k=b,E=h((w=h(b=b+4+15&-16))+T),y[k>>2]=E,v=!0,t.wasmTableSize=68,t.wasmMaxTableSize=68,t.c={},t.f={abort:X,enlargeMemory:function(){S()},getTotalMemory:function(){return P},abortOnCannotGrowMemory:S,___assert_fail:function(e,t,n,i){X("Assertion failed: "+f(e)+", at: "+[t?f(t):"unknown filename",n,i?f(i):"unknown function"])},___setErrNo:function(e){return t.___errno_location&&(y[t.___errno_location()>>2]=e),e},_emscripten_memcpy_big:function(e,t,n){return m.set(m.subarray(t,t+n),e),e},_llvm_stackrestore:function(e){var t=q.a[e];q.a.splice(e,1),V(t)},_llvm_stacksave:q,_noise_rand_bytes:function(e,n){m.set(t._random_bytes(n),e)},DYNAMICTOP_PTR:k,STACKTOP:w};var F=t.asm(t.c,t.f,p);t.asm=F,t._NoiseBuffer_create=function(){return t.asm._NoiseBuffer_create.apply(null,arguments)},t._NoiseBuffer_get_size=function(){return t.asm._NoiseBuffer_get_size.apply(null,arguments)},t._SymmetricState_get_ck=function(){return t.asm._SymmetricState_get_ck.apply(null,arguments)};var H=t._free=function(){return t.asm._free.apply(null,arguments)},W=t._malloc=function(){return t.asm._malloc.apply(null,arguments)};t._noise_cipherstate_decrypt_with_ad=function(){return t.asm._noise_cipherstate_decrypt_with_ad.apply(null,arguments)},t._noise_cipherstate_encrypt_with_ad=function(){return t.asm._noise_cipherstate_encrypt_with_ad.apply(null,arguments)},t._noise_cipherstate_free=function(){return t.asm._noise_cipherstate_free.apply(null,arguments)},t._noise_cipherstate_get_mac_length=function(){return t.asm._noise_cipherstate_get_mac_length.apply(null,arguments)},t._noise_cipherstate_has_key=function(){return t.asm._noise_cipherstate_has_key.apply(null,arguments)},t._noise_cipherstate_init_key=function(){return t.asm._noise_cipherstate_init_key.apply(null,arguments)},t._noise_cipherstate_new_by_id=function(){return t.asm._noise_cipherstate_new_by_id.apply(null,arguments)},t._noise_dhstate_set_keypair_private=function(){return t.asm._noise_dhstate_set_keypair_private.apply(null,arguments)},t._noise_dhstate_set_public_key=function(){return t.asm._noise_dhstate_set_public_key.apply(null,arguments)},t._noise_handshakestate_fallback_to=function(){return t.asm._noise_handshakestate_fallback_to.apply(null,arguments)},t._noise_handshakestate_free=function(){return t.asm._noise_handshakestate_free.apply(null,arguments)},t._noise_handshakestate_get_action=function(){return t.asm._noise_handshakestate_get_action.apply(null,arguments)},t._noise_handshakestate_get_fixed_ephemeral_dh=function(){return t.asm._noise_handshakestate_get_fixed_ephemeral_dh.apply(null,arguments)},t._noise_handshakestate_get_fixed_hybrid_dh=function(){return t.asm._noise_handshakestate_get_fixed_hybrid_dh.apply(null,arguments)},t._noise_handshakestate_get_handshake_hash=function(){return t.asm._noise_handshakestate_get_handshake_hash.apply(null,arguments)},t._noise_handshakestate_get_local_keypair_dh=function(){return t.asm._noise_handshakestate_get_local_keypair_dh.apply(null,arguments)},t._noise_handshakestate_get_remote_public_key_dh=function(){return t.asm._noise_handshakestate_get_remote_public_key_dh.apply(null,arguments)},t._noise_handshakestate_needs_local_keypair=function(){return t.asm._noise_handshakestate_needs_local_keypair.apply(null,arguments)},t._noise_handshakestate_needs_pre_shared_key=function(){return t.asm._noise_handshakestate_needs_pre_shared_key.apply(null,arguments)},t._noise_handshakestate_needs_remote_public_key=function(){return t.asm._noise_handshakestate_needs_remote_public_key.apply(null,arguments)},t._noise_handshakestate_new_by_name=function(){return t.asm._noise_handshakestate_new_by_name.apply(null,arguments)},t._noise_handshakestate_read_message=function(){return t.asm._noise_handshakestate_read_message.apply(null,arguments)},t._noise_handshakestate_set_pre_shared_key=function(){return t.asm._noise_handshakestate_set_pre_shared_key.apply(null,arguments)},t._noise_handshakestate_set_prologue=function(){return t.asm._noise_handshakestate_set_prologue.apply(null,arguments)},t._noise_handshakestate_split=function(){return t.asm._noise_handshakestate_split.apply(null,arguments)},t._noise_handshakestate_start=function(){return t.asm._noise_handshakestate_start.apply(null,arguments)},t._noise_handshakestate_write_message=function(){return t.asm._noise_handshakestate_write_message.apply(null,arguments)},t._noise_symmetricstate_decrypt_and_hash=function(){return t.asm._noise_symmetricstate_decrypt_and_hash.apply(null,arguments)},t._noise_symmetricstate_encrypt_and_hash=function(){return t.asm._noise_symmetricstate_encrypt_and_hash.apply(null,arguments)},t._noise_symmetricstate_free=function(){return t.asm._noise_symmetricstate_free.apply(null,arguments)},t._noise_symmetricstate_get_mac_length=function(){return t.asm._noise_symmetricstate_get_mac_length.apply(null,arguments)},t._noise_symmetricstate_mix_hash=function(){return t.asm._noise_symmetricstate_mix_hash.apply(null,arguments)},t._noise_symmetricstate_mix_key=function(){return t.asm._noise_symmetricstate_mix_key.apply(null,arguments)},t._noise_symmetricstate_new_by_name=function(){return t.asm._noise_symmetricstate_new_by_name.apply(null,arguments)},t._noise_symmetricstate_split=function(){return t.asm._noise_symmetricstate_split.apply(null,arguments)};var V=t.stackRestore=function(){return t.asm.stackRestore.apply(null,arguments)},G=t.stackSave=function(){return t.asm.stackSave.apply(null,arguments)};function Y(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function $(){function e(){if(!t.calledRun&&(t.calledRun=!0,!d)){if(D||(D=!0,O(N)),O(R),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();M.unshift(e)}O(M)}}if(!(0<z)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)L();O(C),0<z||t.calledRun||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e())}}function X(e){throw t.onAbort&&t.onAbort(e),void 0!==e?(t.print(e),t.printErr(e),e=JSON.stringify(e)):e="",d=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(t.dynCall_vi=function(){return t.asm.dynCall_vi.apply(null,arguments)},t.asm=F,t.then=function(e){if(t.calledRun)e(t);else{var n=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){n&&n(),e(t)}}return t},Y.prototype=Error(),Y.prototype.constructor=Y,U=function e(){t.calledRun||$(),t.calledRun||(U=e)},t.run=$,t.exit=function(e,n){n&&t.noExitRuntime&&0===e||(!t.noExitRuntime&&(d=!0,w=void 0,O(I),t.onExit)&&t.onExit(e),c&&process.exit(e),t.quit(e,new Y(e)))},t.abort=X,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return t.noExitRuntime=!0,$(),function(){function e(e){if(e&&e.buffer instanceof ArrayBuffer)e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else if("string"==typeof e){for(var t=e.length,n=new Uint8Array(t+1),i=0;i<t;++i)n[i]=e.charCodeAt(i);return n}return e}function n(t,i){var s=new Number(t);return s.length=i,s.get=function(e){return new(e=e||Uint8Array)(p,s,i/e.BYTES_PER_ELEMENT).slice()},s.dereference=function(e){return e=e||4,n(s.get(Uint32Array)[0],e)},s.set=function(t){if((t=e(t)).length>i)throw RangeError("invalid array length");m.set(t,s)},s.free=function(){H(s),r.splice(r.indexOf(s),1)},r.push(s),s}function i(t,i){i=e(i),0===t&&(t=i.length);var r=n(W(t),t);return void 0!==i?(r.set(i),i.length<t&&m.fill(0,r+i.length,r+t)):m.fill(0,r,r+t),r}var r=[];t.createPointer=n,t.allocatePointer=function(e){return e&&(e=Uint32Array.of(e)),i(4,e)},t.allocateBytes=i,t.freeBytes=function(){for(var e=0,t=r.length;e<t;++e)H(r[e]);r=[]}}(),e};__noise_c_wasm=__noise_c_wasm.bind({_currentScript:"undefined"!=typeof document?document.currentScript:void 0,_selfLocation:"undefined"!=typeof self?self.location:void 0}),"object"==typeof exports&&"object"==typeof module?module.exports=__noise_c_wasm:"function"==typeof define&&define.amd?define("noise-c.wasm/src/noise-c",[],function(){return __noise_c_wasm}):"object"==typeof exports&&(exports.__noise_c_wasm=__noise_c_wasm),function(){var e;e={NOISE_CIPHER_NONE:0,NOISE_CIPHER_CHACHAPOLY:17153,NOISE_CIPHER_AESGCM:17154,NOISE_PATTERN_XX_FALLBACK:20496,NOISE_PATTERN_XX_FALLBACK_HFS:20540,NOISE_ROLE_INITIATOR:20993,NOISE_ROLE_RESPONDER:20994,NOISE_ACTION_NONE:0,NOISE_ACTION_WRITE_MESSAGE:16641,NOISE_ACTION_READ_MESSAGE:16642,NOISE_ACTION_FAILED:16643,NOISE_ACTION_SPLIT:16644,NOISE_ERROR_NONE:0,NOISE_ERROR_NO_MEMORY:17665,NOISE_ERROR_UNKNOWN_ID:17666,NOISE_ERROR_UNKNOWN_NAME:17667,NOISE_ERROR_MAC_FAILURE:17668,NOISE_ERROR_NOT_APPLICABLE:17669,NOISE_ERROR_SYSTEM:17670,NOISE_ERROR_REMOTE_KEY_REQUIRED:17671,NOISE_ERROR_LOCAL_KEY_REQUIRED:17672,NOISE_ERROR_PSK_REQUIRED:17673,NOISE_ERROR_INVALID_LENGTH:17674,NOISE_ERROR_INVALID_PARAM:17675,NOISE_ERROR_INVALID_STATE:17676,NOISE_ERROR_INVALID_NONCE:17677,NOISE_ERROR_INVALID_PRIVATE_KEY:17678,NOISE_ERROR_INVALID_PUBLIC_KEY:17679,NOISE_ERROR_INVALID_FORMAT:17680,NOISE_ERROR_INVALID_SIGNATURE:17681,NOISE_MAX_PAYLOAD_LEN:65535},"function"==typeof define&&define.amd?define("noise-c.wasm/src/constants",[],function(){return e}):"object"==typeof exports?module.exports=e:this.__noise_c_wasm_constants=e}.call(this),function(){var e;function t(t,n){var i,r;function s(e,n){var i,s;return i=r(),t._NoiseBuffer_create(i,e,n,e.length),s=i.dereference(),i.free(),s}function o(e,t){var i,r;if(e!==n.NOISE_ERROR_NONE)for(i in r=n)if(r[i]===e){if(t)try{t.free()}catch(e){}throw new Error(i)}}function a(e){var n;if(!(this instanceof a))return new a(e);n=r(),o(t._noise_cipherstate_new_by_id(n,e),n),this._state=n.dereference(),this._mac_length=t._noise_cipherstate_get_mac_length(this._state),n.free()}function c(e){this._state=e,this._mac_length=t._noise_cipherstate_get_mac_length(this._state)}function l(e){var n,s=this;if(!(this instanceof l))return new l(e);n=r(),e=i(0,e),o(t._noise_symmetricstate_new_by_name(n,e),n),this._state=n.dereference(),n.free(),e.free(),Object.defineProperty(this,"_mac_length",{configurable:!0,get:function(){var e;return(e=t._noise_symmetricstate_get_mac_length(s._state))>0&&(s._mac_length=e),e}})}function u(e,n){var s,a;if(!(this instanceof u))return new u(e,n);s=r(),e=i(0,e),a=t._noise_handshakestate_new_by_name(s,e,n),e.free(),o(a,s),this._state=s.dereference(),s.free()}return(t=t())._random_bytes=e,i=t.allocateBytes,r=t.allocatePointer,a.prototype={InitializeKey:function(e){var n;e=i(0,e),n=t._noise_cipherstate_init_key(this._state,e,e.length),e.free(),o(n,this)},HasKey:function(){return 1===t._noise_cipherstate_has_key(this._state)},EncryptWithAd:function(e,n){var r,a,c;return e=i(0,e),r=s(n=i(n.length+this._mac_length,n),n.length-this._mac_length),a=t._noise_cipherstate_encrypt_with_ad(this._state,e,e.length,r),c=n.get(),e.free(),n.free(),r.free(),o(a),c},DecryptWithAd:function(e,n){var r,a,c;return e=i(0,e),r=s(n=i(0,n),n.length),a=t._noise_cipherstate_decrypt_with_ad(this._state,e,e.length,r),c=n.get().slice(0,n.length-this._mac_length),e.free(),n.free(),r.free(),o(a),c},Rekey:function(){throw"Not implemented"},free:function(){var e;e=t._noise_cipherstate_free(this._state),delete this._state,delete this._mac_length,o(e)}},Object.defineProperty(a.prototype,"constructor",{enumerable:!1,value:a}),c.prototype=Object.create(a.prototype),Object.defineProperty(c.prototype,"constructor",{enumerable:!1,value:c}),l.prototype={MixKey:function(e){var n;e=i(0,e),n=t._noise_symmetricstate_mix_key(this._state,e,e.length),e.free(),o(n,this)},MixHash:function(e){var n;e=i(0,e),n=t._noise_symmetricstate_mix_hash(this._state,e,e.length),e.free(),o(n,this)},MixKeyAndHash:function(e){var n,i,s,o;this.MixKey(e),n=r(),i=t._SymmetricState_get_ck(this._state,n),s=n.dereference(i),n.free(),o=s.get(),s.free(),this.MixHash(o)},EncryptAndHash:function(e){var n,r,a;return n=s(e=i(e.length+this._mac_length,e),e.length-this._mac_length),r=t._noise_symmetricstate_encrypt_and_hash(this._state,n),a=e.get(),e.free(),n.free(),o(r,this),a},DecryptAndHash:function(e){var n,r,a;return n=s(e=i(0,e),e.length),r=t._noise_symmetricstate_decrypt_and_hash(this._state,n),a=e.get().slice(0,e.length-this._mac_length),e.free(),n.free(),o(r,this),a},Split:function(){var e,n,i,s,a,l;e=r(),n=r(),i=t._noise_symmetricstate_split(this._state,e,n);try{o(i)}catch(t){throw s=t,e.free(),n.free(),s}a=new c(e.dereference()),l=new c(n.dereference()),e.free(),n.free();try{this.free()}catch(e){s=e;try{a.free()}catch(e){}try{l.free()}catch(e){}throw s}return[a,l]},free:function(){var e;e=t._noise_symmetricstate_free(this._state),delete this._state,delete this._mac_length,o(e)}},Object.defineProperty(l.prototype,"constructor",{enumerable:!1,value:l}),u.prototype={Initialize:function(e,n,r,s){var a,c;if(null==e&&(e=null),null==n&&(n=null),null==r&&(r=null),null==s&&(s=null),e&&(e=i(0,e),a=t._noise_handshakestate_set_prologue(this._state,e,e.length),e.free(),o(a,this)),s&&1===t._noise_handshakestate_needs_pre_shared_key(this._state)&&(s=i(0,s),a=t._noise_handshakestate_set_pre_shared_key(this._state,s,s.length),s.free(),o(a,this)),1===t._noise_handshakestate_needs_local_keypair(this._state)){if(!n)throw new Error("Local static private key (s) required, but not provided");c=t._noise_handshakestate_get_local_keypair_dh(this._state),n=i(0,n),a=t._noise_dhstate_set_keypair_private(c,n,n.length),n.free(),o(a,this)}if(1===t._noise_handshakestate_needs_remote_public_key(this._state)){if(!r)throw new Error("Remote static public key (rs) required, but not provided");c=t._noise_handshakestate_get_remote_public_key_dh(this._state),r=i(0,r),a=t._noise_dhstate_set_public_key(c,r,r.length),r.free(),o(a,this)}o(a=t._noise_handshakestate_start(this._state),this)},GetAction:function(){return t._noise_handshakestate_get_action(this._state)},FallbackTo:function(e){null==e&&(e=n.NOISE_PATTERN_XX_FALLBACK),o(t._noise_handshakestate_fallback_to(this._state,e),this)},WriteMessage:function(e){var r,a,c,l,u,h,d;null==e&&(e=null),a=s(r=i(n.NOISE_MAX_PAYLOAD_LEN),0),c=null,e&&(c=s(e=i(0,e),e.length)),l=t._noise_handshakestate_write_message(this._state,a,c),e&&(e.free(),c.free());try{o(l,this)}catch(e){throw u=e,r.free(),a.free(),u}return h=t._NoiseBuffer_get_size(a),d=r.get().slice(0,h),r.free(),a.free(),d},ReadMessage:function(e,r,a){var c,l,u,h,d,_,f;null==r&&(r=!1),null==a&&(a=!1),c=s(e=i(0,e),e.length),l=null,r&&(l=s(u=i(n.NOISE_MAX_PAYLOAD_LEN),u.length)),h=t._noise_handshakestate_read_message(this._state,c,l),e.free(),c.free();try{o(h,a?void 0:this)}catch(e){throw d=e,r&&(u.free(),l.free()),d}return _=null,r&&(f=t._NoiseBuffer_get_size(l),_=u.get().slice(0,f),u.free(),l.free()),_},Split:function(){var e,n,i,s,a,l;e=r(),n=r(),i=t._noise_handshakestate_split(this._state,e,n);try{o(i,this)}catch(t){throw s=t,e.free(),n.free(),s}a=new c(e.dereference()),l=new c(n.dereference()),e.free(),n.free();try{this.free()}catch(e){s=e;try{a.free()}catch(e){}try{l.free()}catch(e){}throw s}return[a,l]},free:function(){var e;e=t._noise_handshakestate_free(this._state),delete this._state,o(e)}},Object.defineProperty(u.prototype,"constructor",{enumerable:!1,value:u}),{ready:t.then,constants:n,CipherState:a,SymmetricState:l,HandshakeState:u,_lib_internal:t}}e="undefined"!=typeof crypto?function(e){var t;return t=new Uint8Array(e),crypto.getRandomValues(t),t}:require("crypto").randomBytes,define("noise-c.wasm/src/index.min",["./noise-c","./constants"],t)}.call(this),define("noise-c.wasm",["noise-c.wasm/src/index.min"],function(e){return e});var __blake2_wasm=function(e){var t;e=e||{},t||(t=void 0!==e?e:{});var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);t.arguments=[],t.thisProgram="./this.program",t.quit=function(e,t){throw t},t.preRun=[],t.postRun=[];var r,s,o=!1,a=!1,c=!1,l=!1;if(t.ENVIRONMENT)if("WEB"===t.ENVIRONMENT)o=!0;else if("WORKER"===t.ENVIRONMENT)a=!0;else if("NODE"===t.ENVIRONMENT)c=!0;else{if("SHELL"!==t.ENVIRONMENT)throw Error("Module['ENVIRONMENT'] value is not valid. must be one of: WEB|WORKER|NODE|SHELL.");l=!0}else o="object"==typeof window,a="function"==typeof importScripts,c="object"==typeof process&&"function"==typeof require&&!o&&!a,l=!o&&!c&&!a;if(!t.scriptDirectory)if(t.scriptDirectory="",c)t.scriptDirectory=__dirname+"/";else if(o){var u=this._currentScript||document.currentScript;0!==u.src.indexOf("blob:")&&(t.scriptDirectory=u.src.split("/").slice(0,-1).join("/")+"/")}else a&&(t.scriptDirectory=(this._selfLocation||self.location).href.split("/").slice(0,-1).join("/")+"/");(t.memoryInitializerPrefixURL||(t.memoryInitializerPrefixURL=t.scriptDirectory),t.pthreadMainPrefixURL||(t.pthreadMainPrefixURL=t.scriptDirectory),t.cdInitializerPrefixURL||(t.cdInitializerPrefixURL=t.scriptDirectory),t.filePackagePrefixURL||(t.filePackagePrefixURL=t.scriptDirectory),c)?(t.read=function(e,t){return r||(r=require("fs")),s||(s=require("path")),e=s.normalize(e),e=r.readFileSync(e),t?e:e.toString()},t.readBinary=function(e){return(e=t.read(e,!0)).buffer||(e=new Uint8Array(e)),E(e.buffer),e},1<process.argv.length&&(t.thisProgram=process.argv[1].replace(/\\/g,"/")),t.arguments=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof F))throw e}),process.on("unhandledRejection",function(){process.exit(1)}),t.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(t.read=function(e){return read(e)}),t.readBinary=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(E("object"==typeof(e=read(e,"binary"))),e)},"undefined"!=typeof scriptArgs?t.arguments=scriptArgs:void 0!==arguments&&(t.arguments=arguments),"function"==typeof quit&&(t.quit=function(e){quit(e)})):(o||a)&&(t.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},a&&(t.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),t.readAsync=function(e,t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?t(i.response):n()},i.onerror=n,i.send(null)},void 0!==arguments&&(t.arguments=arguments),t.setWindowTitle=function(e){document.title=e});for(n in t.print="undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null,t.printErr="undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||t.print,t.print=t.print,t.printErr=t.printErr,i)i.hasOwnProperty(n)&&(t[n]=i[n]);function h(e){var t;return t||(t=16),Math.ceil(e/t)*t}i=void 0;var d,_,f,p,m,g,y,b,v,w=0;function E(e,t){e||W("Assertion failed: "+t)}function k(){t.HEAP8=new Int8Array(d),t.HEAP16=f=new Int16Array(d),t.HEAP32=p=new Int32Array(d),t.HEAPU8=_=new Uint8Array(d),t.HEAPU16=new Uint16Array(d),t.HEAPU32=new Uint32Array(d),t.HEAPF32=new Float32Array(d),t.HEAPF64=new Float64Array(d)}function A(){W("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+S+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}"undefined"!=typeof TextDecoder&&new TextDecoder("utf8"),"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le"),m=y=0,g=!1;var x=t.TOTAL_STACK||5242880,S=t.TOTAL_MEMORY||16777216;if(S<x&&t.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+S+"! (TOTAL_STACK="+x+")"),t.buffer?d=t.buffer:("object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(t.wasmMemory=new WebAssembly.Memory({initial:S/65536,maximum:S/65536}),d=t.wasmMemory.buffer):d=new ArrayBuffer(S),t.buffer=d),k(),p[0]=1668509029,f[1]=25459,115!==_[2]||99!==_[3])throw"Runtime error: expected the system to be little-endian!";function T(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n();else{var i=n.f;"number"==typeof i?void 0===n.a?t.dynCall_v(i):t.dynCall_vi(i,n.a):i(void 0===n.a?null:n.a)}}}var P=[],O=[],C=[],N=[],R=[],I=!1;function M(){var e=t.preRun.shift();P.unshift(e)}var D=0,L=null,z=null;function B(e){return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}t.preloadedImages={},t.preloadedAudios={},function(){function e(){try{if(t.wasmBinary)return new Uint8Array(t.wasmBinary);if(t.readBinary)return t.readBinary(s);throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)"}catch(e){W(e)}}function n(){return t.wasmBinary||!o&&!a||"function"!=typeof fetch?new Promise(function(t){t(e())}):fetch(s,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+s+"'";return e.arrayBuffer()}).catch(function(){return e()})}function i(e){function i(e){if((u=e.exports).memory){e=u.memory;var n=t.buffer;e.byteLength<n.byteLength&&t.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),n=new Int8Array(n),new Int8Array(e).set(n),t.buffer=d=e,k()}t.asm=u,t.usingWasm=!0,D--,t.monitorRunDependencies&&t.monitorRunDependencies(D),0==D&&(null!==L&&(clearInterval(L),L=null),z&&(e=z,z=null,e()))}function r(e){i(e.instance)}function o(e){n().then(function(e){return WebAssembly.instantiate(e,l)}).then(e).catch(function(e){t.printErr("failed to asynchronously prepare wasm: "+e),W(e)})}if("object"!=typeof WebAssembly)return t.printErr("no native wasm support detected"),!1;if(!(t.wasmMemory instanceof WebAssembly.Memory))return t.printErr("no native wasm Memory in use"),!1;if(e.memory=t.wasmMemory,l.global={NaN:NaN,Infinity:1/0},l["global.Math"]=Math,l.env=e,D++,t.monitorRunDependencies&&t.monitorRunDependencies(D),t.instantiateWasm)try{return t.instantiateWasm(l,i)}catch(e){return t.printErr("Module.instantiateWasm callback failed with error: "+e),!1}return t.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||B(s)||"function"!=typeof fetch?o(r):WebAssembly.instantiateStreaming(fetch(s,{credentials:"same-origin"}),l).then(r).catch(function(e){t.printErr("wasm streaming compile failed: "+e),t.printErr("falling back to ArrayBuffer instantiation"),o(r)}),{}}var r="blake2.wast",s="blake2.wasm?bdab5",c="blake2.temp.asm.js";"function"==typeof t.locateFile?(B(r)||(r=t.locateFile(r)),B(s)||(s=t.locateFile(s)),B(c)||(c=t.locateFile(c))):(B(r)||(r=t.scriptDirectory+r),B(s)||(s=t.scriptDirectory+s),B(c)||(c=t.scriptDirectory+c));var l={global:null,env:null,asm2wasm:{"f64-rem":function(e,t){return e%t},debugger:function(){}},parent:t},u=null;t.asmPreload=t.asm;var h=t.reallocBuffer;t.reallocBuffer=function(e){if("asmjs"===_)var n=h(e);else e:{var i=t.usingWasm?65536:16777216;if(0<e%i&&(e+=i-e%i),i=t.buffer.byteLength,t.usingWasm)try{n=-1!==t.wasmMemory.grow((e-i)/65536)?t.buffer=t.wasmMemory.buffer:null;break e}catch(e){n=null;break e}n=void 0}return n};var _="";t.asm=function(e,n){if(!n.table){void 0===(e=t.wasmTableSize)&&(e=1024);var r=t.wasmMaxTableSize;n.table="object"==typeof WebAssembly&&"function"==typeof WebAssembly.Table?void 0!==r?new WebAssembly.Table({initial:e,maximum:r,element:"anyfunc"}):new WebAssembly.Table({initial:e,element:"anyfunc"}):Array(e),t.wasmTable=n.table}return n.memoryBase||(n.memoryBase=t.STATIC_BASE),n.tableBase||(n.tableBase=0),(n=i(n))||W("no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods"),n}}(),m=2656,O.push(),t.STATIC_BASE=1024,t.STATIC_BUMP=1632,m+=16,E(!g),v=m,b=h((y=h(m=m+4+15&-16))+x),p[v>>2]=b,g=!0,t.wasmTableSize=2,t.wasmMaxTableSize=2,t.b={},t.c={abort:W,enlargeMemory:function(){A()},getTotalMemory:function(){return S},abortOnCannotGrowMemory:A,___setErrNo:function(e){return t.___errno_location&&(p[t.___errno_location()>>2]=e),e},_emscripten_memcpy_big:function(e,t,n){return _.set(_.subarray(t,t+n),e),e},DYNAMICTOP_PTR:v,STACKTOP:y};var U=t.asm(t.b,t.c,d);t.asm=U,t._blake2b_final=function(){return t.asm._blake2b_final.apply(null,arguments)},t._blake2b_init=function(){return t.asm._blake2b_init.apply(null,arguments)},t._blake2b_init_key=function(){return t.asm._blake2b_init_key.apply(null,arguments)},t._blake2b_update=function(){return t.asm._blake2b_update.apply(null,arguments)},t._blake2s_final=function(){return t.asm._blake2s_final.apply(null,arguments)},t._blake2s_init=function(){return t.asm._blake2s_init.apply(null,arguments)},t._blake2s_init_key=function(){return t.asm._blake2s_init_key.apply(null,arguments)},t._blake2s_update=function(){return t.asm._blake2s_update.apply(null,arguments)};var j=t._free=function(){return t.asm._free.apply(null,arguments)},q=t._malloc=function(){return t.asm._malloc.apply(null,arguments)};function F(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function H(){function e(){if(!t.calledRun&&(t.calledRun=!0,!w)){if(I||(I=!0,T(O)),T(C),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();R.unshift(e)}T(R)}}if(!(0<D)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)M();T(P),0<D||t.calledRun||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e())}}function W(e){throw t.onAbort&&t.onAbort(e),void 0!==e?(t.print(e),t.printErr(e),e=JSON.stringify(e)):e="",w=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(t.asm=U,t.then=function(e){if(t.calledRun)e(t);else{var n=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){n&&n(),e(t)}}return t},F.prototype=Error(),F.prototype.constructor=F,z=function e(){t.calledRun||H(),t.calledRun||(z=e)},t.run=H,t.exit=function(e,n){n&&t.noExitRuntime&&0===e||(!t.noExitRuntime&&(w=!0,y=void 0,T(N),t.onExit)&&t.onExit(e),c&&process.exit(e),t.quit(e,new F(e)))},t.abort=W,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return t.noExitRuntime=!0,H(),function(){function e(e){if(e&&e.buffer instanceof ArrayBuffer)e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else if("string"==typeof e){for(var t=e.length,n=new Uint8Array(t+1),i=0;i<t;++i)n[i]=e.charCodeAt(i);return n}return e}function n(t,i){var s=new Number(t);return s.length=i,s.get=function(e){return new(e=e||Uint8Array)(d,s,i/e.BYTES_PER_ELEMENT).slice()},s.dereference=function(e){return e=e||4,n(s.get(Uint32Array)[0],e)},s.set=function(t){if((t=e(t)).length>i)throw RangeError("invalid array length");_.set(t,s)},s.free=function(){j(s),r.splice(r.indexOf(s),1)},r.push(s),s}function i(t,i){i=e(i),0===t&&(t=i.length);var r=n(q(t),t);return void 0!==i?(r.set(i),i.length<t&&_.fill(0,r+i.length,r+t)):_.fill(0,r,r+t),r}var r=[];t.createPointer=n,t.allocatePointer=function(e){return e&&(e=Uint32Array.of(e)),i(4,e)},t.allocateBytes=i,t.freeBytes=function(){for(var e=0,t=r.length;e<t;++e)j(r[e]);r=[]}}(),e};function k(e){function t(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array(0);for(var t=[0],s=0;s<e.length;s++){var o=n[e[s]];if(void 0===o)return;for(var a=0;a<t.length;++a)o+=t[a]*i,t[a]=255&o,o>>=8;for(;0<o;)t.push(255&o),o>>=8}for(s=0;e[s]===r&&s<e.length-1;++s)t.push(0);return Uint8Array.from(t.reverse())}for(var n={},i=e.length,r=e.charAt(0),s=0;s<e.length;s++){var o=e.charAt(s);if(void 0!==n[o])throw new TypeError(o+" is ambiguous");n[o]=s}return{encode:function(t){if(0===t.length)return"";for(var n=[0],s=0;s<t.length;++s){for(var o=0,a=t[s];o<n.length;++o)a+=n[o]<<8,n[o]=a%i,a=a/i|0;for(;0<a;)n.push(a%i),a=a/i|0}for(s="",o=0;0===t[o]&&o<t.length-1;++o)s+=r;for(t=n.length-1;0<=t;--t)s+=e[n[t]];return s},decodeUnsafe:t,decode:function(e){if(e=t(e))return e;throw Error("Non-base"+i+" character")}}}__blake2_wasm=__blake2_wasm.bind({_currentScript:"undefined"!=typeof document?document.currentScript:void 0,_selfLocation:"undefined"!=typeof self?self.location:void 0}),"object"==typeof exports&&"object"==typeof module?module.exports=__blake2_wasm:"function"==typeof define&&define.amd?define("blake2.wasm/src/blake2",[],function(){return __blake2_wasm}):"object"==typeof exports&&(exports.__blake2_wasm=__blake2_wasm),function(){function e(e){var t;function n(i,r){return null==i&&(i=64),null==r&&(r=null),this instanceof n?(this._output_length=i,this._state=t(240),r&&r.length?(r=t(0,r),e._blake2b_init_key(this._state,i,r,r.length),r.free()):e._blake2b_init(this._state,i)):new n(i,r)}function i(n,r){return null==n&&(n=32),null==r&&(r=null),this instanceof i?(this._output_length=n,this._state=t(176),r&&r.length?(r=t(0,r),e._blake2s_init_key(this._state,n,r,r.length),r.free()):e._blake2s_init(this._state,n)):new i(n,r)}return e=e(),t=e.allocateBytes,e.freeBytes,n.prototype={update:function(n){return n=t(0,n),e._blake2b_update(this._state,n,n.length),n.free(),this},final:function(){var n,i;return n=t(this._output_length),e._blake2b_final(this._state,n,n.length),i=n.get(),n.free(),this._state.free(),i}},Object.defineProperty(n.prototype,"constructor",{value:n}),i.prototype={update:function(n){return n=t(0,n),e._blake2s_update(this._state,n,n.length),n.free(),this},final:function(){var n,i;return n=t(this._output_length),e._blake2s_final(this._state,n,n.length),i=n.get(),n.free(),this._state.free(),i}},Object.defineProperty(i.prototype,"constructor",{value:i}),{ready:e.then,Blake2b:n,Blake2s:i}}define("blake2.wasm/src/index.min",["./blake2"],e)}.call(this),define("blake2.wasm",["blake2.wasm/src/index.min"],function(e){return e}),function(){function e(e){var t;for(t=e.length-1;0<=t;--t){var n=t;if(++e[n],0!==e[n])break}}function t(t,o,a,c,l){function u(e){if(null==e&&(e=null),!(this instanceof u))return new u(e);null===e&&(e=n(48)),this.b=e,this.a=new Uint8Array(12)}function h(e,t){if(!(this instanceof h))return new h(e,t);e?(this.a=c.HandshakeState(i,c.constants.NOISE_ROLE_INITIATOR),this.a.Initialize(null,null,t)):(this.a=c.HandshakeState(i,c.constants.NOISE_ROLE_RESPONDER),this.a.Initialize(null,t))}return u.prototype={get_key:function(){return this.b},wrap:function(t){return e(this.a),a.encrypt(t,new Uint8Array(0),this.a,this.b,0)},unwrap:function(t){return e(this.a),a.decrypt(t,new Uint8Array(0),this.a,this.b,0)}},Object.defineProperty(u.prototype,"constructor",{value:u}),h.prototype={ready:function(){return!this.a},get_handshake_message:function(){var e=null;return this.a&&(this.a.GetAction()===c.constants.NOISE_ACTION_WRITE_MESSAGE&&(e=this.a.WriteMessage()),this.f()),e},put_handshake_message:function(e){this.a&&(this.a.GetAction()===c.constants.NOISE_ACTION_READ_MESSAGE&&this.a.ReadMessage(e),this.f())},f:function(){var e=this.a.GetAction();if(e===c.constants.NOISE_ACTION_SPLIT){e=this.a.Split(),this.c=e[0],this.b=e[1],e=new Uint8Array(0);var t=new Uint8Array(32);this.h=this.c.EncryptWithAd(e,t),this.g=this.b.EncryptWithAd(e,t),delete this.a}else if(e===c.constants.NOISE_ACTION_FAILED)throw delete this.a,Error("Noise handshake failed")},get_rewrapper_keys:function(){return[this.h,this.g]},encrypt:function(e){return this.c.EncryptWithAd(new Uint8Array(0),e)},decrypt:function(e){return this.b.DecryptWithAd(new Uint8Array(0),e)},destroy:function(){this.a&&this.a.free(),this.c&&this.c.free(),this.b&&this.b.free()}},Object.defineProperty(h.prototype,"constructor",{value:h}),{ready:function(e){a.ready(function(){l.ready(function(){o.ready(function(){c.ready(function(){t.ready(function(){e()})})})})})},create_keypair:function(e){null==e&&(e=null),e||(e=t.createSeed());var n=t.createKeyPair(e);return{seed:e,ed25519:{public:n.publicKey,private:n.secretKey},x25519:{public:o.convert_public_key(n.publicKey),private:o.convert_private_key(e)}}},convert_public_key:function(e){return o.convert_public_key(e)},sign:function(e,n,i){return t.sign(e,n,i)},verify:function(e,n,i){return t.verify(e,n,i)},Rewrapper:u,Encryptor:h,one_way_encrypt:function(e,t){var n=c.HandshakeState(r,c.constants.NOISE_ROLE_INITIATOR);n.Initialize(null,null,e),e=n.WriteMessage();var i=n.Split();return n=i[0],i=i[1],t=n.EncryptWithAd(new Uint8Array(0),t),n.free(),i.free(),(n=new Uint8Array(s+t.length)).set(e),n.set(t,s),n},one_way_decrypt:function(e,t){var n=t.subarray(0,s);t=t.subarray(s);var i=c.HandshakeState(r,c.constants.NOISE_ROLE_RESPONDER);return i.Initialize(null,e),i.ReadMessage(n),e=(n=i.Split())[0],t=(n=n[1]).DecryptWithAd(new Uint8Array(0),t),e.free(),n.free(),t},blake2b_256:function(e){return l.Blake2b(32).update(e).final()}}}var n;n="object"==typeof exports?require("crypto").randomBytes:function(e){return e=new Uint8Array(e),crypto.getRandomValues(e),e};var i="Noise_NK_25519_ChaChaPoly_BLAKE2b",r="Noise_N_25519_ChaChaPoly_BLAKE2b",s=48;define("@detox/crypto",["supercop.wasm","ed25519-to-x25519.wasm","aez.wasm","noise-c.wasm","blake2.wasm"],t)}.call(this),define("@detox/base-x",[],function(){return k}),function(){function e(e){var t;return(t=o.get(e))&&c.has(t)?t:(t=e.join(","),a.has(t)?(t=a.get(t),o.set(e,t),t):e)}function t(e){var t,n=e.join(",");(t=c.get(e))?(++t,c.set(e,t)):(o.set(e,e),a.set(n,e),c.set(e,1))}function n(e){var t=e.join(","),n=c.get(e);--n?c.set(e,n):(a.delete(t),c.delete(e))}function i(i){var r,s,o=r=new Map;if(o.get=function(t){return t=e(t),Map.prototype.get.call(this,t)},o.has=function(t){return t=e(t),Map.prototype.has.call(this,t)},o.set=function(n,i){return n=e(n),Map.prototype.has.call(this,n)||t(n),Map.prototype.set.call(this,n,i)},o.delete=function(t){return t=e(t),Map.prototype.has.call(this,t)&&n(t),Map.prototype.delete.call(this,t)},o.clear=function(){var e=this;this.forEach(function(t,n){e.delete(n)})},i)for(o=0,s=i.length;o<s;++o){var a=i[o],c=a[0];a=a[1],r.set(c,a)}return r}function r(i){var r,s,o=r=new Set;if(o.has=function(t){return t=e(t),Set.prototype.has.call(this,t)},o.add=function(n){return n=e(n),Set.prototype.has.call(this,n)||t(n),Set.prototype.add.call(this,n)},o.delete=function(t){return t=e(t),Set.prototype.has.call(this,t)&&n(t),Set.prototype.delete.call(this,t)},o.clear=function(){var e=this;this.forEach(function(t,n){e.delete(n)})},i)for(o=0,s=i.length;o<s;++o){var a=i[o];r.add(a)}return r}function s(){return{ArrayMap:i,ArraySet:r}}var o=new WeakMap,a=new Map,c=new Map;define("array-map-set",s)}.call(this),function(){function e(t,n){var r,s=0,o=n-t,a=Math.ceil(Math.log2(o)),c=Math.ceil(a/8);a=Math.pow(2,a)-1;var l=i(c),u=8*(c-1);for(r=0;r<c;++r){s+=l[r]*Math.pow(2,u),u-=8}return(s=2147483648*(~~(s/2147483648)&~~(a/2147483648))+(2147483647&s&a&2147483647))>=o?e(t,n):t+s}function t(){return e(0,Number.MAX_SAFE_INTEGER)/(Number.MAX_SAFE_INTEGER+1)}function n(){return{random_bytes:i,random_int:e,random:t}}var i;i="undefined"!=typeof crypto?function(e){return e=new Uint8Array(e),crypto.getRandomValues(e),e}:require("crypto").randomBytes,define("random-bytes-numbers",n)}.call(this),function(){function e(e){var t,n="",i=0;for(t=e.length;i<t;++i){n+=e[i].toString(16).padStart(2,"0")}return n}function t(e){var t,n=new Uint8Array(e.length/2),i=0;for(t=n.length;i<t;++i){var r=i;n[r]=parseInt(e.substring(2*r,2*r+2),16)}return n}function n(e,t){var n;if(e===t)return!0;if(e.length!==t.length)return!1;var i=0;for(n=e.length;i<n;++i){var r=i;if(e[i]!==t[r])return!1}return!0}function i(e){var t;if(1<arguments.length)return i(Array.from(arguments));var n=e.reduce(function(e,t){return e+t.length},0),r=0;n=new Uint8Array(n);var s=0;for(t=e.length;s<t;++s){var o=e[s];n.set(o,r),r+=o.length}return n}function r(e,t){return setTimeout(t,1e3*e)}function s(e,t){return setInterval(t,1e3*e)}function o(e){if(e instanceof Error)return console.error(e)}function a(a,u,h){var d=h.random_bytes,_=h.random_int,f=h.random;return a=a("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),{random_bytes:d,random_int:_,sample:function(e){return-Math.log(f())*e},pull_random_item_from_array:function(e){var t=e.length;return 1===t?e.pop():(t=_(0,t-1),e.splice(t,1)[0])},array2hex:e,hex2array:t,string2array:c,array2string:l,are_arrays_equal:n,concat_arrays:i,timeoutSet:r,intervalSet:s,error_handler:o,ArrayMap:u.ArrayMap,ArraySet:u.ArraySet,base58_encode:a.encode,base58_decode:a.decode}}if("undefined"!=typeof Buffer)var c=function(e){return Buffer.from(e)},l=function(e){return Buffer.from(e).toString()};else(function(e,t){c=function(t){return e.encode(t)},l=function(e){return t.decode(e)}}).call(this,new TextEncoder,new TextDecoder);define("@detox/utils",["@detox/base-x","array-map-set","random-bytes-numbers"],a)}.call(this),function(){function e(){if(!(this instanceof e))return new e;t.set(this,{})}var t=new WeakMap,n=new WeakMap;e.prototype={on:function(e,n){var i;return e&&n&&((i=t.get(this))[e]||(i[e]=[])).push(n),this},off:function(e,i){var r;return(r=t.get(this)[e])&&(i?(e=n.get(i)||i,-1!==(e=r.indexOf(e))&&r.splice(e,1)):delete t.get(this)[e]),this},once:function(e,t){var i=this;if(e&&t){var r=function(){if(!r.a)return r.a=!0,i.off(e,r),t.apply(null,arguments)};n.set(t,r),this.on(e,r)}return this},fire:function(e,n){var i=Promise.resolve(),r=arguments;return(t.get(this)[e]||[]).forEach(function(e){i=i.then(function(){var t=e.call.apply(e,r);return!1===t?Promise.reject():t})}),i.catch(function(e){e instanceof Error&&console.error(e)}),i}},define("async-eventer",[],function(){return e})}.call(this),function(){function e(e){function t(e,i){if(!(this instanceof t))return new t(e,i);this.m=e,this.j=i,this.b=n(),this.f=this.g()}var n=e.ArrayMap,i=e.ArraySet;return t.prototype={set:function(e,t,n){var i;null==t&&(t=null),null==n&&(n=null);var r=this.f;for(i=0;null===r.a;)r=this.c(i,e,r),i++;return this.b.has(e)?(r.a.delete(e),r.a.add(e),this.b.set(e,t),!0):r.a.size<this.j?(r.a.add(e),this.b.set(e,t),!0):r.i?(this.o(i,r),this.set(e,t,n)):("function"==typeof n&&n(Array.from(r.a)),!1)},get_all:function(){return this.h(this.f)},h:function(e){return e.a?Array.from(e.a):this.h(e.left).concat(this.h(e.right))},get_data:function(e){return this.b.get(e)||null},has:function(e){return this.b.has(e)},count:function(){return this.b.size},del:function(e){var t;if(this.b.has(e)){var n=this.f;for(t=0;null===n.a;)n=this.c(t,e,n),t++;n.a.delete(e),this.b.delete(e)}},closest:function(e,t){var n,i=this;if(null==t&&(t=1/0),this.b.size<=t)var r=Array.from(this.b.keys());else{r=[];var s=[this.f];for(n=0;0<s.length&&r.length<t;){var o=s.pop();if(null===o.a){var a=this.c(n,e,o);n++,a===o.left?s.push(o.right,o.left):s.push(o.left,o.right)}else r=r.concat(Array.from(o.a))}}return r.map(function(t){return[i.l(t,e),t]}).sort(function(e,t){return e[0]-t[0]}).slice(0,t).map(function(e){return e[1]})},g:function(){return{a:i(),i:!0,left:null,right:null}},l:function(e,t){var n,i,r=n=0;for(i=e.length;r<i;++r){var s=r;n=256*n+(e[s]^t[s])}return n},c:function(e,t,n){return t[~~(e/8)]&Math.pow(2,7-e%8)?n.right:n.left},o:function(e,t){var n=this;t.left=this.g(),t.right=this.g(),t.a.forEach(function(i){n.c(e,i,t).a.add(i)}),t.a=null,this.c(e,this.m,t)===t.left?t.right.i=!1:t.left.i=!1}},Object.defineProperty(t.prototype,"constructor",{value:t}),t}define("k-bucket-sync",["array-map-set"],e)}.call(this),function(){function e(e,t){var n=e.length,i=new Uint8Array(2*n);return i.set(e),i.set(t,n),i}function t(e,t){var n;if(e===t)return!0;if(e.length!==t.length)return!1;var i=0;for(n=e.length;i<n;++i){var r=i;if(e[i]!==t[r])return!1}return!0}function n(t,i){var r;if(1===t.length)return t[0];var s=[],o=0;for(r=t.length;o<r;o+=2){var a=o,c=t[o];a=t[a+1]||c,s.push(i(e(c,a)))}return n(s,i)}function i(n,r,s,o){var a;if(null==o&&(o=[]),1===n.length)return Uint8Array.from(o);var c=[],l=0;for(a=n.length;l<a;l+=2){var u=l,h=n[l],d=s(e(h,u=n[u+1]||h));c.push(d),t(h,r)?(o=o.concat(0,Array.from(u)),r=d):t(u,r)&&(o=o.concat(1,Array.from(h)),r=d)}return i(c,r,s,o)}function r(n,i,r,s){var o;if(t(n,r)&&0===i.length)return!0;var a=r.length;if(i.length%(a+1))return!1;a+=1;var c=0;for(o=i.length;0>a?c>o:c<o;c+=a){var l=c,u=i.subarray(l+1,l+a);r=i[l]?s(e(u,r)):s(e(r,u))}return t(n,r)}function s(){return{get_root:n,get_proof:i,check_proof:r}}define("merkle-tree-binary",s)}.call(this),function(){function e(e,t){var n;if(e===t)return!0;if(e.length!==t.length)return!1;var i=0;for(n=e.length;i<n;++i){var r=i;if(e[i]!==t[r])return!1}return!0}function t(e,t){var n=e.length,i=new Uint8Array(2*n);return i.set(e),i.set(t,n),i}function n(n,i,r){function s(e){if(!(this instanceof s))return new s(e);this.b=e,this.a=a()}function o(e,t,n,r,c){if(null==c&&(c=.2),!(this instanceof o))return new o(e,t,n,r,c);this.a=e,this.l=e.length,this.f=t,this.s=n,this.u=c,this.o=s(r),this.g=[],this.b=i(this.a,n),this.h=a(),this.i(new Map)}var a=n.ArrayMap,c=n.ArraySet;return s.prototype={add:function(e,t){!this.a.has(e)&&(this.a.set(e,t),this.a.size>this.b)&&this.a.delete(this.a.keys().next().value)},get:function(e){return this.a.get(e)}},Object.defineProperty(s.prototype,"constructor",{value:s}),o.prototype={start_lookup:function(e,t){var n,r;if(null==t&&(t=this.s),this.b.has(e))return[];var s=i(e,t),o=a(),l=this.c()[1],u=c();if(l.forEach(function(e,t){var n;e=e[1],u.add(t),s.set(t);var i=0;for(n=e.length;i<n;++i){var r=e[i];!o.has(r)&&s.set(r)&&o.set(r,t)}}),s.has(e))var h=o.get(e),d=l.get(h)[0],_=[[e,h,d]];else for(s.del(this.a),n=Math.max(this.u,1/this.b.count());;){var f=s.closest(e,t);h=f.length;var p=Math.ceil(h*n);_=[];var m=a(),g=!1,y=0;for(r=f.length;y<r;++y){var b=f[y];(h=o.get(b))?(d=m.get(h)||0,m.set(h,d+1),d>p?(s.del(b),g=!0):(d=l.get(h)[0],_.push([b,h,d]))):(d=m.get(b)||0,m.set(b,d+1),d>p&&(s.del(b),g=!0))}if(!g)break}return this.h.set(e,[s,t,u]),_},update_lookup:function(e,t,n,i){var r,s=this.h.get(e);if(!s)return[];var o=s[0],a=s[1];if(s=s[2],!i)return o.del(t),[];if(s.add(t),this.b.has(e)||o.has(e))return[];s=c();var l=0;for(r=i.length;l<r;++l){var u=i[l];!o.has(u)&&o.set(u)&&s.add(u)}if(o.has(e))return[[e,t,n]];for(o.del(this.a),i=[],l=0,r=(e=o.closest(e,a)).length;l<r;++l)o=e[l],s.has(o)&&i.push([o,t,n]);return i},finish_lookup:function(e){var t=this.h.get(e);if(this.h.delete(e),!t)return null;var n=t[0],i=t[1];return t=t[2],this.b.has(e)||t.has(e)?[e]:n.closest(e,i)},set_peer:function(n,i,r,s){if(e(this.a,n))return!1;var o=2*s.length+2,a=this.l+1,c=Math.log2(o),l=r.length/a;if(l!==c){if(l!==Math.ceil(c))return!1;for(c=n,l=0,o=Math.ceil(Math.pow(Math.log2(o),2)-o)/2;l<=o;++l){var u=l;if(0!==r[u*a]||!e(r.subarray(u*a+1,(u+1)*a),c))return!1;c=this.f(t(c,c))}}return!(!(r=this.check_state_proof(i,r,n))||!e(r,n))&&(!this.b.set(n)||((r=this.j()).set(n,[i,s]),this.i(r),!0))},has_peer:function(e){return this.b.has(e)},del_peer:function(e){var t=this.j();t.has(e)&&(this.b.del(e),t.delete(e),this.i(t))},get_state:function(e){null==e&&(e=null);var t=this.c(e);return t?(e=t[0],t=t[1],[e,this.get_state_proof(e,this.a),Array.from(t.keys())]):null},commit_state:function(){var e=this.g;this.o.add(e[0],e[1])},c:function(t){var n;return null==t&&(t=null),!t||e(t,this.g[0])?this.g:(n=this.o.get(t))?[t,n]:null},j:function(e){var t;return null==e&&(e=null),(e=null!=(t=this.c(e))?t[1]:void 0)?a(Array.from(e)):null},get_state_proof:function(t,n){var i;return(t=null!=(i=this.c(t))?i[1]:void 0)&&(t.has(n)||e(n,this.a))?(i=this.m(t),r.get_proof(i,n,this.f)):new Uint8Array(0)},m:function(e){var t=[];return e.forEach(function(e,n){t.push(n,e[0])}),t.push(this.a,this.a),t},check_state_proof:function(e,t,n){return 0===t[0]&&r.check_proof(e,t,n,this.f)?t.subarray(1,this.l+1):null},i:function(e){var t=this.m(e);this.g=[r.get_root(t,this.f),e]}},Object.defineProperty(o.prototype,"constructor",{value:o}),o}define("es-dht",["array-map-set","k-bucket-sync","merkle-tree-binary"],n)}.call(this),function(){function e(e,t){var n=new Uint8Array(2*i);return n.set(t,i),n.set(e),n}function t(e,t){var n;return(n=new Uint8Array(2+t.length)).set(t,2),new DataView(n.buffer).setUint16(0,e,!1),n}function n(n,d,_,f){function p(e){var t,n=e.subarray(0,i),r=(e[i]||0)*(i+1),s=e.subarray(i+1,i+1+r);if(s.length!=s.length&&(s=T),(e=e.subarray(i+1+r)).length%i)e=[];else{r=[];var o=0;for(t=e.length/i;o<t;++o){var a=o;r.push(e.subarray(i*a,i*(a+1)))}e=r}return[n,s,e]}function m(e){if(!(this instanceof m))return new m(e);this.f=e,this.a=x()}function g(e,t,n,i,r,s){var o=this;if(null==r&&(r=.2),null==s&&(s={}),!(this instanceof g))return new g(e,t,n,i,r,s);_.call(this),this.c=Object.assign({},u,s),this.b=f(e,y,t,n,r),this.s=t,this.l=d.random_int(0,Math.pow(2,16)-1),this.m=new Map,this.j=new Set,this.o=m(i),this.f=x(),this.G=A(this.c.STATE_UPDATE_INTERVAL,function(){var e,t,n=0;for(t=(e=o.b.get_state()[2]).length;n<t;++n){var i=e[n];o.B(i)}})}var y=n.blake2b_256,b=n.sign,v=n.verify,w=d.are_arrays_equal,E=d.concat_arrays,k=d.timeoutSet,A=d.intervalSet,x=d.ArrayMap,S=d.error_handler,T=new Uint8Array(0);return m.prototype={add:function(e,t){this.a.has(e)&&this.a.delete(e),this.a.set(e,t),this.a.size>this.f&&this.a.delete(this.a.keys().next().value)},get:function(e){var t;return(t=this.a.get(e))&&(this.a.delete(e),this.a.set(e,t)),t}},Object.defineProperty(m.prototype,"constructor",{value:m}),g.prototype={receive:function(e,t,n){if(!this.a){var r=[new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,!1),n.subarray(2)];switch(n=r[0],r=r[1],t){case s:(n=this.m.get(n))&&n(e,r);break;case o:r.length||(r=null,this.b.commit_state()),(t=this.F(r))&&this.u(e,n,t);break;case a:t=(r=[r.subarray(0,i),r.subarray(i)])[0],r=r[1],this.u(e,n,this.b.get_state_proof(t,r));break;case c:t=this.o.get(r),this.u(e,n,t||T);break;case l:t=(r=[r.subarray(0,i),r.subarray(i)])[0],n=r[1],this.verify_value(t,n)?this.o.add(t,n):this.h(e)}}},lookup:function(e,t){var n,i=this;return null==t&&(t=this.s),this.a?Promise.reject():(n=this.f.get(e))?n:((n=this.w(e,this.b.start_lookup(e,t))).catch(S),this.f.set(e,n),n.then(function(){i.f.delete(e)}).catch(function(){i.f.delete(e)}),n)},w:function(t,n){var i=this;return this.a?Promise.reject():new Promise(function(r,s){function c(){--d||i.w(t,h).then(r).catch(s)}function l(n){var i=this,r=n[0],s=n[1],l=n[2];this.g(s,a,e(l,r),this.c.GET_PROOF_REQUEST_TIMEOUT).then(function(e){var n;if(n=i.b.check_state_proof(l,e,r))return i.C(r,s).then(function(){return i.g(r,o,n,i.c.GET_STATE_REQUEST_TIMEOUT).then(p).then(function(e){var s=e[0],o=e[1];e=e[2],o=i.b.check_state_proof(s,o,r),w(n,s)&&o&&w(o,r)?h=h.concat(i.b.update_lookup(t,r,n,e)):i.h(r),c()}).catch(function(e){S(e),i.i(r),c()})});i.h(s),c()}).catch(function(e){S(e),i.i(s),c()})}var u;if(n.length){var h=[],d=n.length,_=0;for(u=n.length;_<u;++_)l.call(i,n[_])}else(_=i.b.finish_lookup(t))?r(_):s()})},h:function(e){this.fire("peer_error",e),this.del_peer(e)},i:function(e){this.fire("peer_warning",e)},C:function(e,t){return this.fire("connect_to",e,t)},F:function(e){if(null==e&&(e=null),this.a)return T;var t=this.b.get_state(e);e=t[0];var n=t[1];t=t[2];var r=n.length/(i+1);t=E(t);var s=new Uint8Array(i+1+n.length+t.length);return s.set(e),s.set([r],i),s.set(n,i+1),s.set(t,i+1+n.length),s},get_peers:function(){return this.a?[]:this.b.get_state()[2]},add_peer:function(e){this.a||this.b.has_peer(e)||this.B(e)},del_peer:function(e){this.a||this.b.del_peer(e)},get_value:function(e,t){var n,i=this;return null==t&&(t=this.s),this.a?Promise.reject():(n=this.o.get(e))&&w(y(n),e)?Promise.resolve(n):((t=this.lookup(e,t).then(function(t){return new Promise(function(r,s){function o(){d||(--h||(_?r(_[1]):s()))}function a(t){d||(t.length?w(y(t),e)?(d=!0,r(t)):((t=i.v(e,t))?(!_||_[0]<t[0])&&(_=t):i.h(p),o()):o())}function l(e){S(e),i.i(p),o()}var u,h=t.length,d=!1,_=n?i.v(e,n):null;t.length||(_?r(_[1]):s());var f=0;for(u=t.length;f<u;++f){var p=t[f];i.g(p,c,e,i.c.GET_VALUE_TIMEOUT).then(a).catch(l)}})})).catch(S),t)},v:function(e,t){if(t.length<r+5)return null;var n=t.subarray(0,t.length-r);return v(t.subarray(t.length-r),n,e)?[new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,!1),n.subarray(4)]:null},make_immutable_value:function(e){return e.length>h?null:[y(e),e]},make_mutable_value:function(e,t,n,i){var r;return i.length>h?null:((r=new Uint8Array(4+i.length)).set(i,4),new DataView(r.buffer).setUint32(0,n,!1),t=b(r,e,t),[e,r=E([r,t])])},verify_value:function(e,t){return w(y(t),e)&&t.length<=h?t:(e=this.v(e,t))&&e[1].length<=h?e[1]:null},put_value:function(e,t,n){var r=this;return null==n&&(n=this.s),this.a||!this.verify_value(e,t)?Promise.reject():(this.o.add(e,t),this.lookup(e,n).then(function(n){var s,o=[];if(n.length){var a=new Uint8Array(i+t.length);a.set(e),a.set(t,i);var c=0;for(s=n.length;c<s;++c){var u=n[c];o.push(r.g(u,l,a,r.c.PUT_VALUE_TIMEOUT))}return o}}))},destroy:function(){if(!this.a)return this.a=!0,this.j.forEach(clearTimeout),clearInterval(this.G)},g:function(e,n,i,r){var s=this,o=new Promise(function(o,a){var c=s.D();s.m.set(c,function(e,t){w(e,e)&&(clearTimeout(l),s.j.delete(l),s.m.delete(c),o(t))});var l=k(r,function(){s.m.delete(c),s.j.delete(l),a()});s.j.add(l),s.A(e,n,t(c,i))});return o.catch(S),o},u:function(e,n,i){this.A(e,s,t(n,i))},D:function(){var e=this.l;return this.l++,this.l===Math.pow(2,16)&&(this.l=0),e},A:function(e,t,n){this.fire("send",e,t,n)},B:function(e){var t=this;this.g(e,o,T,this.c.GET_STATE_REQUEST_TIMEOUT).then(function(n){var i=p(n);n=i[0];var r=i[1];i=i[2],t.b.set_peer(e,n,r,i)?t.fire("peer_updated",e,i):t.h(e)}).catch(function(n){S(n),t.i(e)})}},g.prototype=Object.assign(Object.create(_.prototype),g.prototype),Object.defineProperty(g.prototype,"constructor",{value:g}),{ready:n.ready,DHT:g,MAX_VALUE_LENGTH:h}}var i=32,r=64,s=0,o=1,a=2,c=3,l=4,u={GET_PROOF_REQUEST_TIMEOUT:5,GET_STATE_REQUEST_TIMEOUT:10,GET_VALUE_TIMEOUT:5,PUT_VALUE_TIMEOUT:5,STATE_UPDATE_INTERVAL:15},h=1024;define("@detox/dht",["@detox/crypto","@detox/utils","async-eventer","es-dht"],n)}.call(this),function(){function e(e,n){function i(e,s,o){var u=this;if(null==s&&(s=1e3),null==o&&(o=t),!(this instanceof i))return new i(e,s,o);for(n.call(this),this.j=s,this.i=o,this.g=c(),s=0,o=e.length;s<o;++s){var h=e[s],d=r(h.split(":")[0]);this.g.set(d,h)}this.h=c(),this.f=l(),this.b=l(),this.c=c(),this.a=c(),this.o=a(this.i,function(){var e=+new Date-2e3*u.i;u.a.forEach(function(t,n){t<e&&u.a.delete(n)})})}var r=e.hex2array,s=e.pull_random_item_from_array,o=e.are_arrays_equal,a=e.intervalSet,c=e.ArrayMap,l=e.ArraySet;return i.prototype={add_bootstrap_node:function(e,t){if(this.h.has(e))this.fire("peer_warning",e);else{var n=r(t.split(":")[0]);this.g.set(n,t),this.h.set(e,n)}},get_bootstrap_nodes:function(){return Array.from(this.g.values())},get_candidates_for_disconnection:function(e){var t=this,n=l(e),i=[];return this.b.forEach(function(e){n.has(e)||t.f.has(e)||t.c.has(e)||i.push(e)}),i},add_connected_node:function(e){this.b.add(e),this.a.delete(e),this.fire("connected_nodes_count",this.b.size),this.fire("aware_of_nodes_count",this.a.size)},get_random_connected_nodes:function(e){return this.l(e)},l:function(e,t){var n=[];if(null==e&&(e=1),null==t&&(t=[]),!this.b.size)return null;var i=Array.from(this.b.values()),r=l(t.concat(Array.from(this.h.keys())));if(!(i=i.filter(function(e){return!r.has(e)})).length)return null;for(t=0;t<e&&i.length;++t)n.push(s(i));return n},has_connected_node:function(e){return this.b.has(e)},del_connected_node:function(e){this.b.delete(e),this.c.delete(e),this.fire("connected_nodes_count",this.b.size)},set_peer:function(e,t){this.c.set(e,l(t))},set_aware_of_nodes:function(e,t){var n,i=this.c.get(e),r=0;for(n=t.length;r<n;++r){var o=t[r];if(i&&i.has(o))return void this.fire("peer_warning",e)}for(e=this.m(),r=0,n=t.length;r<n;++r)if(o=t[r],!this.b.has(o))if(this.a.has(o)||this.a.size<this.j)this.a.set(o,+new Date);else{if(!e.length)break;i=s(e),this.a.delete(i),this.a.set(o,+new Date)}this.fire("aware_of_nodes_count",this.a.size)},get_aware_of_nodes:function(e){var t,n,i=this,r=[],a=Array.from(this.a.keys());for(t=0;10>t&&a.length;++t)(n=s(a))&&r.push(n);if(10>r.length){var c=l();for(this.c.forEach(function(t,n){o(e,n)||t.forEach(function(e){i.c.has(e)||c.add(e)})}),c=Array.from(c),t=0,a=Math.min(5,10-r.length);t<a&&c.length;++t)(n=s(c))&&r.push(n)}return r},more_aware_of_nodes_needed:function(){return!!(this.a.size<this.j||this.m(!0).length)},m:function(e){null==e&&(e=!1);var t=[],n=+new Date-1e3*this.i,i=!1;return this.a.forEach(function(r,s){!i&&r<n&&(t.push(s),e&&!i&&(i=!0))}),t},get_nodes_for_routing_path:function(e,t){var n;null==t&&(t=[]),t=Array.from(this.f.values()).concat(t);var i=null!=(n=this.l(1,t))?n[0]:void 0;return i&&(e=this.u(e-1,t.concat([i])))?(this.f.add(i),[i].concat(e)):null},u:function(e,t){var n=[];if(this.a.size<e)return null;var i=Array.from(this.a.keys());if(t){var r=l(t);i=i.filter(function(e){return!r.has(e)})}if(i.length<e)return null;for(t=0;t<e;++t)n.push(s(i));return n},del_first_node_in_routing_path:function(e){this.f.delete(e)},destroy:function(){this.s||(this.s=!0,clearInterval(this.o))}},i.prototype=Object.assign(Object.create(n.prototype),i.prototype),Object.defineProperty(i.prototype,"constructor",{value:i}),i}var t=300;define("@detox/nodes-manager",["@detox/utils","async-eventer"],e)}.call(this),function(){function e(e){var t,n=0,i=1;for(t=e.length-1;0<=t;--t){n+=e[t]*i,i*=Math.pow(2,8)}return n}function t(e,t,n){for(e.j=t,e.f=n,e.b=1;t>=Math.pow(2,8);)++e.b,t/=Math.pow(2,8);e.a=new Uint8Array(0)}function n(){function n(e,i){if(!(this instanceof n))return new n(e,i);t(this,e,i),this.c=!0}function i(e,n){if(!(this instanceof i))return new i(e,n);t(this,e,n),this.c=[]}return n.prototype={feed:function(e){var t,n=t=new Uint8Array(this.a.length+this.b+e.length);n.set(this.a),n.set(function(e,t){var n=new Uint8Array(t);for(--t;0<=t;--t){var i=t,r=e%Math.pow(2,8);e=(e-r)/Math.pow(2,8),n.set([r],i)}return n}(e.length,this.b),this.a.length),n.set(e,this.b+this.a.length),this.a=t,this.c=!1},have_more_blocks:function(){return!this.c},get_block:function(){var e,t=new Uint8Array(this.f);if(this.have_more_blocks()){if(this.f>this.a.length){var n=Math.ceil((this.f-this.a.length)/this.b);(n=e=new Uint8Array(this.a.length+n*this.b)).set(this.a),this.a=e,this.c=!0}t.set(this.a.subarray(0,this.f)),this.a=this.a.subarray(this.f)}return t}},Object.defineProperty(n.prototype,"constructor",{value:n}),i.prototype={feed:function(e){this.have_more_data()?this.c.push(e):this.g(e)},g:function(e){var t,n=t=new Uint8Array(this.a.length+e.length);n.set(this.a),n.set(e,this.a.length),this.a=t},have_more_data:function(){return this.i(),this.h()},h:function(){for(var t;;){if(this.a.length<=this.b)return!1;if(t=e(this.a.subarray(0,this.b)))break;this.a=this.a.subarray(this.b)}return this.a.length>=this.b+t},get_data:function(){if(!this.have_more_data())return null;var t=e(this.a.subarray(0,this.b)),n=this.a.subarray(this.b,this.b+t);return this.a=this.a.subarray(this.b+t),n},i:function(){for(;!this.h()&&this.c.length;)e(this.a.subarray(0,this.b))||(this.a=new Uint8Array(0)),this.g(this.c.shift())}},Object.defineProperty(i.prototype,"constructor",{value:i}),{Multiplexer:n,Demultiplexer:i}}define("fixed-size-multiplexer",n)}.call(this),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():define("pako",[],e)}(function(){return function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){return r(t[o][1][e]||e)},u,u.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.options=o.assign({level:d,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==h)throw new Error(c[n]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=s.deflateSetDictionary(this.strm,r))!==h)throw new Error(c[n]);this._dict_set=!0}}function r(e,t){var n=new i(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}var s=e("./zlib/deflate"),o=e("./utils/common"),a=e("./utils/strings"),c=e("./zlib/messages"),l=e("./zlib/zstream"),u=Object.prototype.toString,h=0,d=-1,_=0,f=8;i.prototype.push=function(e,t){var n,i,r=this.strm,c=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:!0===t?4:0,"string"==typeof e?r.input=a.string2buf(e):"[object ArrayBuffer]"===u.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new o.Buf8(c),r.next_out=0,r.avail_out=c),1!==(n=s.deflate(r,i))&&n!==h)return this.onEnd(n),this.ended=!0,!1;0!==r.avail_out&&(0!==r.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(a.buf2binstring(o.shrinkBuf(r.output,r.next_out))):this.onData(o.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&1!==n);return 4===i?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===h):2!==i||(this.onEnd(h),r.avail_out=0,!0)},i.prototype.onData=function(e){this.chunks.push(e)},i.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=i,n.deflate=r,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,r(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,r(e,t)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=s.inflateInit2(this.strm,t.windowBits);if(n!==c.Z_OK)throw new Error(l[n]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function r(e,t){var n=new i(t);if(n.push(e,!0),n.err)throw n.msg||l[n.err];return n.result}var s=e("./zlib/inflate"),o=e("./utils/common"),a=e("./utils/strings"),c=e("./zlib/constants"),l=e("./zlib/messages"),u=e("./zlib/zstream"),h=e("./zlib/gzheader"),d=Object.prototype.toString;i.prototype.push=function(e,t){var n,i,r,l,u,h,_=this.strm,f=this.options.chunkSize,p=this.options.dictionary,m=!1;if(this.ended)return!1;i=t===~~t?t:!0===t?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof e?_.input=a.binstring2buf(e):"[object ArrayBuffer]"===d.call(e)?_.input=new Uint8Array(e):_.input=e,_.next_in=0,_.avail_in=_.input.length;do{if(0===_.avail_out&&(_.output=new o.Buf8(f),_.next_out=0,_.avail_out=f),(n=s.inflate(_,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&p&&(h="string"==typeof p?a.string2buf(p):"[object ArrayBuffer]"===d.call(p)?new Uint8Array(p):p,n=s.inflateSetDictionary(this.strm,h)),n===c.Z_BUF_ERROR&&!0===m&&(n=c.Z_OK,m=!1),n!==c.Z_STREAM_END&&n!==c.Z_OK)return this.onEnd(n),this.ended=!0,!1;_.next_out&&(0!==_.avail_out&&n!==c.Z_STREAM_END&&(0!==_.avail_in||i!==c.Z_FINISH&&i!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(r=a.utf8border(_.output,_.next_out),l=_.next_out-r,u=a.buf2string(_.output,r),_.next_out=l,_.avail_out=f-l,l&&o.arraySet(_.output,_.output,r,l,0),this.onData(u)):this.onData(o.shrinkBuf(_.output,_.next_out)))),0===_.avail_in&&0===_.avail_out&&(m=!0)}while((_.avail_in>0||0===_.avail_out)&&n!==c.Z_STREAM_END);return n===c.Z_STREAM_END&&(i=c.Z_FINISH),i===c.Z_FINISH?(n=s.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c.Z_OK):i!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),_.avail_out=0,!0)},i.prototype.onData=function(e){this.chunks.push(e)},i.prototype.onEnd=function(e){e===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=i,n.inflate=r,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,r(e,t)},n.ungzip=r},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(e,t,n){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var s={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var s=0;s<i;s++)e[r+s]=t[n+s]},flattenChunks:function(e){var t,n,i,r,s,o;for(i=0,t=0,n=e.length;t<n;t++)i+=e[t].length;for(o=new Uint8Array(i),r=0,t=0,n=e.length;t<n;t++)s=e[t],o.set(s,r),r+=s.length;return o}},o={arraySet:function(e,t,n,i,r){for(var s=0;s<i;s++)e[r+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,s)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],4:[function(e,t,n){"use strict";function i(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&s))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}var r=e("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new r.Buf8(256),c=0;c<256;c++)a[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;a[254]=a[254]=1,n.string2buf=function(e){var t,n,i,s,o,a=e.length,c=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(c),o=0,s=0;o<c;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},n.buf2binstring=function(e){return i(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,s,o,c=t||e.length,l=new Array(2*c);for(r=0,n=0;n<c;)if((s=e[n++])<128)l[r++]=s;else if((o=a[s])>4)l[r++]=65533,n+=o-1;else{for(s&=2===o?31:3===o?15:7;o>1&&n<c;)s=s<<6|63&e[n++],o--;o>1?l[r++]=65533:s<65536?l[r++]=s:(s-=65536,l[r++]=55296|s>>10&1023,l[r++]=56320|1023&s)}return i(l,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+a[e[n]]>t?n:t}},{"./common":3}],5:[function(e,t,n){"use strict";t.exports=function(e,t,n,i){for(var r=65535&e|0,s=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{s=s+(r=r+t[i++]|0)|0}while(--o);r%=65521,s%=65521}return r|s<<16|0}},{}],6:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(e,t,n){"use strict";var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,r){var s=i,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}},{}],8:[function(e,t,n){"use strict";function i(e,t){return e.msg=T[t],t}function r(e){return(e<<1)-(e>4?9:0)}function s(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(k.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function a(e,t){A._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,o(e.strm)}function c(e,t){e.pending_buf[e.pending++]=t}function l(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function u(e,t,n,i){var r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,k.arraySet(t,e.input,e.next_in,r,n),1===e.state.wrap?e.adler=x(e.adler,t,r,n):2===e.state.wrap&&(e.adler=S(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)}function h(e,t){var n,i,r=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-V?e.strstart-(e.w_size-V):0,l=e.window,u=e.w_mask,h=e.prev,d=e.strstart+W,_=l[s+o-1],f=l[s+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(l[(n=t)+o]===f&&l[n+o-1]===_&&l[n]===l[s]&&l[++n]===l[s+1]){s+=2,n++;do{}while(l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&s<d);if(i=W-(d-s),s=d-W,i>o){if(e.match_start=t,o=i,i>=a)break;_=l[s+o-1],f=l[s+o]}}}while((t=h[t&u])>c&&0!=--r);return o<=e.lookahead?o:e.lookahead}function d(e){var t,n,i,r,s,o=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-V)){k.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,t=n=e.hash_size;do{i=e.head[--t],e.head[t]=i>=o?i-o:0}while(--n);t=n=o;do{i=e.prev[--t],e.prev[t]=i>=o?i-o:0}while(--n);r+=o}if(0===e.strm.avail_in)break;if(n=u(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=H)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+H-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<H)););}while(e.lookahead<V&&0!==e.strm.avail_in)}function _(e,t){for(var n,i;;){if(e.lookahead<V){if(d(e),e.lookahead<V&&t===P)return $;if(0===e.lookahead)break}if(n=0,e.lookahead>=H&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+H-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-V&&(e.match_length=h(e,n)),e.match_length>=H)if(i=A._tr_tally(e,e.strstart-e.match_start,e.match_length-H),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=H){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+H-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=A._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(a(e,!1),0===e.strm.avail_out))return $}return e.insert=e.strstart<H-1?e.strstart:H-1,t===O?(a(e,!0),0===e.strm.avail_out?Z:K):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?$:X}function f(e,t){for(var n,i,r;;){if(e.lookahead<V){if(d(e),e.lookahead<V&&t===P)return $;if(0===e.lookahead)break}if(n=0,e.lookahead>=H&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+H-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=H-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-V&&(e.match_length=h(e,n),e.match_length<=5&&(e.strategy===I||e.match_length===H&&e.strstart-e.match_start>4096)&&(e.match_length=H-1)),e.prev_length>=H&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-H,i=A._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-H),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+H-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=H-1,e.strstart++,i&&(a(e,!1),0===e.strm.avail_out))return $}else if(e.match_available){if((i=A._tr_tally(e,0,e.window[e.strstart-1]))&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return $}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=A._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<H-1?e.strstart:H-1,t===O?(a(e,!0),0===e.strm.avail_out?Z:K):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?$:X}function p(e,t){for(var n,i,r,s,o=e.window;;){if(e.lookahead<=W){if(d(e),e.lookahead<=W&&t===P)return $;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=H&&e.strstart>0&&((i=o[r=e.strstart-1])===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+W;do{}while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=W-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=H?(n=A._tr_tally(e,1,e.match_length-H),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=A._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(a(e,!1),0===e.strm.avail_out))return $}return e.insert=0,t===O?(a(e,!0),0===e.strm.avail_out?Z:K):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?$:X}function m(e,t){for(var n;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(t===P)return $;break}if(e.match_length=0,n=A._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(a(e,!1),0===e.strm.avail_out))return $}return e.insert=0,t===O?(a(e,!0),0===e.strm.avail_out?Z:K):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?$:X}function g(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=L,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new k.Buf16(2*q),this.dyn_dtree=new k.Buf16(2*(2*U+1)),this.bl_tree=new k.Buf16(2*(2*j+1)),s(this.dyn_ltree),s(this.dyn_dtree),s(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new k.Buf16(F+1),this.heap=new k.Buf16(2*B+1),s(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new k.Buf16(2*B+1),s(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=D,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?G:Y,e.adler=2===t.wrap?0:1,t.last_flush=P,A._tr_init(t),C):i(e,N)}function v(e){var t=b(e);return t===C&&function(e){e.window_size=2*e.w_size,s(e.head),e.max_lazy_match=E[e.level].max_lazy,e.good_match=E[e.level].good_length,e.nice_match=E[e.level].nice_length,e.max_chain_length=E[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=H-1,e.match_available=0,e.ins_h=0}(e.state),t}function w(e,t,n,r,s,o){if(!e)return N;var a=1;if(t===R&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),s<1||s>z||n!==L||r<8||r>15||t<0||t>9||o<0||o>M)return i(e,N);8===r&&(r=9);var c=new y;return e.state=c,c.strm=e,c.wrap=a,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=s+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+H-1)/H),c.window=new k.Buf8(2*c.w_size),c.head=new k.Buf16(c.hash_size),c.prev=new k.Buf16(c.w_size),c.lit_bufsize=1<<s+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new k.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=o,c.method=n,v(e)}var E,k=e("../utils/common"),A=e("./trees"),x=e("./adler32"),S=e("./crc32"),T=e("./messages"),P=0,O=4,C=0,N=-2,R=-1,I=1,M=4,D=2,L=8,z=9,B=286,U=30,j=19,q=2*B+1,F=15,H=3,W=258,V=W+H+1,G=42,Y=113,$=1,X=2,Z=3,K=4;E=[new g(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&t===P)return $;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,a(e,!1),0===e.strm.avail_out))return $;if(e.strstart-e.block_start>=e.w_size-V&&(a(e,!1),0===e.strm.avail_out))return $}return e.insert=0,t===O?(a(e,!0),0===e.strm.avail_out?Z:K):(e.strstart>e.block_start&&(a(e,!1),e.strm.avail_out),$)}),new g(4,4,8,4,_),new g(4,5,16,8,_),new g(4,6,32,32,_),new g(4,4,16,16,f),new g(8,16,32,32,f),new g(8,16,128,128,f),new g(8,32,128,256,f),new g(32,128,258,1024,f),new g(32,258,258,4096,f)],n.deflateInit=function(e,t){return w(e,t,L,15,8,0)},n.deflateInit2=w,n.deflateReset=v,n.deflateResetKeep=b,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?N:(e.state.gzhead=t,C):N},n.deflate=function(e,t){var n,a,u,h;if(!e||!e.state||t>5||t<0)return e?i(e,N):N;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||666===a.status&&t!==O)return i(e,0===e.avail_out?-5:N);if(a.strm=e,n=a.last_flush,a.last_flush=t,a.status===G)if(2===a.wrap)e.adler=0,c(a,31),c(a,139),c(a,8),a.gzhead?(c(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),c(a,255&a.gzhead.time),c(a,a.gzhead.time>>8&255),c(a,a.gzhead.time>>16&255),c(a,a.gzhead.time>>24&255),c(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),c(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(c(a,255&a.gzhead.extra.length),c(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=S(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(c(a,0),c(a,0),c(a,0),c(a,0),c(a,0),c(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),c(a,3),a.status=Y);else{var d=L+(a.w_bits-8<<4)<<8;d|=(a.strategy>=2||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(d|=32),d+=31-d%31,a.status=Y,l(a,d),0!==a.strstart&&(l(a,e.adler>>>16),l(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(u=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>u&&(e.adler=S(e.adler,a.pending_buf,a.pending-u,u)),o(e),u=a.pending,a.pending!==a.pending_buf_size));)c(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>u&&(e.adler=S(e.adler,a.pending_buf,a.pending-u,u)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){u=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>u&&(e.adler=S(e.adler,a.pending_buf,a.pending-u,u)),o(e),u=a.pending,a.pending===a.pending_buf_size)){h=1;break}h=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,c(a,h)}while(0!==h);a.gzhead.hcrc&&a.pending>u&&(e.adler=S(e.adler,a.pending_buf,a.pending-u,u)),0===h&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){u=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>u&&(e.adler=S(e.adler,a.pending_buf,a.pending-u,u)),o(e),u=a.pending,a.pending===a.pending_buf_size)){h=1;break}h=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,c(a,h)}while(0!==h);a.gzhead.hcrc&&a.pending>u&&(e.adler=S(e.adler,a.pending_buf,a.pending-u,u)),0===h&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&o(e),a.pending+2<=a.pending_buf_size&&(c(a,255&e.adler),c(a,e.adler>>8&255),e.adler=0,a.status=Y)):a.status=Y),0!==a.pending){if(o(e),0===e.avail_out)return a.last_flush=-1,C}else if(0===e.avail_in&&r(t)<=r(n)&&t!==O)return i(e,-5);if(666===a.status&&0!==e.avail_in)return i(e,-5);if(0!==e.avail_in||0!==a.lookahead||t!==P&&666!==a.status){var _=2===a.strategy?m(a,t):3===a.strategy?p(a,t):E[a.level].func(a,t);if(_!==Z&&_!==K||(a.status=666),_===$||_===Z)return 0===e.avail_out&&(a.last_flush=-1),C;if(_===X&&(1===t?A._tr_align(a):5!==t&&(A._tr_stored_block(a,0,0,!1),3===t&&(s(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),o(e),0===e.avail_out))return a.last_flush=-1,C}return t!==O?C:a.wrap<=0?1:(2===a.wrap?(c(a,255&e.adler),c(a,e.adler>>8&255),c(a,e.adler>>16&255),c(a,e.adler>>24&255),c(a,255&e.total_in),c(a,e.total_in>>8&255),c(a,e.total_in>>16&255),c(a,e.total_in>>24&255)):(l(a,e.adler>>>16),l(a,65535&e.adler)),o(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?C:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==G&&69!==t&&73!==t&&91!==t&&103!==t&&t!==Y&&666!==t?i(e,N):(e.state=null,t===Y?i(e,-3):C):N},n.deflateSetDictionary=function(e,t){var n,i,r,o,a,c,l,u,h=t.length;if(!e||!e.state)return N;if(2===(o=(n=e.state).wrap)||1===o&&n.status!==G||n.lookahead)return N;for(1===o&&(e.adler=x(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===o&&(s(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new k.Buf8(n.w_size),k.arraySet(u,t,h-n.w_size,n.w_size,0),t=u,h=n.w_size),a=e.avail_in,c=e.next_in,l=e.input,e.avail_in=h,e.next_in=0,e.input=t,d(n);n.lookahead>=H;){i=n.strstart,r=n.lookahead-(H-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+H-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--r);n.strstart=i,n.lookahead=H-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=H-1,n.match_available=0,e.next_in=c,e.input=l,e.avail_in=a,n.wrap=o,C},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(e,t,n){"use strict";t.exports=function(e,t){var n,i,r,s,o,a,c,l,u,h,d,_,f,p,m,g,y,b,v,w,E,k,A,x,S;n=e.state,i=e.next_in,x=e.input,r=i+(e.avail_in-5),s=e.next_out,S=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),c=n.dmax,l=n.wsize,u=n.whave,h=n.wnext,d=n.window,_=n.hold,f=n.bits,p=n.lencode,m=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{f<15&&(_+=x[i++]<<f,f+=8,_+=x[i++]<<f,f+=8),b=p[_&g];t:for(;;){if(_>>>=v=b>>>24,f-=v,0==(v=b>>>16&255))S[s++]=65535&b;else{if(!(16&v)){if(0==(64&v)){b=p[(65535&b)+(_&(1<<v)-1)];continue t}if(32&v){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(v&=15)&&(f<v&&(_+=x[i++]<<f,f+=8),w+=_&(1<<v)-1,_>>>=v,f-=v),f<15&&(_+=x[i++]<<f,f+=8,_+=x[i++]<<f,f+=8),b=m[_&y];n:for(;;){if(_>>>=v=b>>>24,f-=v,!(16&(v=b>>>16&255))){if(0==(64&v)){b=m[(65535&b)+(_&(1<<v)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(E=65535&b,f<(v&=15)&&(_+=x[i++]<<f,(f+=8)<v&&(_+=x[i++]<<f,f+=8)),(E+=_&(1<<v)-1)>c){e.msg="invalid distance too far back",n.mode=30;break e}if(_>>>=v,f-=v,E>(v=s-o)){if((v=E-v)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(k=0,A=d,0===h){if(k+=l-v,v<w){w-=v;do{S[s++]=d[k++]}while(--v);k=s-E,A=S}}else if(h<v){if(k+=l+h-v,(v-=h)<w){w-=v;do{S[s++]=d[k++]}while(--v);if(k=0,h<w){w-=v=h;do{S[s++]=d[k++]}while(--v);k=s-E,A=S}}}else if(k+=h-v,v<w){w-=v;do{S[s++]=d[k++]}while(--v);k=s-E,A=S}for(;w>2;)S[s++]=A[k++],S[s++]=A[k++],S[s++]=A[k++],w-=3;w&&(S[s++]=A[k++],w>1&&(S[s++]=A[k++]))}else{k=s-E;do{S[s++]=S[k++],S[s++]=S[k++],S[s++]=S[k++],w-=3}while(w>2);w&&(S[s++]=S[k++],w>1&&(S[s++]=S[k++]))}break}}break}}while(i<r&&s<a);i-=w=f>>3,_&=(1<<(f-=w<<3))-1,e.next_in=i,e.next_out=s,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=s<a?a-s+257:257-(s-a),n.hold=_,n.bits=f}},{}],11:[function(e,t,n){"use strict";function i(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function r(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=w,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new d.Buf32(k),t.distcode=t.distdyn=new d.Buf32(A),t.sane=1,t.back=-1,b):v}function s(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,r(e)):v}function o(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?v:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,s(e))):v}function a(e,t){var n,i;return e?(i=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},e.state=i,i.window=null,(n=o(e,t))!==b&&(e.state=null),n):v}function c(e){if(x){var t;for(u=new d.Buf32(512),h=new d.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(m(g,e.lens,0,288,u,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;m(y,e.lens,0,32,h,0,e.work,{bits:5}),x=!1}e.lencode=u,e.lenbits=9,e.distcode=h,e.distbits=5}function l(e,t,n,i){var r,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new d.Buf8(s.wsize)),i>=s.wsize?(d.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((r=s.wsize-s.wnext)>i&&(r=i),d.arraySet(s.window,t,n-i,r,s.wnext),(i-=r)?(d.arraySet(s.window,t,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}var u,h,d=e("../utils/common"),_=e("./adler32"),f=e("./crc32"),p=e("./inffast"),m=e("./inftrees"),g=1,y=2,b=0,v=-2,w=1,E=12,k=852,A=592,x=!0;n.inflateReset=s,n.inflateReset2=o,n.inflateResetKeep=r,n.inflateInit=function(e){return a(e,15)},n.inflateInit2=a,n.inflate=function(e,t){var n,r,s,o,a,u,h,k,A,x,S,T,P,O,C,N,R,I,M,D,L,z,B,U,j=0,q=new d.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return v;(n=e.state).mode===E&&(n.mode=13),a=e.next_out,s=e.output,h=e.avail_out,o=e.next_in,r=e.input,u=e.avail_in,k=n.hold,A=n.bits,x=u,S=h,z=b;e:for(;;)switch(n.mode){case w:if(0===n.wrap){n.mode=13;break}for(;A<16;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}if(2&n.wrap&&35615===k){n.check=0,q[0]=255&k,q[1]=k>>>8&255,n.check=f(n.check,q,2,0),k=0,A=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&k)<<8)+(k>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&k)){e.msg="unknown compression method",n.mode=30;break}if(A-=4,L=8+(15&(k>>>=4)),0===n.wbits)n.wbits=L;else if(L>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<L,e.adler=n.check=1,n.mode=512&k?10:E,k=0,A=0;break;case 2:for(;A<16;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}if(n.flags=k,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=k>>8&1),512&n.flags&&(q[0]=255&k,q[1]=k>>>8&255,n.check=f(n.check,q,2,0)),k=0,A=0,n.mode=3;case 3:for(;A<32;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}n.head&&(n.head.time=k),512&n.flags&&(q[0]=255&k,q[1]=k>>>8&255,q[2]=k>>>16&255,q[3]=k>>>24&255,n.check=f(n.check,q,4,0)),k=0,A=0,n.mode=4;case 4:for(;A<16;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}n.head&&(n.head.xflags=255&k,n.head.os=k>>8),512&n.flags&&(q[0]=255&k,q[1]=k>>>8&255,n.check=f(n.check,q,2,0)),k=0,A=0,n.mode=5;case 5:if(1024&n.flags){for(;A<16;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}n.length=k,n.head&&(n.head.extra_len=k),512&n.flags&&(q[0]=255&k,q[1]=k>>>8&255,n.check=f(n.check,q,2,0)),k=0,A=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((T=n.length)>u&&(T=u),T&&(n.head&&(L=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),d.arraySet(n.head.extra,r,o,T,L)),512&n.flags&&(n.check=f(n.check,r,T,o)),u-=T,o+=T,n.length-=T),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===u)break e;T=0;do{L=r[o+T++],n.head&&L&&n.length<65536&&(n.head.name+=String.fromCharCode(L))}while(L&&T<u);if(512&n.flags&&(n.check=f(n.check,r,T,o)),u-=T,o+=T,L)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===u)break e;T=0;do{L=r[o+T++],n.head&&L&&n.length<65536&&(n.head.comment+=String.fromCharCode(L))}while(L&&T<u);if(512&n.flags&&(n.check=f(n.check,r,T,o)),u-=T,o+=T,L)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;A<16;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}if(k!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}k=0,A=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=E;break;case 10:for(;A<32;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}e.adler=n.check=i(k),k=0,A=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=h,e.next_in=o,e.avail_in=u,n.hold=k,n.bits=A,2;e.adler=n.check=1,n.mode=E;case E:if(5===t||6===t)break e;case 13:if(n.last){k>>>=7&A,A-=7&A,n.mode=27;break}for(;A<3;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}switch(n.last=1&k,A-=1,3&(k>>>=1)){case 0:n.mode=14;break;case 1:if(c(n),n.mode=20,6===t){k>>>=2,A-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}k>>>=2,A-=2;break;case 14:for(k>>>=7&A,A-=7&A;A<32;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}if((65535&k)!=(k>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&k,k=0,A=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(T=n.length){if(T>u&&(T=u),T>h&&(T=h),0===T)break e;d.arraySet(s,r,o,T,a),u-=T,o+=T,h-=T,a+=T,n.length-=T;break}n.mode=E;break;case 17:for(;A<14;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}if(n.nlen=257+(31&k),k>>>=5,A-=5,n.ndist=1+(31&k),k>>>=5,A-=5,n.ncode=4+(15&k),k>>>=4,A-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;A<3;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}n.lens[F[n.have++]]=7&k,k>>>=3,A-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},z=m(0,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,z){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;N=(j=n.lencode[k&(1<<n.lenbits)-1])>>>16&255,R=65535&j,!((C=j>>>24)<=A);){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}if(R<16)k>>>=C,A-=C,n.lens[n.have++]=R;else{if(16===R){for(U=C+2;A<U;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}if(k>>>=C,A-=C,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}L=n.lens[n.have-1],T=3+(3&k),k>>>=2,A-=2}else if(17===R){for(U=C+3;A<U;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}A-=C,L=0,T=3+(7&(k>>>=C)),k>>>=3,A-=3}else{for(U=C+7;A<U;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}A-=C,L=0,T=11+(127&(k>>>=C)),k>>>=7,A-=7}if(n.have+T>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;T--;)n.lens[n.have++]=L}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,B={bits:n.lenbits},z=m(g,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,z){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},z=m(y,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,z){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(u>=6&&h>=258){e.next_out=a,e.avail_out=h,e.next_in=o,e.avail_in=u,n.hold=k,n.bits=A,p(e,S),a=e.next_out,s=e.output,h=e.avail_out,o=e.next_in,r=e.input,u=e.avail_in,k=n.hold,A=n.bits,n.mode===E&&(n.back=-1);break}for(n.back=0;N=(j=n.lencode[k&(1<<n.lenbits)-1])>>>16&255,R=65535&j,!((C=j>>>24)<=A);){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}if(N&&0==(240&N)){for(I=C,M=N,D=R;N=(j=n.lencode[D+((k&(1<<I+M)-1)>>I)])>>>16&255,R=65535&j,!(I+(C=j>>>24)<=A);){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}k>>>=I,A-=I,n.back+=I}if(k>>>=C,A-=C,n.back+=C,n.length=R,0===N){n.mode=26;break}if(32&N){n.back=-1,n.mode=E;break}if(64&N){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&N,n.mode=22;case 22:if(n.extra){for(U=n.extra;A<U;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}n.length+=k&(1<<n.extra)-1,k>>>=n.extra,A-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;N=(j=n.distcode[k&(1<<n.distbits)-1])>>>16&255,R=65535&j,!((C=j>>>24)<=A);){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}if(0==(240&N)){for(I=C,M=N,D=R;N=(j=n.distcode[D+((k&(1<<I+M)-1)>>I)])>>>16&255,R=65535&j,!(I+(C=j>>>24)<=A);){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}k>>>=I,A-=I,n.back+=I}if(k>>>=C,A-=C,n.back+=C,64&N){e.msg="invalid distance code",n.mode=30;break}n.offset=R,n.extra=15&N,n.mode=24;case 24:if(n.extra){for(U=n.extra;A<U;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}n.offset+=k&(1<<n.extra)-1,k>>>=n.extra,A-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===h)break e;if(T=S-h,n.offset>T){if((T=n.offset-T)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}T>n.wnext?(T-=n.wnext,P=n.wsize-T):P=n.wnext-T,T>n.length&&(T=n.length),O=n.window}else O=s,P=a-n.offset,T=n.length;T>h&&(T=h),h-=T,n.length-=T;do{s[a++]=O[P++]}while(--T);0===n.length&&(n.mode=21);break;case 26:if(0===h)break e;s[a++]=n.length,h--,n.mode=21;break;case 27:if(n.wrap){for(;A<32;){if(0===u)break e;u--,k|=r[o++]<<A,A+=8}if(S-=h,e.total_out+=S,n.total+=S,S&&(e.adler=n.check=n.flags?f(n.check,s,S,a-S):_(n.check,s,S,a-S)),S=h,(n.flags?k:i(k))!==n.check){e.msg="incorrect data check",n.mode=30;break}k=0,A=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;A<32;){if(0===u)break e;u--,k+=r[o++]<<A,A+=8}if(k!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}k=0,A=0}n.mode=29;case 29:z=1;break e;case 30:z=-3;break e;case 31:return-4;case 32:default:return v}return e.next_out=a,e.avail_out=h,e.next_in=o,e.avail_in=u,n.hold=k,n.bits=A,(n.wsize||S!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&l(e,e.output,e.next_out,S-e.avail_out)?(n.mode=31,-4):(x-=e.avail_in,S-=e.avail_out,e.total_in+=x,e.total_out+=S,n.total+=S,n.wrap&&S&&(e.adler=n.check=n.flags?f(n.check,s,S,e.next_out-S):_(n.check,s,S,e.next_out-S)),e.data_type=n.bits+(n.last?64:0)+(n.mode===E?128:0)+(20===n.mode||15===n.mode?256:0),(0===x&&0===S||4===t)&&z===b&&(z=-5),z)},n.inflateEnd=function(e){if(!e||!e.state)return v;var t=e.state;return t.window&&(t.window=null),e.state=null,b},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?v:(n.head=t,t.done=!1,b):v},n.inflateSetDictionary=function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?v:11===n.mode&&_(1,t,i,0)!==n.check?-3:l(e,t,i,i)?(n.mode=31,-4):(n.havedict=1,b):v},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(e,t,n){"use strict";var i=e("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,c,l,u,h,d){var _,f,p,m,g,y,b,v,w,E=d.bits,k=0,A=0,x=0,S=0,T=0,P=0,O=0,C=0,N=0,R=0,I=null,M=0,D=new i.Buf16(16),L=new i.Buf16(16),z=null,B=0;for(k=0;k<=15;k++)D[k]=0;for(A=0;A<c;A++)D[t[n+A]]++;for(T=E,S=15;S>=1&&0===D[S];S--);if(T>S&&(T=S),0===S)return l[u++]=20971520,l[u++]=20971520,d.bits=1,0;for(x=1;x<S&&0===D[x];x++);for(T<x&&(T=x),C=1,k=1;k<=15;k++)if(C<<=1,(C-=D[k])<0)return-1;if(C>0&&(0===e||1!==S))return-1;for(L[1]=0,k=1;k<15;k++)L[k+1]=L[k]+D[k];for(A=0;A<c;A++)0!==t[n+A]&&(h[L[t[n+A]]++]=A);if(0===e?(I=z=h,y=19):1===e?(I=r,M-=257,z=s,B-=257,y=256):(I=o,z=a,y=-1),R=0,A=0,k=x,g=u,P=T,O=0,p=-1,m=(N=1<<T)-1,1===e&&N>852||2===e&&N>592)return 1;for(;;){b=k-O,h[A]<y?(v=0,w=h[A]):h[A]>y?(v=z[B+h[A]],w=I[M+h[A]]):(v=96,w=0),_=1<<k-O,x=f=1<<P;do{l[g+(R>>O)+(f-=_)]=b<<24|v<<16|w|0}while(0!==f);for(_=1<<k-1;R&_;)_>>=1;if(0!==_?(R&=_-1,R+=_):R=0,A++,0==--D[k]){if(k===S)break;k=t[n+h[A]]}if(k>T&&(R&m)!==p){for(0===O&&(O=T),g+=x,C=1<<(P=k-O);P+O<S&&!((C-=D[P+O])<=0);)P++,C<<=1;if(N+=1<<P,1===e&&N>852||2===e&&N>592)return 1;l[p=R&m]=T<<24|P<<16|g-u|0}}return 0!==R&&(l[g+R]=k-O<<24|64<<16|0),d.bits=T,0}},{"../utils/common":3}],13:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(e,t,n){"use strict";function i(e){for(var t=e.length;--t>=0;)e[t]=0}function r(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function s(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function o(e){return e<256?W[e]:W[256+(e>>>7)]}function a(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function c(e,t,n){e.bi_valid>R-n?(e.bi_buf|=t<<e.bi_valid&65535,a(e,e.bi_buf),e.bi_buf=t>>R-e.bi_valid,e.bi_valid+=n-R):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function l(e,t,n){c(e,n[2*t],n[2*t+1])}function u(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function h(e,t,n){var i,r,s=new Array(N+1),o=0;for(i=1;i<=N;i++)s[i]=o=o+n[i-1]<<1;for(r=0;r<=t;r++){var a=e[2*r+1];0!==a&&(e[2*r]=u(s[a]++,a))}}function d(e){var t;for(t=0;t<T;t++)e.dyn_ltree[2*t]=0;for(t=0;t<P;t++)e.dyn_dtree[2*t]=0;for(t=0;t<O;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*M]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function _(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function f(e,t,n,i){var r=2*t,s=2*n;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]}function p(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&f(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!f(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function m(e,t,n){var i,r,s,a,u=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],r=e.pending_buf[e.l_buf+u],u++,0===i?l(e,r,t):(l(e,(s=V[r])+S+1,t),0!==(a=B[s])&&c(e,r-=G[s],a),l(e,s=o(--i),n),0!==(a=U[s])&&c(e,i-=Y[s],a))}while(u<e.last_lit);l(e,M,t)}function g(e,t){var n,i,r,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=C,n=0;n<c;n++)0!==s[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)s[2*(r=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[r]=0,e.opt_len--,a&&(e.static_len-=o[2*r+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)p(e,s,n);r=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],p(e,s,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,s[2*r]=s[2*n]+s[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,s[2*n+1]=s[2*i+1]=r,e.heap[1]=r++,p(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,i,r,s,o,a,c=t.dyn_tree,l=t.max_code,u=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,_=t.stat_desc.extra_base,f=t.stat_desc.max_length,p=0;for(s=0;s<=N;s++)e.bl_count[s]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<C;n++)(s=c[2*c[2*(i=e.heap[n])+1]+1]+1)>f&&(s=f,p++),c[2*i+1]=s,i>l||(e.bl_count[s]++,o=0,i>=_&&(o=d[i-_]),a=c[2*i],e.opt_len+=a*(s+o),h&&(e.static_len+=a*(u[2*i+1]+o)));if(0!==p){do{for(s=f-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[f]--,p-=2}while(p>0);for(s=f;0!==s;s--)for(i=e.bl_count[s];0!==i;)(r=e.heap[--n])>l||(c[2*r+1]!==s&&(e.opt_len+=(s-c[2*r+1])*c[2*r],c[2*r+1]=s),i--)}}(e,t),h(s,l,e.bl_count)}function y(e,t,n){var i,r,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=o,o=t[2*(i+1)+1],++a<c&&r===o||(a<l?e.bl_tree[2*r]+=a:0!==r?(r!==s&&e.bl_tree[2*r]++,e.bl_tree[2*D]++):a<=10?e.bl_tree[2*L]++:e.bl_tree[2*z]++,a=0,s=r,0===o?(c=138,l=3):r===o?(c=6,l=3):(c=7,l=4))}function b(e,t,n){var i,r,s=-1,o=t[1],a=0,u=7,h=4;for(0===o&&(u=138,h=3),i=0;i<=n;i++)if(r=o,o=t[2*(i+1)+1],!(++a<u&&r===o)){if(a<h)do{l(e,r,e.bl_tree)}while(0!=--a);else 0!==r?(r!==s&&(l(e,r,e.bl_tree),a--),l(e,D,e.bl_tree),c(e,a-3,2)):a<=10?(l(e,L,e.bl_tree),c(e,a-3,3)):(l(e,z,e.bl_tree),c(e,a-11,7));a=0,s=r,0===o?(u=138,h=3):r===o?(u=6,h=3):(u=7,h=4)}}function v(e,t,n,i){c(e,(A<<1)+(i?1:0),3),function(e,t,n,i){_(e),i&&(a(e,n),a(e,~n)),w.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}var w=e("../utils/common"),E=0,k=1,A=0,x=29,S=256,T=S+1+x,P=30,O=19,C=2*T+1,N=15,R=16,I=7,M=256,D=16,L=17,z=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(T+2));i(F);var H=new Array(2*P);i(H);var W=new Array(512);i(W);var V=new Array(256);i(V);var G=new Array(x);i(G);var Y=new Array(P);i(Y);var $,X,Z,K=!1;n._tr_init=function(e){K||(function(){var e,t,n,i,s,o=new Array(N+1);for(n=0,i=0;i<x-1;i++)for(G[i]=n,e=0;e<1<<B[i];e++)V[n++]=i;for(V[n-1]=i,s=0,i=0;i<16;i++)for(Y[i]=s,e=0;e<1<<U[i];e++)W[s++]=i;for(s>>=7;i<P;i++)for(Y[i]=s<<7,e=0;e<1<<U[i]-7;e++)W[256+s++]=i;for(t=0;t<=N;t++)o[t]=0;for(e=0;e<=143;)F[2*e+1]=8,e++,o[8]++;for(;e<=255;)F[2*e+1]=9,e++,o[9]++;for(;e<=279;)F[2*e+1]=7,e++,o[7]++;for(;e<=287;)F[2*e+1]=8,e++,o[8]++;for(h(F,T+1,o),e=0;e<P;e++)H[2*e+1]=5,H[2*e]=u(e,5);$=new r(F,B,S+1,T,N),X=new r(H,U,0,P,N),Z=new r(new Array(0),j,0,O,I)}(),K=!0),e.l_desc=new s(e.dyn_ltree,$),e.d_desc=new s(e.dyn_dtree,X),e.bl_desc=new s(e.bl_tree,Z),e.bi_buf=0,e.bi_valid=0,d(e)},n._tr_stored_block=v,n._tr_flush_block=function(e,t,n,i){var r,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return E;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return k;for(t=32;t<S;t++)if(0!==e.dyn_ltree[2*t])return k;return E}(e)),g(e,e.l_desc),g(e,e.d_desc),o=function(e){var t;for(y(e,e.dyn_ltree,e.l_desc.max_code),y(e,e.dyn_dtree,e.d_desc.max_code),g(e,e.bl_desc),t=O-1;t>=3&&0===e.bl_tree[2*q[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=r&&(r=s)):r=s=n+5,n+4<=r&&-1!==t?v(e,t,n,i):4===e.strategy||s===r?(c(e,2+(i?1:0),3),m(e,F,H)):(c(e,4+(i?1:0),3),function(e,t,n,i){var r;for(c(e,t-257,5),c(e,n-1,5),c(e,i-4,4),r=0;r<i;r++)c(e,e.bl_tree[2*q[r]+1],3);b(e,e.dyn_ltree,t-1),b(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),m(e,e.dyn_ltree,e.dyn_dtree)),d(e),i&&_(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(V[n]+S+1)]++,e.dyn_dtree[2*o(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){c(e,2,3),l(e,M,F),function(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":3}],15:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(e,t,n){"use strict";var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("@detox/simple-peer",[],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SimplePeer=e()}}(function(){return function(){return function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){return r(t[o][1][e]||e)},u,u.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}}()({"/":[function(e,t,n){t.exports=o;var i=e("eventemitter").EventEmitter,r=e("inherits"),s=e("./lib/randombytes");function o(e){var t=this;if(!(t instanceof o))return new o(e);i.call(t),t.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,t._isChromium="undefined"!=typeof window&&!!window.webkitRTCPeerConnection,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||o.channelConfig,t.config=e.config||o.config,t.constraints=t._transformConstraints(e.constraints||o.constraints),t.offerConstraints=t._transformConstraints(e.offerConstraints||{}),t.answerConstraints=t._transformConstraints(e.answerConstraints||{}),t.reconnectTimer=e.reconnectTimer||!1,t.sdpTransform=e.sdpTransform||function(e){return e},t.streams=e.streams||(e.stream?[e.stream]:[]),t.trickle=void 0===e.trickle||e.trickle,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:window,t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._isNegotiating=!1,t._batchedNegotiation=!1,t._queuedNegotiation=!1,t._sendersAwaitingStable=[],t._senderMap=new WeakMap,t._remoteTracks=[],t._remoteStreams=[],t._chunk=null,t._cb=null,t._interval=null,t._reconnectTimeout=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._isWrtc=Array.isArray(t._pc.RTCIceConnectionStates),t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator?t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)}):t._pc.ondatachannel=function(e){t._setupData(e)},"addTrack"in t._pc&&(t.streams&&t.streams.forEach(function(e){t.addStream(e)}),t._pc.ontrack=function(e){t._onTrack(e)}),t.initiator&&t._needsNegotiation()}function a(e){return"{"===e[0]?e.slice(1,-1):e}function c(e,t){var n=new Error(e);return n.code=t,n}function l(){}r(o,i),o.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]},o.constraints={},o.channelConfig={},Object.defineProperty(o.prototype,"bufferSize",{get:function(){return this._channel&&this._channel.bufferedAmount||0}}),o.prototype.address=function(){return{port:this.localPort,family:"IPv4",address:this.localAddress}},o.prototype.signal=function(e){var t=this;if(t.destroyed)throw c("cannot signal after peer is destroyed","ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}e.renegotiate&&t._needsNegotiation(),e.candidate&&(t._pc.remoteDescription&&t._pc.remoteDescription.type?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){t.destroyed||(t._checkForMediaRemovals(e.sdp),t._pendingCandidates.forEach(function(e){t._addIceCandidate(e)}),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())},function(e){t.destroy(c(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||t.destroy(c("signal() called with invalid signal data","ERR_SIGNALING"))},o.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),l,function(e){t.destroy(c(e,"ERR_ADD_ICE_CANDIDATE"))})}catch(e){t.destroy(c("error adding candidate: "+e.message,"ERR_ADD_ICE_CANDIDATE"))}},o.prototype.send=function(e){this._channel.send(e)},o.prototype.addStream=function(e){var t=this;e.getTracks().forEach(function(n){t.addTrack(n,e)})},o.prototype.addTrack=function(e,t){var n=this,i=n._pc.addTrack(e,t),r=n._senderMap.get(e)||new WeakMap;r.set(t,i),n._senderMap.set(e,r),n._needsNegotiation()},o.prototype.removeTrack=function(e,t){var n=this,i=n._senderMap.get(e),r=i?i.get(t):null;r||n.destroy(new Error("Cannot remove track that was never added."));try{n._pc.removeTrack(r)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?n._sendersAwaitingStable.push(r):n.destroy(e)}},o.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(n){t.removeTrack(n,e)})},o.prototype._needsNegotiation=function(){var e=this;e._batchedNegotiation||(e._batchedNegotiation=!0,setTimeout(function(){e._batchedNegotiation=!1,e.negotiate()},0))},o.prototype.negotiate=function(){var e=this;e.initiator?e._isNegotiating?e._queuedNegotiation=!0:e._createOffer():e.emit("signal",{renegotiate:!0}),e._isNegotiating=!0},o.prototype.destroy=function(e){var t=this;if(!t.destroyed){if(t.destroyed=!0,t.connected=!1,t._pcReady=!1,t._channelReady=!1,t._remoteTracks=null,t._remoteStreams=null,t._senderMap=null,clearInterval(t._interval),clearTimeout(t._reconnectTimeout),t._interval=null,t._reconnectTimeout=null,t._chunk=null,t._cb=null,t._channel){try{t._channel.close()}catch(e){}t._channel.onmessage=null,t._channel.onopen=null,t._channel.onclose=null,t._channel.onerror=null}if(t._pc){try{t._pc.close()}catch(e){}t._pc.oniceconnectionstatechange=null,t._pc.onicegatheringstatechange=null,t._pc.onsignalingstatechange=null,t._pc.onicecandidate=null,"addTrack"in t._pc&&(t._pc.ontrack=null),t._pc.ondatachannel=null}t._pc=null,t._channel=null,e&&t.emit("error",e),t.emit("close")}},o.prototype._setupData=function(e){var t=this;if(!e.channel)return t.destroy(c("Data channel event is missing `channel` property","ERR_DATA_CHANNEL"));t._channel=e.channel,t._channel.binaryType="arraybuffer","number"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=65536),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._onChannelMessage(e)},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},t._channel.onerror=function(e){t.destroy(c(e,"ERR_DATA_CHANNEL"))}},o.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(function(t){function n(){var n=e._pc.localDescription||t;e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,function(){if(e.destroyed)return;e.trickle||e._iceComplete?n():e.once("_iceComplete",n)},function(t){e.destroy(c(t,"ERR_SET_LOCAL_DESCRIPTION"))}))},function(t){e.destroy(c(t,"ERR_CREATE_OFFER"))},e.offerConstraints)},o.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(function(t){function n(){var n=e._pc.localDescription||t;e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,function(){if(e.destroyed)return;e.trickle||e._iceComplete?n():e.once("_iceComplete",n)},function(t){e.destroy(c(t,"ERR_SET_LOCAL_DESCRIPTION"))}))},function(t){e.destroy(c(t,"ERR_CREATE_ANSWER"))},e.answerConstraints)},o.prototype._onIceStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceConnectionState,n=e._pc.iceGatheringState;e.emit("iceStateChange",t,n),"connected"!==t&&"completed"!==t||(clearTimeout(e._reconnectTimeout),e._pcReady=!0,e._maybeReady()),"failed"===t&&e.destroy(c("Ice connection failed.","ERR_ICE_CONNECTION_FAILURE")),"closed"===t&&e.destroy(new Error("Ice connection closed."))}},o.prototype.getStats=function(e){var t=this;0===t._pc.getStats.length?t._pc.getStats().then(function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):t._isReactNativeWebrtc?t._pc.getStats(null,function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):t._pc.getStats.length>0?t._pc.getStats(function(n){if(!t.destroyed){var i=[];n.result().forEach(function(e){var t={};e.names().forEach(function(n){t[n]=e.stat(n)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,i.push(t)}),e(null,i)}},function(t){e(t)}):e(null,[])},o.prototype._maybeReady=function(){var e=this;!e.connected&&!e._connecting&&e._pcReady&&e._channelReady&&(e._connecting=!0,function t(){e.destroyed||e.getStats(function(n,i){if(!e.destroyed){n&&(i=[]);var r={},s={},o={},a=!1;if(i.forEach(function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(r[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(s[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(o[e.id]=e)}),i.forEach(function(e){"transport"===e.type&&e.selectedCandidatePairId&&u(o[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&u(e)}),a||Object.keys(o).length&&!Object.keys(s).length){if(e._connecting=!1,e.connected=!0,e._chunk){try{e.send(e._chunk)}catch(n){return e.destroy(c(n,"ERR_DATA_CHANNEL"))}e._chunk=null;var l=e._cb;e._cb=null,l(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval(function(){e._onInterval()},150),e._interval.unref&&e._interval.unref()),e.emit("connect")}else setTimeout(t,100)}function u(t){a=!0;var n=s[t.localCandidateId];n&&n.ip?(e.localAddress=n.ip,e.localPort=Number(n.port)):n&&n.ipAddress?(e.localAddress=n.ipAddress,e.localPort=Number(n.portNumber)):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=Number(n[1]));var i=r[t.remoteCandidateId];i&&i.ip?(e.remoteAddress=i.ip,e.remotePort=Number(i.port)):i&&i.ipAddress?(e.remoteAddress=i.ipAddress,e.remotePort=Number(i.portNumber)):"string"==typeof t.googRemoteAddress&&(i=t.googRemoteAddress.split(":"),e.remoteAddress=i[0],e.remotePort=Number(i[1])),e.remoteFamily="IPv4"}})}())},o.prototype._onInterval=function(){var e=this;!e._cb||!e._channel||e._channel.bufferedAmount>65536||e._onChannelBufferedAmountLow()},o.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||("stable"===e._pc.signalingState&&(e._isNegotiating=!1,e._sendersAwaitingStable.forEach(function(t){e.removeTrack(t),e._queuedNegotiation=!0}),e._sendersAwaitingStable=[],e._queuedNegotiation&&(e._queuedNegotiation=!1,e._needsNegotiation()),e.emit("negotiate")),e.emit("signalingStateChange",e._pc.signalingState))},o.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||(t._iceComplete=!0,t.emit("_iceComplete")))},o.prototype._onChannelMessage=function(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=new Uint8Array(t)),this.emit("data",t)}},o.prototype._onChannelBufferedAmountLow=function(){var e=this;if(!e.destroyed&&e._cb){var t=e._cb;e._cb=null,t(null)}},o.prototype._onChannelOpen=function(){var e=this;e.connected||e.destroyed||(e._channelReady=!0,e._maybeReady())},o.prototype._onChannelClose=function(){this.destroyed||this.destroy()},o.prototype._onTrack=function(e){var t=this;t.destroyed||e.streams.forEach(function(n){t.emit("track",e.track,n),t._remoteTracks.push({track:e.track,stream:n}),t._remoteStreams.some(function(e){return e.id===n.id})||(t._remoteStreams.push(n),setTimeout(function(){t.emit("stream",n)},0))})},o.prototype._checkForMediaRemovals=function(e){var t=this,n=t._parseMsids(e);t._remoteTracks=t._remoteTracks.filter(function(e){var i=e.track,r=e.stream,s=n.some(function(e){var t=a(i.id),n=a(r.id);return e.trackId===t&&e.streamId===n});return s||t.emit("removetrack",i,r),s}),t._remoteStreams=t._remoteStreams.filter(function(e){var i=n.some(function(t){var n=a(e.id);return t.streamId===n});return i||t.emit("removestream",e),i})},o.prototype._parseMsids=function(e){var t=e.split("\n").filter(function(e){return 0===e.indexOf("a=ssrc:")&&-1!==e.indexOf(" msid:")}).map(function(e){var t=e.slice(e.indexOf(" msid:")+" msid:".length,-1).split(" ");return{streamId:t[0],trackId:t[1]}}),n=e.split("\n").filter(function(e){return 0===e.indexOf("a=msid:{")}).map(function(e){var t=e.slice(e.indexOf("a=msid:{")+"a=msid:{".length,-2).split("} {");return{streamId:t[0],trackId:t[1]}});return[].concat(t,n)},o.prototype._transformConstraints=function(e){if(0===Object.keys(e).length)return e;if((e.mandatory||e.optional)&&!this._isChromium){var t=Object.assign({},e.optional,e.mandatory);return void 0!==t.OfferToReceiveVideo&&(t.offerToReceiveVideo=t.OfferToReceiveVideo,delete t.OfferToReceiveVideo),void 0!==t.OfferToReceiveAudio&&(t.offerToReceiveAudio=t.OfferToReceiveAudio,delete t.OfferToReceiveAudio),t}return e.mandatory||e.optional||!this._isChromium?e:(void 0!==e.offerToReceiveVideo&&(e.OfferToReceiveVideo=e.offerToReceiveVideo,delete e.offerToReceiveVideo),void 0!==e.offerToReceiveAudio&&(e.OfferToReceiveAudio=e.offerToReceiveAudio,delete e.offerToReceiveAudio),{mandatory:e})}},{"./lib/randombytes":1,eventemitter:2,inherits:3}],1:[function(e,t,n){t.exports=function(e){var t=new Uint8Array(e);return window.crypto.getRandomValues(t),t}},{}],2:[function(e,t,n){!function(e){"function"!=typeof Array.isArray&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1});var t=e.EventEmitter=function(){},n=Array.isArray;t.prototype.emit=function(e){if("error"===e&&(!this._events||!this._events.error||n(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if("function"==typeof t){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var i=Array.prototype.slice.call(arguments,1);t.apply(this,i)}return!0}if(n(t)){i=Array.prototype.slice.call(arguments,1);for(var r=t.slice(),s=0,o=r.length;s<o;s++)r[s].apply(this,i);return!0}return!1},t.prototype.addListener=function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");return this._events||(this._events={}),this.emit("newListener",e,t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){var n=this;n.on(e,function i(){n.removeListener(e,i),t.apply(this,arguments)})},t.prototype.removeListener=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var i=this._events[e];if(n(i)){var r=i.indexOf(t);if(r<0)return this;i.splice(r,1),0==i.length&&delete this._events[e]}else this._events[e]===t&&delete this._events[e];return this},t.prototype.removeAllListeners=function(e){return e&&this._events&&this._events[e]&&(this._events[e]=null),this},t.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),n(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}}(void 0===n?window:n)},{}],3:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}]},{},[])("/")}),function(){function e(e,t){e[0]=e[1],e[1]=e[2],e[2]=e[3],e[3]=e[4],e[4]=t}function t(t,s,o,a,c,l){function u(e,t,i,a,c,l){if(!(this instanceof u))return new u(e,t,i,a,c,l);o.call(this),this.B=e,this.h=t,this.A=a,this.j=l,this.D=1e3/c,this.o=s.Multiplexer(n,r),this.f=s.Demultiplexer(n,r),this.v=[y,y,y,y,y],this.u=[y,y,y,y,y],this.l(i)}function h(e,t,n,i,r){if(!(this instanceof h))return new h(e,t,n,i,r);o.call(this),this.j=e,this.a=m(),this.c=m(),this.g=new Set,this.h=t,this.o=n,this.l=i,this.m=r,this.f=new WeakMap}var d=t.array2string,_=t.string2array,f=t.concat_arrays,p=t.error_handler,m=t.ArrayMap,g=t.timeoutSet,y=new Uint8Array(0);return u.prototype={l:function(e){var t,n=this;if(!this.C){this.c=this.g=e,this.w=!1;var i=this.a;this.a=t=c({config:{iceServers:this.A},initiator:e,trickle:!1,wrtc:l}),t.once("signal",function(i){n.b||n.a!==t||n.fire("signal",f([[e?1:0],_(i.sdp)]))}),t.once("connect",function(){n.b||n.a!==t||(n.fire("connected"),n.off("signal"),n.C=!0,n.m=+new Date,n.c&&n.s())}),t.once("close",function(){n.a===t&&(n.fire("disconnected"),n.destroy())}),t.on("data",function(e){if(!n.b)if(n.c||e.length!==r)n.destroy();else{for(n.f.feed(e);n.f.have_more_data();){var t=n.f.get_data();e=t[0],t=t.subarray(1),e<n.j&&(t=n.G(t)),n.fire("data",e,t)}n.c=!0,n.s()}}),t.on("error",p),i&&i.destroy()}},signal:function(e){var t,n,i;if(!this.b&&!this.w){if(this.w=!0,(t=!!e[0])&&this.g)for(t=0,i=(n=this.B).length;t<i;++t){var r=t,s=n[t];if(s!==this.h[r]){if(s>this.h[r])return;this.l(!1);break}}else if(!t&&!this.g)return void this.destroy();this.a.signal({type:this.g?"answer":"offer",sdp:d(e.subarray(1))})}},update_peer_id:function(e){this.h=e},send:function(e,t){if(!(this.b||t.length>n)){if(e<this.j){if(t.length>i)return;t=this.F(t)}e=f([[e],t]),this.o.feed(e)}},destroy:function(){this.b||(this.b=!0,clearTimeout(this.i),this.a.destroy())},s:function(){var e=this;this.i=setTimeout(function(){if(!e.b)try{e.a.send(e.o.get_block()),e.c=!1,e.m=+new Date}catch(e){}},Math.max(0,this.D-(new Date-this.m)))},F:function(t){var n=a.deflate(t,{dictionary:f(this.v),level:1});return e(this.v,t),n.length>i?f([[0],t]):f([[1],n])},G:function(t){var n,i=t[0];return t=t.subarray(1),n=i?a.inflate(t,{dictionary:f(this.u)}):t,e(this.u,n),n}},u.prototype=Object.assign(Object.create(o.prototype),u.prototype),Object.defineProperty(u.prototype,"constructor",{value:u}),h.prototype={create_connection:function(e,t){var n,i=this;return this.b?null:(n=this.a.get(t)||this.c.get(t))?n:(n=u(this.j,t,e,this.h,this.o,this.l).on("data",function(e,t){if(!i.b){var r=i.f.get(n);i.fire("data",r,e,t)}}).once("signal",function(e){if(!i.b){var t=i.f.get(n);i.fire("signal",t,e),i.i(n,"connected")}}).once("connected",function(){var e=i.f.get(n);!i.b&&i.a.has(e)&&(i.a.delete(e),i.c.set(e,n),i.fire("connected",e))}).once("disconnected",function(){if(!i.b){var e=i.f.get(n);i.a.delete(e),i.c.delete(e),i.fire("disconnected",e)}}),this.f.set(n,t),this.i(n,"signal"),this.a.set(t,n),n)},get_connection:function(e){return this.a.get(e)||this.c.get(e)||null},update_peer_id:function(e,t){var n;return!this.a.has(t)&&!this.c.has(t)&&((n=this.a.get(e))?(this.f.set(n,t),this.a.delete(e),this.a.set(t,n),n.update_peer_id(t),!0):!!(n=this.c.get(e))&&(this.f.set(n,t),this.c.delete(e),this.c.set(t,n),n.update_peer_id(t),!0))},i:function(e,t){var n=this,i=g(this.m,function(){e.destroy()});this.g.add(i),e.once(t,function(){n.g.delete(i),clearTimeout(i)})},destroy_connection:function(e){(e=this.a.get(e)||this.c.get(e))&&e.destroy()},signal:function(e,t){this.b||(e=this.a.get(e))&&e.signal(t)},send:function(e,t,n){this.b||(e=this.c.get(e))&&e.send(t,n)},destroy:function(){this.b||(this.b=!0,this.a.forEach(function(e){e.destroy()}),this.c.forEach(function(e){e.destroy()}),this.g.forEach(function(e){clearTimeout(e)}))}},h.prototype=Object.assign(Object.create(o.prototype),h.prototype),Object.defineProperty(h.prototype,"constructor",{value:h}),{P2P_transport:u,Transport:h,MAX_DATA_SIZE:n,MAX_COMPRESSED_DATA_SIZE:i}}var n=Math.pow(2,16)-2,i=n-1,r=512;define("@detox/transport",["@detox/utils","fixed-size-multiplexer","async-eventer","pako","@detox/simple-peer"],t)}.call(this),function(){function e(e){var t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}function t(e){var t=e[0],n=e.subarray(1,3);return n=new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,!1),[t,e.slice(3,3+n)]}function n(e,t,n){return(e=new Uint8Array(e)).set(t),e.set(n,2),e}function i(t,n,i){return(i=new Uint8Array(3+i)).set([t]),i.set(e(n.length),1),i.set(n,3),i}function r(e,t){return e.join(",")+t.join(",")}function s(e){if(e instanceof Error)return console.error(e)}function o(o){function d(e,t,n,i){if(null==i&&(i=10),!(this instanceof d))return new d(e,t,n,i);o.call(this),this.l=e,this.v=t,this.u=n,this.N=i,this.b=new Map,this.g=new Set,this.f=new Map,this.m=new Map,this.o=new Map,this.a=new Map}return d.prototype={X:function(e,t){if(t.length===this.l){var n=[t.subarray(0,2),t.subarray(2)];t=n[0],n=n[1],this.c("activity",e,t);var i=r(e,t);this.b.has(i)||this.g.has(i)||this.a.has(i)?this.O(e,t,n):this.P(e,t,n)}},U:function(e,t){this.b.set(r(e,t),[e]),this.h(e,t)},T:function(e,t){this.g.add(r(e,t)),this.h(e,t)},S:function(e,t){e=r(e,t),t=this.o.get(e),this.b.get(e).push(t),this.o.delete(e)},H:function(e,t){if(t.length>this.i())throw new RangeError("Too much command data");var n=this.M(e);return t=this.D(n,a,t),this.j(e,n,t),this.s(e,n),n},V:function(e,t,n){if(n.length>this.i())throw new RangeError("Too much command data");n=this.D(t,c,n),this.j(e,t,n)},W:function(e,t,n,i){var o,a=this,c=r(e,t);if(!this.b.has(c))throw new ReferenceError("There is no such segment established");if(i.length>this.i()-this.v)throw new RangeError("Too much command data");var u=this.b.get(c).slice(-1)[0],h=o=new Uint8Array(n.length+i.length);h.set(n),h.set(i,n.length),this.A(e,t,u,l,o).then(function(i){a.j(e,t,i),a.o.set(c,n)}).catch(s)},C:function(e,t,n){var i=this;this.A(e,t,e,u,n).then(function(n){i.j(e,t,n)}).catch(s)},I:function(e,t){var n=r(e,t);if(this.b.delete(n),this.g.delete(n),this.o.delete(n),this.h(e,t),this.a.has(n)){var i=this.a.get(n);n=i[0],i=i[1],this.B(e,t),this.I(n,i)}else this.B(e,t)},data:function(e,t,n,i,o){var a=this,c=r(e,t);if(!this.b.has(c)&&!this.g.has(c))throw new ReferenceError("There is no such segment established");if(o.length>this.i())throw new RangeError("Too much command data");this.A(e,t,n,i+h,o).then(function(n){a.j(e,t,n)}).catch(s)},i:function(){return this.l-2-1-2-this.u},j:function(e,t,n){return this.c("activity",e,t),this.c("send",e,n)},P:function(e,n,i){var s=r(e,n),o=(i=t(i))[0];switch(i=i[1],o){case a:this.s(e,n),this.c("create_request",e,n,i);break;case c:this.f.has(s)&&((s=(s=this.f.get(s)).Z)?(e=s[0],n=s[1],this.C(e,n,i)):this.c("create_response",e,n,i))}},O:function(e,n,i){var o=this;this.R(e,n,i).then(function(i){var s=r(e,n);!o.g.has(s)&&o.a.has(s)?o.w(s,i):o.K(e,n,i).then(function(i){var r=t(i.plaintext),a=r[0];switch(r=r[1],a){case l:try{var c=r.subarray(0,o.v),d=r.subarray(o.v),_=o.H(c,d),f=[e,n],p=[c,_];o.s(e,n,{Y:p}),o.s(c,_,{Z:f})}catch(t){if(!((i=t)instanceof RangeError))throw i;o.C(e,n,new Uint8Array(0))}break;case u:o.o.has(s)&&o.c("extend_response",e,n,r);break;default:a<h||o.c("data",e,n,i.target_address,a-h,r)}},function(){var t;if(o.a.has(s))o.w(s,i);else if(o.f.has(s)){var r=o.f.get(s);(t=r.Y)&&(r=t[0],t=t[1],o.h(e,n),o.h(r,t),o.J(e,n,r,t)&&o.w(s,i))}})}).catch(s)},w:function(e,t){var i=this.a.get(e);e=i[0],i=i[1],t=n(this.l,i,t),this.j(e,i,t)},M:function(t){var n,i=0;for(n=Math.pow(2,16);i<n;++i){var s=i,o=r(t,s=e(s));if(!(this.b.has(o)||this.f.has(o)||this.g.has(o)||this.a.has(o)))return s}throw new RangeError("Out of possible segment IDs")},D:function(e,t,r){return t=i(t,r,this.i()),n(this.l,e,t)},A:function(e,t,r,s,o){var a=this;return s=i(s,o,this.i()),this.L(e,t,r,s).then(function(e){return n(a.l,t,e)})},J:function(e,t,n,i){var s=r(e,t),o=r(n,i);return!this.a.has(s)&&!this.a.has(o)&&(this.a.set(s,[n,i]),this.a.set(o,[e,t]),!0)},B:function(e,t){if(e=r(e,t),this.a.has(e)){var n=this.a.get(e);t=r(t=n[0],n=n[1]),this.a.delete(e),this.a.delete(t)}},s:function(e,t,n){null==n&&(n={}),this.h(e,t);var i=r(e,t),s=e.join("");this.f.set(i,n),this.m.has(s)||this.m.set(s,[]),(n=this.m.get(s)).push(t),n.length>this.N&&(t=n.shift(),this.h(e,t))},h:function(e,t){var n,i=r(e,t);if(this.f.has(i)){this.f.delete(i),e=e.join(""),t=t.join("");var s=0;for(n=(i=this.m.get(e)).length;s<n;++s){var o=s;if(i[s].join("")===t)return void i.splice(o,1)}i.length||this.m.delete(e)}},L:function(e,t,n,i){var s,o=this,a=r(e,t),c={address:e,segment_id:t,target_address:n,plaintext:i,ciphertext:null},l=this.c("encrypt",c).then(function(){var e=c.ciphertext;if(!(e instanceof Uint8Array)||e.length!==i.length+o.u)throw"Encryption failed";return e});return s=this.b.has(a)?this.b.get(a):[n],(s=function(e){var t,n,i=[],r=0;for(n=(t=s).length;r<n;++r){var o=t[r];if(i.push(o),e===o.join(","))break}return i}.call(this,n.join(","))).reverse().forEach(function(n){return l=l.then(function(i){return o.G(e,t,n,i)})}),l},K:function(e,t,n){var i,s=this,o=r(e,t);i=this.b.has(o)?this.b.get(o):[e];var a=Promise.reject(),c={address:e,segment_id:t,target_address:null,ciphertext:n,plaintext:null};return i.forEach(function(i,r){a=a.catch(function(){return c.target_address=i,0<r?s.F(e,t,i,c.ciphertext).then(function(e){return c.ciphertext=e,s.c("decrypt",c)}):s.c("decrypt",c)}).then(function(){var e=c.plaintext;if(!(e instanceof Uint8Array)||e.length!==n.length-s.u)throw"Decryption failed";return c})}),a},R:function(e,t,n){var i=r(e,t);return this.b.has(i)||this.g.has(i)?this.F(e,t,e,n):(t=(e=this.a.get(i))[0],this.G(t,e[1],t,n))},G:function(e,t,n,i){var r={address:e,segment_id:t,target_address:n,unwrapped:i,wrapped:null};return this.c("wrap",r).then(function(){var e=r.wrapped;if(!(e instanceof Uint8Array)||e.length!==i.length)throw"Wrapping failed";return e})},F:function(e,t,n,i){var r={address:e,segment_id:t,target_address:n,wrapped:i,unwrapped:null};return this.c("unwrap",r).then(function(){var e=r.unwrapped;if(!(e instanceof Uint8Array)||e.length!==i.length)throw"Unwrapping failed";return e})}},d.prototype=Object.assign(Object.create(o.prototype),d.prototype),d.prototype.c=d.prototype.fire,d.prototype.process_packet=d.prototype.X,d.prototype.confirm_outgoing_segment_established=d.prototype.U,d.prototype.confirm_incoming_segment_established=d.prototype.T,d.prototype.confirm_extended_path=d.prototype.S,d.prototype.create_request=d.prototype.H,d.prototype.create_response=d.prototype.V,d.prototype.extend_request=d.prototype.W,d.prototype.destroy=d.prototype.I,d.prototype.data=d.prototype.data,d.prototype.get_max_command_data_length=d.prototype.i,Object.defineProperty(d.prototype,"constructor",{value:d}),d}var a=0,c=1,l=2,u=3,h=10;define("ronion",["async-eventer"],o)}.call(this),function(){function e(e,r,s,o,a,c){function l(r,s,_){var p=this;if(null==s&&(s=10),null==_&&(_=10),!(this instanceof l))return new l(r,s,_);c.call(this),this.o=_,this.c=d(),this.h=d(),this.f=d(),this.j=d(),this.i=d(),this.m=d(),this.a=o(i,t,n,s),this.g=this.a.get_max_command_data_length(),this.a.on("activity",function(e,t){p.fire("activity",e,t)}).on("create_request",function(t,n,i){if(!p.b){var s=h(t,n);if(!p.c.has(s)){var o=e.Encryptor(!1,r);try{o.put_handshake_message(i)}catch(e){return}p.a.create_response(t,n,o.get_handshake_message()),p.a.confirm_incoming_segment_established(t,n),p.j.set(s,a.Multiplexer(f,p.g)),p.i.set(s,a.Demultiplexer(f,p.g)),o.ready()&&(n=o.get_rewrapper_keys().map(e.Rewrapper),(i=d()).set(t,o),(o=d()).set(t,n),p.c.set(s,i),p.h.set(s,o),p.f.set(s,t))}}}).on("send",function(e,t){p.fire("send",e,t)}).on("data",function(e,t,n,i,r){if(!p.b){var s=h(e,t),o=p.f.get(s);u(n,o)&&(n=p.i.get(s))&&(n.feed(r),n.have_more_data()&&(r=n.get_data(),p.fire("data",e,t,i,r)))}}).on("encrypt",function(e){var t;if(!p.b){var n=e.address,i=e.segment_id,r=e.target_address,s=e.plaintext;n=h(n,i),(r=null!=(t=p.c.get(n))?t.get(r):void 0)&&r.ready()&&(e.ciphertext=r.encrypt(s))}}).on("decrypt",function(e){var t;if(!p.b){var n=e.address,i=e.segment_id,r=e.target_address,s=e.ciphertext;if(n=h(n,i),(i=null!=(t=p.c.get(n))?t.get(r):void 0)&&i.ready())try{e.plaintext=i.decrypt(s)}catch(e){i.destroy(),p.c.get(n).delete(r)}}}).on("wrap",function(e){var t,n;if(!p.b){var i=e.address,r=e.segment_id,s=e.target_address,o=e.unwrapped;i=h(i,r),(s=null!=(t=p.h.get(i))&&null!=(n=t.get(s))?n[0]:void 0)&&(e.wrapped=s.wrap(o))}}).on("unwrap",function(e){var t,n;if(!p.b){var i=e.address,r=e.segment_id,s=e.target_address,o=e.wrapped;i=h(i,r),(s=null!=(t=p.h.get(i))&&null!=(n=t.get(s))?n[1]:void 0)&&(e.unwrapped=s.unwrap(o))}})}var u=s.are_arrays_equal,h=s.concat_arrays,d=s.ArrayMap,_=s.timeoutSet,f=r.MAX_DATA_SIZE;return l.prototype={process_packet:function(e,t){this.b||this.a.process_packet(e,t)},construct_routing_path:function(t){var n=this;return this.b?Promise.reject():(t=t.slice(),new Promise(function(i,r){function s(r,o,c){var h,d,E;if(u(l,r)&&u(v,o)){clearTimeout(b),n.a.off("create_response",s);try{y.put_handshake_message(c)}catch(e){return void g()}y.ready()?(m.set(l,y.get_rewrapper_keys().map(e.Rewrapper)),n.a.confirm_outgoing_segment_established(l,v),n.j.set(w,a.Multiplexer(f,n.g)),n.i.set(w,a.Demultiplexer(f,n.g)),function r(){function s(t,i,o){if(u(l,t)&&u(v,i))if(n.a.off("extend_response",s),clearTimeout(E),o.length){try{d.put_handshake_message(o)}catch(e){return void g()}d.ready()?(m.set(h,d.get_rewrapper_keys().map(e.Rewrapper)),n.a.confirm_extended_path(l,v),r()):g()}else g()}var o;t.length?(n.a.on("extend_response",s),h=t.shift(),(o=e.convert_public_key(h))?(d=e.Encryptor(!0,o),p.set(h,d),E=_(n.o,function(){n.a.off("extend_response",s),g()}),n.a.extend_request(l,v,h,d.get_handshake_message())):g()):(n.m.set(w,[l,v]),i(v))}()):g()}}var o,c=t[t.length-1],l=t.shift(),p=d(),m=d(),g=function(){n.l(l,v),r("Routing path creation failed")};if(o=e.convert_public_key(l)){var y=e.Encryptor(!0,o);p.set(l,y),n.a.on("create_response",s);var b=_(n.o,function(){n.a.off("create_response",s),g()}),v=n.a.create_request(l,y.get_handshake_message()),w=h(l,v);n.c.set(w,p),n.h.set(w,m),n.f.set(w,c)}else g()}))},destroy_routing_path:function(e,t){this.l(e,t)},get_max_packet_data_size:function(){return this.g},send_data:function(e,t,n,i){if(!(this.b||i.length>f)){var r=h(e,t),s=this.f.get(r);if(r=this.j.get(r))for(r.feed(i);r.have_more_blocks();)i=r.get_block(),this.a.data(e,t,s,n,i)}},destroy:function(){var e=this;this.b||(this.b=!0,this.m.forEach(function(t){e.l(t[0],t[1])}))},l:function(e,t){e=h(e,t),(t=this.c.get(e))&&(t.forEach(function(e){e.destroy()}),this.c.delete(e),this.h.delete(e),this.f.delete(e),this.j.delete(e),this.i.delete(e),this.m.delete(e))}},l.prototype=Object.assign(Object.create(c.prototype),l.prototype),Object.defineProperty(l.prototype,"constructor",{value:l}),{ready:e.ready,Router:l,MAX_DATA_SIZE:f}}var t=32,n=16,i=509;define("@detox/routing",["@detox/crypto","@detox/transport","@detox/utils","ronion","fixed-size-multiplexer","async-eventer"],e)}.call(this),function(){function e(e,t){var n=new Uint8Array(e.length+A);return n.set(e),n.set(t,e.length),n}function t(e,t,n,i){var r=new Uint8Array(2*k+n.length+A);return r.set(e),r.set(t,k),r.set(n,2*k),r.set(i,2*k+n.length),r}function n(e){return[e.subarray(0,k),e.subarray(k,2*k),e.subarray(2*k,e.length-A),e.subarray(e.length-A)]}function i(e){return[e.subarray(0,A),e.subarray(A,A+k),e.subarray(A+k)]}function r(r,j,q,F,H,W,V,G,Y){function $(e){return r.create_keypair(e)}function X(e,n,h,d,N){var R=this;if(null==h&&(h=1),null==d&&(d=2),null==N&&(N={}),!(this instanceof X))return new X(e,n,h,d,N);G.call(this),this.a=Object.assign({dht_keypair_seed:null,state_history_size:1e3,values_cache_size:1e3,fraction_of_nodes_from_same_peer:.2,lookup_number:Math.max(d,5),max_pending_segments:10,aware_of_nodes_limit:1e3,min_number_of_peers_for_ready:d,connected_nodes_limit:50},N,{timeouts:Object.assign({},P,N.timeouts||{})}),this.m=ce(),this.V=$(this.a.dht_key_seed),this.h=this.V.ed25519.public,this.L=this.V.ed25519.private,this.N=H.MAX_DATA_SIZE,this.wa=H.MAX_COMPRESSED_DATA_SIZE,this.K=0,this.j=ce(),this.J=ce(),this.M=le(),this.s=ce(),this.l=ce(),this.o=ce(),this.T=ce(),this.Y=ce(),this.w=ce(),this.v=ce(),this.D=ce(),this.I=le(),this.C=ce(),this.X=ce(),this.U=ce(),this.A=ce(),this.F=le(),this.na=oe(this.a.timeouts.LAST_USED_TIMEOUT,function(){var e=+new Date-1e3*R.a.timeouts.LAST_USED_TIMEOUT;R.Y.forEach(function(t,n){if(t<e){if(R.s.has(n)){var i=R.s.get(n);t=i[0],i=i[1],R.la(t,i)}R.Y.delete(n)}}),R.T.forEach(function(t,n){t<e&&(R.T.delete(n),R.c.destroy_connection(n))})}),this.va=oe(this.a.timeouts.LAST_USED_TIMEOUT/5*4,function(){R.m.forEach(function(e,t){var n=e[1],i=e[3];e=e[4],i.size<n&&e&&(e<(n=+new Date-3*R.a.timeouts.CONNECTION_TIMEOUT)&&R.ea(t)),i.forEach(function(e){e=re(t,e);var n=R.l.get(e);e=n[0],n=n[1],R.ka(e,n)&&(e=re(e,n),R.I.add(e))})})}),this.sa=oe(this.a.timeouts.GET_MORE_AWARE_OF_NODES_INTERVAL,function(){R.xa()&&R.qa()}),this.c=H.Transport(this.h,n,h,c,this.a.timeouts.CONNECTION_TIMEOUT).on("connected",function(e){R.f.add_peer(e),R.b.add_connected_node(e),R.i&&R.R(e,_,J(R.i))}).on("disconnected",function(e){R.f.del_peer(e),R.b.del_connected_node(e),R.M.delete(e)}).on("data",function(e,t,n){R.$(e,!1),t>=l?R.i&&t!==_||R.ua(e,t-l,n):t===s?R.i||R.g.process_packet(e,n):t>=a?R.f.receive(e,t-a,n):R.i&&t!==o||R.ta(e,t,n)}),this.f=j.DHT(this.h,d,this.a.state_history_size,this.a.values_cache_size,this.a.fraction_of_nodes_from_same_peer,this.a.timeouts).on("peer_error",function(e){R.H(e)}).on("peer_warning",function(){}).on("connect_to",function(e,n){return new Promise(function(i,s){function a(){s()}if(R.b.has_connected_node(e))i();else{var c=R.c.get_connection(e);if(!c){if(!(c=R.c.create_connection(!0,e)))return void s();c.on("signal",function(i){var s=r.sign(i,R.h,R.L);i=t(R.h,e,i,s),R.P(n,o,i)})}c.once("connected",function(){c.off("disconnected",a),i()}).once("disconnected",a)}})}).on("send",function(e,t,n){R.ya(e,t,n)}).on("peer_updated",function(e,t){R.b.set_peer(e,t)}),this.g=F.Router(this.V.x25519.private,this.a.max_pending_segments,this.a.timeouts.ROUTING_PATH_SEGMENT_TIMEOUT).on("activity",function(e,t){var n=re(e,t);R.s.has(n)||R.s.set(n,[e,t]),R.Y.set(n,+new Date)}).on("send",function(e,t){R.za(e,t)}).on("data",function(e,t,n,s){var o,a=re(e,t);switch(n){case f:var c=R.Ba(s);if(!c)break;R.v.has(c)&&clearInterval(R.v.get(c)[2]),n=oe(R.a.timeouts.ANNOUNCE_INTERVAL,function(){R.s.has(a)&&R.ha(s)}),R.v.set(c,[e,t,n]),R.ha(s);break;case p:var l=s;if(l.length!==k)break;var h=function(n,i){var r,s=l,o=r=new Uint8Array(1+k+i.length*k);for(o.set([n]),o.set(s,1),n=0,s=i.length;n<s;++n){o=n;var a=i[n];r.set(a,1+k+o*k)}R.u(e,t,m,r)};R.oa(l).then(function(e){e.length?h(O,e):h(C,[])}).catch(function(e){ae(e),h(C,[])});break;case g:var d=[s.subarray(0,k),s.subarray(k,2*k),s.subarray(2*k,3*k),s.subarray(3*k)],_=d[0];if(n=d[1],l=d[2],c=d[3],R.w.has(_))break;var S=se(R.a.timeouts.CONNECTION_TIMEOUT,function(){R.w.delete(_)});R.w.set(_,[e,t,l,S]),R.R(n,u,function(e,t){var n=new Uint8Array(k+t.length);return n.set(e),n.set(t,k),n}(l,c));break;case b:c=(d=i(s))[0],_=d[1];var P=d[2];if(!(S=R.w.get(_)))break;n=S[0];var N=S[1];if(l=S[2],S=S[3],!r.verify(c,_,l))break;R.w.delete(_),clearTimeout(S),R.u(n,N,v,s),c=re(n,N),R.D.set(a,[n,N]),R.D.set(c,[e,t]);break;case y:if(!(n=R.o.get(a)))break;var M=n[0];if(n=n[1],!R.m.has(M))break;var D=(d=R.m.get(M))[0];if(!d[3].has(n))break;try{c=(S=r.one_way_decrypt(D.x25519.private,s)).subarray(0,A),d=[(N=S.subarray(A)).subarray(0,k),N.subarray(k,2*k),N.subarray(2*k,3*k),N.subarray(3*k,3*k+x),N.subarray(3*k+x,3*k+x+T),N.subarray(3*k+x+T,3*k+x+T+k)],l=d[0];var L=d[1];_=d[2],P=d[3];var z=d[4],B=d[5],U=re(n,N);if(r.verify(c,U,l)){var j=re(M,l);if(!R.l.has(j)){if(R.j.has(j)){var q=R.j.get(j);if(q.S&&!q.B){var F=0;for(o=M.length;F<o;++F){var H=F,W=M[F];if(W!==l[H]){if(W>l[H])return;q.B=!0;break}}}}else q={S:!1},R.j.set(j,q);s={real_public_key:M,target_id:l,secret:B,application:z,number_of_intermediate_nodes:null},R.fire("introduction",s).then(function(){var e=s.number_of_intermediate_nodes;if(null===e)throw"No event handler for introduction";if(!e)throw Error("Direct connections are not yet supported");if(e=R.b.get_nodes_for_routing_path(e,[L])){e.push(L);var t=e[0];R.ba(e).then(function(e){var n=r.Encryptor(!1,D.x25519.private);n.put_handshake_message(P);var i=n.get_handshake_message();R.C.set(j,n),R.ca(M,l,t,e),R.j.delete(j),R.ja(M,l),e=r.sign(_,M,D.ed25519.private),R.Z(M,l,b,function(e,t,n){var i=new Uint8Array(A+k+x);return i.set(e),i.set(t,A),i.set(n,A+k),i}(e,_,i))}).catch(function(){R.j.delete(j),q.S&&q.B&&R.fire("connection_failed",M,l,I)})}}).catch(function(e){ae(e),R.j.delete(j),q.S&&q.B&&R.fire("connection_failed",M,l,I)})}}}catch(e){ae(c=e)}break;case w:if(R.D.has(a))n=(d=R.D.get(a))[0],N=d[1],R.u(n,N,w,s);else if(R.o.has(a)&&(d=R.o.get(a),M=d[0],l=d[1],j=re(M,l),n=R.C.get(j))&&(c=R.U.get(j)))for(n=n.decrypt(s),c.feed(n);c.have_more_data();)n=(S=c.get_data())[0],R.fire("data",M,l,n,S.subarray(1));break;case E:R.o.has(a)&&R.I.has(a)?R.I.delete(a):R.ka(e,t)}}),this.b=q(e,this.a.aware_of_nodes_limit,this.a.timeouts.STALE_AWARE_OF_NODE_TIMEOUT).on("connected_nodes_count",function(e){if(R.K=e,R.fire("connected_nodes_count",R.K),e>R.a.connected_nodes_limit){var t=le();R.D.forEach(function(e){t.add(e[0])}),(e=R.b.get_candidates_for_disconnection(t)).length&&(e=ne(e),R.c.destroy_connection(e))}}).on("aware_of_nodes_count",function(e){R.fire("aware_of_nodes_count",e)}).on("peer_error",function(e){R.H(e)}),this.ga=this.g.get_max_packet_data_size()-S,e.length?this.f.once("peer_updated",function(){R.fire("ready")}):setTimeout(function(){R.fire("ready")}),this.G()}null==Y&&(Y=window.fetch);var Z=W.hex2array,K=W.array2hex,J=W.string2array,Q=W.array2string,ee=W.random_bytes,te=W.random_int,ne=W.pull_random_item_from_array,ie=W.are_arrays_equal,re=W.concat_arrays,se=W.timeoutSet,oe=W.intervalSet,ae=W.error_handler,ce=W.ArrayMap,le=W.ArraySet,ue=W.sample,he=new Uint8Array(0),de=new Uint8Array(k);return X.CONNECTION_ERROR_CANT_FIND_INTRODUCTION_NODES=N,X.CONNECTION_ERROR_NOT_ENOUGH_INTERMEDIATE_NODES=R,X.CONNECTION_ERROR_NO_INTRODUCTION_NODES=C,X.CONNECTION_ERROR_CANT_CONNECT_TO_RENDEZVOUS_NODE=I,X.CONNECTION_ERROR_OUT_OF_INTRODUCTION_NODES=M,X.CONNECTION_PROGRESS_CONNECTED_TO_RENDEZVOUS_NODE=D,X.CONNECTION_PROGRESS_FOUND_INTRODUCTION_NODES=L,X.CONNECTION_PROGRESS_INTRODUCTION_SENT=z,X.ANNOUNCEMENT_ERROR_NOT_ENOUGH_INTERMEDIATE_NODES=B,X.ANNOUNCEMENT_ERROR_NO_INTRODUCTION_NODES_CONFIRMED=U,X.prototype={start_bootstrap_node:function(i,s,a,c,l){var u=this;null==c&&(c=s),null==l&&(l=a);var h=r.create_keypair(i).ed25519;this.W=require("http").createServer(function(i,s){function a(e,t){_||(s.writeHead(e),t&&s.write(Buffer.from(t)),s.end())}var c;s.setHeader("Access-Control-Allow-Origin","*"),s.setHeader("Connection","close");var l=i.headers["content-length"];if("POST"===i.method&&l&&l<=u.wa){var d=[],_=!1;i.on("data",function(e){d.push(e)}).on("end",function(){var i,s=n(d=re(d)),l=s[0],_=s[1],f=s[2],p=s[3];if(r.verify(p,f,l)&&ie(_,de))if(i=u.K&&te(0,u.K)?null!=(s=u.b.get_random_connected_nodes(1))?s[0]:void 0:null){var m=re(l,i);u.J.has(m)?a(503):(f=t(l,i,f,p),u.P(i,o,f),u.J.set(m,function(t,n,s){clearTimeout(c),r.verify(n,t,i)?(t=e(s,r.sign(s,h.public,h.private)),a(200,Buffer.from(t))):a(502)}),c=se(u.a.timeouts.CONNECTION_TIMEOUT,function(){u.J.delete(m),a(504)}))}else(s=u.c.create_connection(!1,l))?s.once("signal",function(n){var i=r.sign(n,u.h,u.L);return n=e(n=t(u.h,l,n,i),r.sign(n,h.public,h.private)),a(200,Buffer.from(n)),!1}).signal(f):a(503);else a(400)}).on("close",function(){clearTimeout(c),_=!0})}else a(400)}),this.W.on("error",ae).listen(a,s,function(){var e=K(h.public);u.i=e+":"+c+":"+l}),this.da()},get_bootstrap_nodes:function(){return this.b.get_bootstrap_nodes()},ma:function(e){function i(){--s||"function"==typeof e&&e()}var s,o=this,a=this.get_bootstrap_nodes();(s=a.length)?a.forEach(function(e){function s(){i()}var a;e=e.split(":");var c=Z(e[0]),l=e[1]+":"+e[2],u=ee(k);(a=o.c.create_connection(!0,u))&&a.on("signal",function(e){var i=r.sign(e,o.h,o.L),s={method:"POST",headers:{Connection:"close"},body:t(o.h,de,e,i).buffer};Y("https://"+l,s).catch(function(e){if("undefined"==typeof location||"http:"===location.protocol)return Y("http://"+l,s);throw e}).then(function(e){if(!e.ok)throw"Request failed, status code "+e.status;return e.arrayBuffer()}).then(function(e){return new Uint8Array(e)}).then(function(e){var t=(e=[e.subarray(0,e.length-A),e.subarray(e.length-A)])[0];if(e=e[1],!r.verify(e,t,c))throw"Bad bootstrap node response";t=(e=n(t))[0];var i=e[1],s=e[2];if(e=e[3],!r.verify(e,s,t)||!ie(i,o.h))throw"Bad response";if(o.c.get_connection(t))throw"Already connected";o.c.update_peer_id(u,t),a.signal(s)}).catch(function(){a.destroy()})}).once("connected",function(){a.off("disconnected",s),i()}).once("disconnected",s)}):"function"==typeof e&&e()},announce:function(e,t,n){if(this.i)return null;var i=(e=$(e)).ed25519.public;return this.m.has(i)?null:(this.m.set(i,[e,t,n,le()]),this.ea(i),i)},ea:function(e){function t(t){var n;if(t&&p.push(t),!--_)if(p.length){p=p.concat(h);var i=s.pa(e,a.ed25519.private,p),r=0;for(n=p.length;r<n;++r)t=p[r],s.Z(e,t,f,i);s.fire("announced",e)}else s.aa(e,1),s.fire("announcement_failed",e,U)}function n(){var e;(e=this.b.get_nodes_for_routing_path(l+1,h))&&d.push(e)}function i(n){var i=this,r=n[0],s=n[n.length-1];this.ba(n).then(function(n){i.ca(e,s,r,n),u.add(s),t(s)}).catch(function(){t()})}var r,s=this,o=this.m.get(e),a=o[0],c=o[1],l=o[2],u=o[3],h=[];if(u.forEach(function(e){h.push(e)}),c-=h.length){this.aa(e,+new Date);var d=[];for(o=0;o<l;++o)n.call(this,o);if(d.length){var _=d.length,p=[];for(function(){var e,t,n=[],i=0;for(t=(e=d).length;i<t;++i)r=e[i],n.push(r[r.length-1])}(),o=0,c=d.length;o<c;++o)i.call(this,d[o])}else this.aa(e,1),this.fire("announcement_failed",e,B)}},aa:function(e,t){this.m.get(e)[4]=t},connect_to:function(e,t,n,s,o){function a(e){d.B||(c.j.delete(h),c.fire("connection_failed",u,t,e))}var c=this;if(this.i)return null;if(!o)throw Error("Direct connections are not yet supported");var l=$(e),u=l.ed25519.public;if(ie(u,t))return null;var h=re(u,t);if(this.j.has(h))return u;var d={S:!0,B:!1};if(this.j.set(h,d),this.l.has(h))return null;if(!(e=this.b.get_nodes_for_routing_path(o)))return a(R),null;var _=e[0],f=e[e.length-1];return this.ba(e).then(function(e){function o(o,p,b,w){if(ie(_,o)&&ie(e,p)&&b===m){p=(o=function(e){var t,n=e[0],i=e.subarray(1,1+k),r=[],s=0;for(t=(e=e.subarray(1+k)).length/k;s<t;++s){var o=s;r.push(e.subarray(o*k,(o+1)*k))}return[n,i,r]}(w))[0],b=o[1];var E=o[2];ie(t,b)&&(clearTimeout(y),p!==O?(c.g.destroy_routing_path(_,e),c.b.del_first_node_in_routing_path(_),a(p)):(c.fire("connection_progress",u,t,L),function o(){function p(n,s,o,a){ie(_,n)&&ie(e,s)&&o===v&&(n=(o=i(a))[0],s=o[1],o=o[2],ie(s,y)&&r.verify(n,y,t)&&(w.put_handshake_message(o),c.C.set(h,w),clearTimeout(P),c.g.off("data",p),c.ca(u,t,_,e),c.j.delete(h),c.ja(u,t)))}if(!d.B)if(E.length){var m=ne(E),y=ee(k),b=r.convert_public_key(t),w=r.Encryptor(!0,b),A=w.get_handshake_message();A=function(e,t,n,i,r,s){var o=new Uint8Array(3*k+x+T+k);return o.set(e),o.set(t,k),o.set(n,2*k),o.set(i,3*k),o.set(r,3*k+x),o.set(s,3*k+x+T),o}(u,f,y,A,n,s);var S=re(m,A);S=r.sign(S,u,l.ed25519.private),A=re(S,A),b=r.one_way_encrypt(b,A),c.g.on("data",p),c.u(_,e,g,function(e,t,n,i){var r=new Uint8Array(3*k+i.length);return r.set(e),r.set(t,k),r.set(n,2*k),r.set(i,3*k),r}(y,m,t,b)),c.fire("connection_progress",u,t,z);var P=se(c.a.timeouts.CONNECTION_TIMEOUT,function(){c.g.off("data",p),w.destroy(),o()})}else c.g.destroy_routing_path(_,e),c.b.del_first_node_in_routing_path(_),a(M)}()))}}c.fire("connection_progress",u,t,D),c.g.on("data",o),c.u(_,e,p,t);var y=se(c.a.timeouts.CONNECTION_TIMEOUT,function(){c.g.off("data",o),c.g.destroy_routing_path(_,e),c.b.del_first_node_in_routing_path(_),a(N)})}).catch(function(){a(I)}),u},get_max_data_size:function(){return this.N},send_to:function(e,t,n,i){var r,s,o=this;if(!this.i){var a=re(e,t);!(r=this.C.get(a))||i.length>this.N||!(s=this.X.get(a))||(n=re([n],i),s.feed(n),this.A.has(a)||this.A.set(a,setTimeout(function(){for(o.A.delete(a);s.have_more_blocks();){var n=s.get_block();n=r.encrypt(n),o.Z(e,t,w,n)}})))}},destroy:function(){this.fa||(this.fa=!0,this.i?this.W&&this.W.close():this.da(),clearTimeout(this.ia),this.c.destroy(),this.f.destroy(),this.b.destroy())},da:function(){var e=this;clearInterval(this.na),clearInterval(this.va),clearInterval(this.sa),this.s.forEach(function(t){e.la(t[0],t[1])}),this.w.forEach(function(e){clearTimeout(e[3])}),this.g.destroy()},xa:function(){return!this.i&&this.b.more_aware_of_nodes_needed()},qa:function(){var e,t;if(e=this.b.get_random_connected_nodes(5)){var n=0;for(t=e.length;n<t;++n){var i=e[n];this.ra(i)}}},ra:function(e){this.M.add(e),this.R(e,h,he)},G:function(){var e=this;if(!this.fa)if(this.f.get_peers().length<this.get_bootstrap_nodes().length)this.ma(function(){e.f.get_peers().length?e.G():se(1,function(){e.G()})});else{var t=ue(this.a.timeouts.RANDOM_LOOKUPS_INTERVAL);this.ia=se(this.ia?t:0,function(){e.f.lookup($(null).ed25519.public,e.a.lookup_number).then(function(){e.G()}).catch(function(){e.G()})})}},ba:function(e){var t=this,n=e[0];return(e=this.g.construct_routing_path(e)).catch(function(e){ae(e),t.b.del_first_node_in_routing_path(n)}),e},ca:function(e,t,n,i){var r=re(n,i);if(!this.o.has(r)){var s=re(e,t);this.l.set(s,[n,i]),this.o.set(r,[e,t]),this.X.set(s,V.Multiplexer(this.N,this.ga)),this.U.set(s,V.Demultiplexer(this.N,this.ga)),this.fire("routing_paths_count",this.l.size)}},la:function(e,t){var n=this,i=re(e,t);if(this.s.has(i)&&(this.b.del_first_node_in_routing_path(e),this.s.delete(i),this.g.destroy_routing_path(e,t),this.D.delete(i),this.I.delete(i),this.v.forEach(function(e,t){var r=e[0],s=e[1];e=e[2],r=re(r,s),ie(i,r)&&(clearInterval(e),n.v.delete(t))}),this.o.has(i))){e=(t=this.o.get(i))[0],t=t[1];var r=re(e,t);if(this.o.delete(i),this.l.delete(r),this.A.has(r)&&(clearTimeout(this.A.get(r)),this.A.delete(r)),this.m.has(e)){var s=this.m.get(e)[3];s.delete(t)}(s=this.C.get(r))&&(s.destroy(),this.C.delete(r)),this.X.delete(r),this.U.delete(r),this.Aa(e,t),this.fire("routing_paths_count",this.l.size)}},ja:function(e,t){var n=re(e,t);this.F.add(n),this.fire("connected",e,t),this.fire("application_connections_count",this.F.size)},Aa:function(e,t){var n=re(e,t);this.F.has(n)&&(this.F.delete(n),this.fire("disconnected",e,t),this.fire("application_connections_count",this.F.size))},ta:function(e,i,s){var a,c=this;switch(i){case o:var l=n(s),u=l[0],h=l[1];if(i=l[2],l=l[3],r.verify(l,i,u)){var d=re(h,u);if(a=this.J.get(d))this.J.delete(d),a(i,l,s);else if(this.b.has_connected_node(h)&&ie(e,u))this.P(h,o,s);else if(ie(h,this.h)){if(!(s=this.c.get_connection(u))){if(!(s=this.c.create_connection(!1,u)))break;s.on("signal",function(n){var i=r.sign(n,c.h,c.L);n=t(c.h,u,n,i),c.P(e,o,n)})}s.signal(i)}}else this.H(e)}},ua:function(e,t,n){var i;switch(t){case u:if(t=(n=[n.subarray(0,k),n.subarray(k)])[0],e=n[1],!this.v.has(t))break;t=(n=this.v.get(t))[0],n=n[1],this.u(t,n,y,e);break;case h:n=re(this.b.get_aware_of_nodes(e)),this.R(e,d,n);break;case d:if(!this.M.has(e))break;if(this.M.delete(e),!n.length||0!=n.length%k){this.H(e);break}t=n.length/k;var r=[];for(i=0;i<t;++i){var s=i;s=n.subarray(s*k,(s+1)*k),ie(this.h,s)&&this.H(e),r.push(s)}this.b.set_aware_of_nodes(e,r);break;case _:this.b.add_bootstrap_node(e,Q(n))}},P:function(e,t,n){this.O(e,t,n)},ya:function(e,t,n){this.O(e,t+a,n)},za:function(e,t){this.O(e,s,t)},R:function(e,t,n){this.O(e,t+l,n)},O:function(e,t,n){function i(i){ie(e,i)&&(r.$(e,!0),r.c.send(e,t,n))}var r=this;this.b.has_connected_node(e)?(this.$(e,!0),this.c.send(e,t,n)):(this.c.on("connected",i),this.f.lookup(e,this.a.lookup_number).then(function(){r.c.off("connected",i)}).catch(function(){r.c.off("connected",i)}))},Z:function(e,t,n,i){e=re(e,t),this.l.has(e)&&(e=(t=this.l.get(e))[0],t=t[1],this.u(e,t,n,i))},u:function(e,t,n,i){return 0===i.length&&(i=new Uint8Array(1)),this.g.send_data(e,t,n,i)},ka:function(e,t){var n=re(e,t);return!(this.I.has(n)||!this.s.has(n))&&(this.u(e,t,E,he),!0)},$:function(e){this.T.set(e,+new Date)},pa:function(e,t,n){return re(this.f.make_mutable_value(e,t,parseInt(+new Date/1e3,10),re(n)))},Ba:function(e){var t=e.subarray(0,k);return!(e=this.f.verify_value(t,e.subarray(k)))||e[1].length%k?null:t},ha:function(e){this.f.put_value(e.subarray(0,k),e.subarray(k),this.a.lookup_number)},oa:function(e){return this.f.get_value(e,this.a.lookup_number).then(function(e){var t;if(0!=e.length%k)throw"";var n=[],i=0;for(t=e.length/k;i<t;++i){var r=i;n.push(e.subarray(r*k,(r+1)*k))}return n})},H:function(e){this.f.del_peer(e),this.c.destroy_connection(e)}},X.prototype=Object.assign(Object.create(G.prototype),X.prototype),Object.defineProperty(X.prototype,"constructor",{value:X}),{ready:function(e){r.ready(function(){j.ready(function(){F.ready(function(){e()})})})},generate_seed:function(){return ee(k)},Core:X}}var s,o,a=10,c=s=20,l=21,u=o=0,h=1,d=2,_=3,f=0,p=1,m=2,g=3,y=4,b=5,v=6,w=7,E=8,k=32,A=64,x=48,S=16,T=64,P={CONNECTION_TIMEOUT:10,LAST_USED_TIMEOUT:60,ANNOUNCE_INTERVAL:300,STALE_AWARE_OF_NODE_TIMEOUT:300,GET_MORE_AWARE_OF_NODES_INTERVAL:30,RANDOM_LOOKUPS_INTERVAL:60,ROUTING_PATH_SEGMENT_TIMEOUT:10},O=0,C=1,N=2,R=3,I=4,M=5,D=0,L=1,z=2,B=0,U=1;define("@detox/core",["@detox/crypto","@detox/dht","@detox/nodes-manager","@detox/routing","@detox/transport","@detox/utils","fixed-size-multiplexer","async-eventer"],r)}.call(this),function(){function e(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(0,!1)}function t(e){var t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!1),t}function n(n,h,d,_){function f(t,n,d,m){var b=this;if(null==n&&(n=null),null==d&&(d=3),null==m&&(m=3),!(this instanceof f))return new f(t,n,d,m);_.call(this),this.g=t,this.m=n||p(u),this.A=h.create_keypair(this.m),this.o=this.A.ed25519.public,this.w=d,this.l=m,this.v=this.g.get_max_data_size(),this.c=w(),this.h=w(),this.i=w(),this.j=0,this.g.once("announced",function(e){!b.a&&b.b(e)&&b.fire("announced")}).on("connected",function(e,t){!b.a&&b.b(e)&&(b.c.add(t),b.fire("connected",t))}).on("connection_progress",function(e,t,n){!b.a&&b.b(e)&&b.fire("connection_progress",t,n)}).on("connection_failed",function(e,t,n){!b.a&&b.b(e)&&b.fire("connection_failed",t,n)}).on("disconnected",function(e,t){!b.a&&b.b(e)&&(b.c.delete(t),b.h.delete(t),b.i.delete(t),b.fire("disconnected",t))}).on("introduction",function(e){if(!b.a&&b.b(e.real_public_key)&&y(x,e.application.subarray(0,x.length)))return b.fire("introduction",e.target_id,e.secret,e.application).then(function(){e.number_of_intermediate_nodes=Math.max(b.l-1,1)})}).on("data",function(t,n,h,d){if(!b.a&&b.b(t)&&(h===r||h===s||b.s(n)))switch(h){case i:break;case r:if(d.length!==u)break;b.fire("secret",n,d).then(function(){b.i.add(n),b.f(n,s,new Uint8Array(0))}).catch(v);break;case s:if(!b.h.has(n))break;b.fire("secret_received",n);break;case o:b.fire("nickname",n,g(d),d);break;case a:if(9>d.length)break;h=e(t=d.subarray(0,8));var _=d.subarray(8,16);_=e(_),d=d.subarray(16),b.f(n,c,t),b.fire("text_message",n,h,_,g(d),d);break;case c:b.fire("text_message_received",n,e(d));break;default:h<l||b.fire("custom_command",n,h-l,d)}})}var p=d.random_bytes,m=d.string2array,g=d.array2string,y=d.are_arrays_equal,b=d.concat_arrays,v=d.error_handler,w=d.ArraySet,E=d.base58_encode,k=d.base58_decode,A=h.blake2b_256,x=m("detox-chat-v0");return f.CONNECTION_ERROR_CANT_FIND_INTRODUCTION_NODES=n.CONNECTION_ERROR_CANT_FIND_INTRODUCTION_NODES,f.CONNECTION_ERROR_NOT_ENOUGH_INTERMEDIATE_NODES=n.CONNECTION_ERROR_NOT_ENOUGH_INTERMEDIATE_NODES,f.CONNECTION_ERROR_NO_INTRODUCTION_NODES=n.CONNECTION_ERROR_NO_INTRODUCTION_NODES,f.CONNECTION_ERROR_CANT_CONNECT_TO_RENDEZVOUS_POINT=n.CONNECTION_ERROR_CANT_CONNECT_TO_RENDEZVOUS_POINT,f.CONNECTION_ERROR_OUT_OF_INTRODUCTION_NODES=n.CONNECTION_ERROR_OUT_OF_INTRODUCTION_NODES,f.CONNECTION_PROGRESS_CONNECTED_TO_RENDEZVOUS_NODE=n.CONNECTION_PROGRESS_CONNECTED_TO_RENDEZVOUS_NODE,f.CONNECTION_PROGRESS_FOUND_INTRODUCTION_NODES=n.CONNECTION_PROGRESS_FOUND_INTRODUCTION_NODES,f.CONNECTION_PROGRESS_INTRODUCTION_SENT=n.CONNECTION_PROGRESS_INTRODUCTION_SENT,f.prototype={announce:function(){this.u||this.a||(this.u=!0,this.g.announce(this.m,this.w,Math.max(this.l-1,1)))},connect_to:function(e,t){this.a||this.c.has(e)||this.g.connect_to(this.m,e,x,t,this.l)},nickname:function(e,t){!this.a&&this.c.has(e)&&("string"==typeof t&&(t=m(t)),this.f(e,o,t))},secret:function(e,t){var n;!this.a&&this.c.has(e)&&((n=new Uint8Array(u)).set(t),this.h.add(e),this.f(e,r,n))},text_message:function(e,n,i){if(this.a||!this.c.has(e))return 0;if("string"==typeof i&&(i=m(i)),!i.length)return 0;var r=+new Date;return r<=this.j&&(r=this.j+1),(n=b(t(r),t(n),i)).length>this.v?0:(this.j=r,this.f(e,a,n),r)},custom_command:function(e,t,n){this.f(e,t+l,n)},destroy:function(){this.a||(this.a=!0)},b:function(e){return y(this.o,e)},s:function(e){return this.h.has(e)&&this.i.has(e)},f:function(e,t,n){this.g.send_to(this.o,e,t,n)}},f.prototype=Object.assign(Object.create(_.prototype),f.prototype),Object.defineProperty(f.prototype,"constructor",{value:f}),{ready:function(e){n.ready(function(){h.ready(function(){e()})})},Chat:f,generate_seed:function(){return p(u)},generate_secret:function(){return p(u)},id_encode:function(e,t){return e=b(e,t),t=A(e).subarray(0,2),E(b(e,t))},id_decode:function(e){var t=k(e);if(e=t.subarray(0,-2),t=t.subarray(-2),!y(A(e).subarray(0,2),t))throw Error("Checksum is not correct");if(e.length<u||e.length>2*u)throw Error("Incorrect ID");return[e.subarray(0,u),e.subarray(u)]}}}var i=0,r=1,s=2,o=3,a=4,c=5,l=64,u=32;define("@detox/chat",["@detox/core","@detox/crypto","@detox/utils","async-eventer"],n)}.call(this),function(e,t){define("autosize",["module","exports"],t)}(0,function(e,t){"use strict";var n,i,r="function"==typeof Map?new Map:(n=[],i=[],{has:function(e){return-1<n.indexOf(e)},get:function(e){return i[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),i.push(t))},delete:function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),i.splice(t,1))}}),s=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){s=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function o(e){var t=r.get(e);t&&t.destroy()}function a(e){var t=r.get(e);t&&t.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return function(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!r.has(e)){var t,n=null,i=null,o=null,a=function(){e.clientWidth!==i&&h()},c=function(t){window.removeEventListener("resize",a,!1),e.removeEventListener("input",h,!1),e.removeEventListener("keyup",h,!1),e.removeEventListener("autosize:destroy",c,!1),e.removeEventListener("autosize:update",h,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),r.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",c,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",h,!1),window.addEventListener("resize",a,!1),e.addEventListener("input",h,!1),e.addEventListener("autosize:update",h,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",r.set(e,{destroy:c,update:h}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(n)&&(n=0),h()}function l(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function u(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+n+"px",i=e.clientWidth,t.forEach(function(e){e.node.scrollTop=e.scrollTop}),r&&(document.documentElement.scrollTop=r)}}function h(){u();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),i="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(i<t?"hidden"===n.overflowY&&(l("scroll"),u(),i="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(l("hidden"),u(),i="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),o!==i){o=i;var r=s("autosize:resized");try{e.dispatchEvent(r)}catch(t){}}}}(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],a),e}),t.default=c,e.exports=t.default});var _extends=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},SwipeListener=function(e,t){if(e){"undefined"!=typeof window&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),t||(t={}),t=_extends({},{minHorizontal:10,minVertical:10,deltaHorizontal:3,deltaVertical:5,preventScroll:!1,lockAxis:!0},t);var n=[],i=!1,r=function(){i=!0};e.addEventListener("mousedown",r);var s=function(e){i=!1,a(e)};e.addEventListener("mouseup",s);var o=function(e){i&&(e.changedTouches=[{clientX:e.clientX,clientY:e.clientY}],c(e))};e.addEventListener("mousemove",o);var a=function(){var i=Math.abs,r=Math.max,s=Math.min;if(n.length){for(var o=[],a=[],c={top:!1,right:!1,bottom:!1,left:!1},l=0;l<n.length;l++)o.push(n[l].x),a.push(n[l].y);var u=o[0],h=o[o.length-1],d=a[0],_=a[a.length-1],f={x:[u,h],y:[d,_]};if(1<n.length){var p=new CustomEvent("swiperelease",{detail:f});e.dispatchEvent(p)}var m=o[0]-o[o.length-1],g="none";g=0<m?"left":"right";var y=s.apply(Math,o),b=r.apply(Math,o);if(i(m)>=t.minHorizontal&&("left"==g?i(y-o[o.length-1])<=t.deltaHorizontal&&(c.left=!0):"right"==g&&(i(b-o[o.length-1])<=t.deltaHorizontal&&(c.right=!0))),g="none",g=0<(m=a[0]-a[a.length-1])?"top":"bottom",y=s.apply(Math,a),b=r.apply(Math,a),i(m)>=t.minVertical&&("top"==g?i(y-a[a.length-1])<=t.deltaVertical&&(c.top=!0):"bottom"==g&&(i(b-a[a.length-1])<=t.deltaVertical&&(c.bottom=!0))),n=[],c.top||c.right||c.bottom||c.left){t.lockAxis&&((c.left||c.right)&&i(u-h)>i(d-_)?c.top=c.bottom=!1:(c.top||c.bottom)&&i(u-h)<i(d-_)&&(c.left=c.right=!1));var v={detail:_extends({directions:c},f)},w=new CustomEvent("swipe",v);e.dispatchEvent(w)}else{var E=new CustomEvent("swipecancel",{detail:f});e.dispatchEvent(E)}}},c=function(i){t.preventScroll&&i.preventDefault();var r=i.changedTouches[0];if(n.push({x:r.clientX,y:r.clientY}),1<n.length){var s=n[0].x,o=n[n.length-1].x,a=n[0].y,c=n[n.length-1].y,l=new CustomEvent("swiping",{detail:{x:[s,o],y:[a,c]}});e.dispatchEvent(l)}},l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l={passive:!t.preventScroll}}});window.addEventListener("testPassive",null,u),window.removeEventListener("testPassive",null,u)}catch(e){}return e.addEventListener("touchmove",c,l),e.addEventListener("touchend",a),{off:function(){e.removeEventListener("touchmove",c,l),e.removeEventListener("touchend",a),e.removeEventListener("mousedown",r),e.removeEventListener("mouseup",s),e.removeEventListener("mousemove",o)}}}};"undefined"!=typeof module&&void 0!==module.exports?module.exports=SwipeListener:"function"==typeof define&&define.amd?define("swipe-listener",[],function(){return SwipeListener}):window.SwipeListener=SwipeListener,function(){var e;function t(e){var t,n;function i(e){if(!(this instanceof i))return new i(e);this.array=e}for(i.prototype.clone=function(){return i(this.array.slice())},t=0,n=e.length;t<n;++t)r.call(this,t,e[t]);return i;function r(e,t){Object.defineProperty(i.prototype,t,{get:function(){return this.array[e]},set:function(t){this.array[e]=t}})}}function n(e,t,n,i){if(e.size<t+n)throw new Error;return e=e.slice(t,t+n),new Promise(function(t){var n;switch((n=new FileReader).onload=function(){t(n.result)},i){case"buffer":n.readAsArrayBuffer(e);break;case"string":n.readAsText(e)}})}e=1,define("js/state",["@detox/chat","@detox/utils","async-eventer"],function(i,r,s){var o,a,c,l,u,h,d,_,f,p,m;function g(t){var n,i,r,o,a,u,h,p,y,b,v,w,E,k,A,x=this;if(!(this instanceof g))return new g(t);s.call(this),this._chat_id=t,n=t+"-backup",i=!1,this._state=(k=localStorage.getItem(n))?(i=!0,JSON.parse(k)):(A=localStorage.getItem(t))?JSON.parse(A):Object.create(null),this._local_state={online:!1,announced:!1,connected_nodes_count:0,aware_of_nodes_count:0,routing_paths_count:0,application_connections_count:0,messages:c(),ui:{active_contact:null,sidebar_shown:!0},online_contacts:l(),contacts_with_pending_messages:l(),contacts_with_unread_messages:l()},r=i?new Promise(function(t){var i;(i=indexedDB.open(n,e)).onsuccess=function(e){x._backup_database=e.target.result,t()},i.onerror=function(e){console.error("Opening backup messages database failed",e),detox_chat_app.notify_error("An error happened during opening backup messages database, restoring from backup canceled, please restart"),localStorage.removeItem(n),indexedDB.deleteDatabase(n)}}):Promise.resolve(),this._database_ready=r.then(function(){return new Promise(function(n){var r;i&&indexedDB.deleteDatabase(t),(r=indexedDB.open(t,e)).onsuccess=function(e){x._database=e.target.result,n()},r.onerror=function(e){console.error("Opening messages database failed",e),detox_chat_app.notify_error("An error happened during opening messages database")},r.onupgradeneeded=function(e){x._database=e.target.result,x._database.createObjectStore("messages",{keyPath:"message_id",autoIncrement:!0}).createIndex("contact_id","contact_id")}})}).then(function(){if(i)return new Promise(function(e){var t,n;(t=n=x._backup_database.transaction("messages","readwrite")).oncomplete=function(){x._backup_database.close(),e()},t.onerror=function(e){console.error("Messages transaction failed",e)},n.objectStore("messages").openCursor().onsuccess=function(e){var t,n;(t=e.target.result)&&(n=t.value,x._messages_transaction(function(e){e.put(n)}),t.continue())}})}),this._messages_transactions=this._database_ready,"version"in this._state||((o=this._state).version=e,o.nickname="",o.seed=null,o.settings=JSON.parse(JSON.stringify(g.DEFAULT_SETTINGS)),o.contacts=[[[6,148,79,1,76,156,177,211,195,184,108,220,189,121,140,15,134,174,141,222,146,77,20,115,211,253,148,149,128,147,190,125],"Fake contact #1",0,0,null,null,null],[[6,148,79,1,76,156,177,211,195,184,108,220,189,121,140,15,134,174,141,222,146,77,20,115,211,253,148,149,128,147,190,126],"Fake contact #2",0,0,null,null,null]],o.contacts_requests=[],o.contacts_requests_blocked=[],o.secrets=[],setTimeout(function(){x.add_contact_message(x.get_contacts()[0].id,g.MESSAGE_ORIGIN_RECEIVED,+new Date,+new Date,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),x.add_contact_message(x.get_contacts()[0].id,g.MESSAGE_ORIGIN_SENT,+new Date,+new Date,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.")})),"audio_notifications"in this._state.settings||(this._state.settings.audio_notifications=!0),null!=(null!=(a=this._state.settings.bootstrap_nodes[0])?a.node_id:void 0)&&(this._state.settings.bootstrap_nodes=function(){var e,t,n,i=[];for(e=0,n=(t=this._state.settings.bootstrap_nodes).length;e<n;++e)u=t[e],i.push(u.node_id+":"+u.host+":"+u.port);return i}.call(this)),this._state.settings.bootstrap_nodes=function(){var e,t,n,i=[];for(e=0,n=(t=this._state.settings.bootstrap_nodes).length;e<n;++e)"252223a2ae1d325578d8cd2f0d65dada5d342927cfbbf8dbfd9edc3e247b5a0b:1-testnet-bootstrap.detox.technology:443"!==(u=t[e])&&"e9a374b6aa204a48c40a9679a636319b029fa4e68ee29dbd7da9326ea681b91d:2-testnet-bootstrap.detox.technology:443"!==u&&("50da72d1fe105c649a1c16c085627b368196e258667d2a2fc02d4b8af7182651:0-testnet-bootstrap.detox.technology:443"===u?i.push("50da72d1fe105c649a1c16c085627b368196e258667d2a2fc02d4b8af7182651:testnet-bootstrap.detox.technology:443"):i.push(u));return i}.call(this),this._state.seed&&(this._state.seed=Uint8Array.from(this._state.seed)),this._ready=Promise.all([this._database_ready,new Promise(function(e){x._state.seed?e():x._ready_resolve=e})]),i&&this._ready.then(function(){localStorage.removeItem(n),indexedDB.deleteDatabase(n),detox_chat_app.notify_success("Restoration from backup finished successfully!",5)}),this._state.contacts=c(function(){var e,t,n,i=[];for(e=0,n=(t=this._state.contacts).length;e<n;++e)(h=t[e])[0]=Uint8Array.from(h[0]),h[4]=h[4]&&Uint8Array.from(h[4]),h[5]=h[5]&&Uint8Array.from(h[5]),h[6]=h[6]&&Uint8Array.from(h[6]),h=d(h),i.push([h.id,h]);return i}.call(this)),this._state.contacts_requests=c(function(){var e,t,n,i=[];for(e=0,n=(t=this._state.contacts_requests).length;e<n;++e)(h=t[e])[0]=Uint8Array.from(h[0]),h=_(h),i.push([h.id,h]);return i}.call(this)),p=+new Date,this._state.contacts_requests_blocked=c(function(){var e,t,n,i=[];for(e=0,n=(t=this._state.contacts_requests_blocked).length;e<n;++e)(h=t[e]).blocked_until>p&&(h[0]=Uint8Array.from(h[0]),h=f(h),i.push([h.id,h]));return i}.call(this)),this._state.secrets=c(function(){var e,t,n,i=[];for(e=0,n=(t=this._state.secrets).length;e<n;++e)(y=t[e])[0]=Uint8Array.from(y[0]),y=m(y),i.push([y.secret,y]);return i}.call(this));for(b=0,w=(v=Array.from(this._state.contacts.keys())).length;b<w;++b)E=v[b],this._update_contact_with_pending_messages(E),this._update_contact_with_unread_messages(E)}return o=i.id_encode,a=r.are_arrays_equal,c=r.ArrayMap,l=r.ArraySet,u=Object.create(null),g.prototype={ready:function(e){return e&&this._ready.then(e),Boolean(this._state.seed)},get_as_blob:function(){var e=this;return Promise.all(function(){var e,t,n,i=[];for(e=0,n=(t=this.get_contacts()).length;e<n;++e)i.push(r.call(this,t[e]));return i;function r(e){return this._messages_transaction(function(t,n){t.index("contact_id").getAll(IDBKeyRange.only(e.id)).onsuccess=function(e){var t;t=(t=e.target.result).map(function(e){return[e.message_id,e.origin,e.date_written,e.date_sent,e.text]}),n(new Blob([JSON.stringify(t)]))}})}}.call(this)).then(function(t){var n,i,r;return n=e._serialize_state(),i=JSON.stringify([n.length].concat(t.map(function(e){return e.size}))),r=new ArrayBuffer(4),new DataView(r).setUint32(0,i.length,!1),new Blob([r,i,n].concat(t))})},set_from_blob:function(t){var i,r;r=this._chat_id+"-backup",localStorage.removeItem(r),indexedDB.deleteDatabase(r),n(t,0,4,"buffer").then(function(e){var i;return i=new DataView(e).getUint32(0,!1),n(t,4,i,"string")}).then(function(s){var o,a;if(o=s.length,a=(s=JSON.parse(s)).reduce(function(e,t){return e+t}),t.size!==4+o+a)throw Error;return n(t,4+o,s[0],"string").then(function(t){if(JSON.parse(t).version>e)throw detox_chat_app.notify_error("Restoration from backup created by newer version is not supported, upgrade first",5),new Error;return localStorage.setItem(r,t)}).then(function(){var e,a;return i=g(r),e=4+o+s[0],a=i.get_contacts().map(function(t,n){var i,r;return i=e,r=s[n+1],e+=r,[t.id,i,r]}),function e(){var r,s,o,c;if(r=a.shift())return s=r[0],o=r[1],c=r[2],n(t,o,c,"string").then(function(e){return i._messages_transaction(function(t){var n,i,r,o;for(n=0,r=(i=JSON.parse(e)).length;n<r;++n)o=i[n],t.put({contact_id:s,message_id:o[0],origin:o[1],date_written:o[2],date_sent:o[3],text:o[4]})})}).then(function(){return e()})}()})}).then(function(){detox_chat_app.notify_warning("Restoration from backup is almost done, restart is needed to finish the process")}).catch(function(){var e;console.error.apply(console,arguments),localStorage.removeItem(r),i&&null!=(e=i._database)&&e.close(),indexedDB.deleteDatabase(r),detox_chat_app.notify_error("Restoration from backup failed, make sure you have selected correct backup file and try again",5)})},delete_data:function(){this._deleted||(localStorage.removeItem(this._chat_id),this._database.close(),indexedDB.deleteDatabase(this._chat_id),this._deleted=!0)},_serialize_state:function(){var e,t,n,i,r,s,o,a,c,l,u,h,d;for(t in e={},n=this._state)switch(i=n[t],t){case"seed":e[t]=Array.from(i);break;case"contacts":case"contacts_requests":case"contacts_requests_blocked":case"secrets":for(r=[],s=0,a=(o=Array.from(i.values())).length;s<a;++s){for(u=0,h=(l=(c=o[s]).array.slice()).length;u<h;++u)d=u,(c=l[u])instanceof Uint8Array&&(l[d]=Array.from(c));r.push(l)}e[t]=r;break;default:e[t]=i}return JSON.stringify(e)},_save_state:function(){this._deleted||localStorage.setItem(this._chat_id,this._serialize_state())},get_seed:function(){return this._state.seed},set_seed:function(e){var t;t=this._state.seed,this._state.seed=e,this._ready_resolve&&(this._ready_resolve(),delete this._ready_resolve),this.fire("seed_changed",e,t),this._save_state()},get_nickname:function(){return this._state.nickname},set_nickname:function(e){var t,n;t=this._state.nickname,n=String(e),this._state.nickname=n,this.fire("nickname_changed",n,t),this._save_state()},get_online:function(){return this._local_state.online},set_online:function(e){var t,n;t=this._local_state.online,n=!!e,this._local_state.online=n,this.fire("online_changed",n,t)},get_announced:function(){return this._local_state.announced},set_announced:function(e){var t,n;t=this._local_state.announced,n=!!e,this._local_state.announced=n,this.fire("announced_changed",n,t)},get_connected_nodes_count:function(){return this._local_state.connected_nodes_count},set_connected_nodes_count:function(e){this._local_state.connected_nodes_count=e,this.fire("connected_nodes_count_changed",e)},get_aware_of_nodes_count:function(){return this._local_state.aware_of_nodes_count},set_aware_of_nodes_count:function(e){this._local_state.aware_of_nodes_count=e,this.fire("aware_of_nodes_count_changed",e)},get_routing_paths_count:function(){return this._local_state.routing_paths_count},set_routing_paths_count:function(e){this._local_state.routing_paths_count=e,this.fire("routing_paths_count_changed",e)},get_application_connections_count:function(){return this._local_state.application_connections_count},set_application_connections_count:function(e){this._local_state.application_connections_count=e,this.fire("application_connections_count_changed",e)},get_ui_active_contact:function(){return this._local_state.ui.active_contact},set_ui_active_contact:function(e){var t;t=this._local_state.ui.active_contact,this._local_state.ui.active_contact=e,this.fire("ui_active_contact_changed",e,t),e&&(this._update_contact_last_read_message(e),this._update_contact_with_unread_messages(e))},get_ui_sidebar_shown:function(){return this._local_state.ui.sidebar_shown},set_ui_sidebar_shown:function(e){var t;t=this._local_state.ui.sidebar_shown,this._local_state.ui.sidebar_shown=e,this.fire("ui_sidebar_shown_changed",e,t)},get_settings_announce:function(){return this._state.settings.announce},set_settings_announce:function(e){var t,n;t=this._state.settings.announce,n=!!e,this._state.settings.announce=n,this.fire("settings_announce_changed",n,t),this._save_state()},get_settings_audio_notifications:function(){return this._state.settings.audio_notifications},set_settings_audio_notifications:function(e){var t,n;t=this._state.settings.audio_notifications,n=!!e,this._state.settings.audio_notifications=n,this.fire("settings_audio_notifications_changed",n,t),this._save_state()},get_settings_block_contact_requests_for:function(){return this._state.settings.block_contact_requests_for},set_settings_block_contact_requests_for:function(e){var t;return t=this._state.settings.block_contact_requests_for,this._state.settings.block_contact_requests_for=parseInt(e),this.fire("settings_block_contact_requests_for_changed",e,t),this._save_state()},get_settings_bootstrap_nodes:function(){return this._state.settings.bootstrap_nodes},set_settings_bootstrap_nodes:function(e){var t;t=this._state.settings.bootstrap_nodes,this._state.settings.bootstrap_nodes=e,this.fire("settings_bootstrap_nodes_changed",e,t),this._save_state()},get_settings_bucket_size:function(){return this._state.settings.bucket_size},set_settings_bucket_size:function(e){var t;t=this._state.bucket_size,this._state.settings.bucket_size=parseInt(e),this.fire("settings_bucket_size_changed",e,t),this._save_state()},get_settings_experience:function(){return this._state.settings.experience},set_settings_experience:function(e){var t;t=this._state.experience,this._state.settings.experience=parseInt(e),this.fire("settings_experience_changed",e,t),this._save_state()},get_settings_help:function(){return this._state.settings.help},set_settings_help:function(e){var t,n;t=this._state.settings.help,n=!!e,this._state.settings.help=n,this.fire("settings_help_changed",n,t),this._save_state()},get_settings_ice_servers:function(){return this._state.settings.ice_servers},set_settings_ice_servers:function(e){var t;t=this._state.settings.ice_servers,this._state.settings.ice_servers=e,this.fire("settings_ice_servers_changed",e,t),this._save_state()},get_settings_max_pending_segments:function(){return this._state.settings.max_pending_segments},set_settings_max_pending_segments:function(e){var t;t=this._state.max_pending_segments,this._state.settings.max_pending_segments=parseInt(e),this.fire("settings_max_pending_segments_changed",e,t),this._save_state()},get_settings_number_of_intermediate_nodes:function(){return this._state.settings.number_of_intermediate_nodes},set_settings_number_of_intermediate_nodes:function(e){var t;t=this._state.number_of_intermediate_nodes,this._state.settings.number_of_intermediate_nodes=parseInt(e),this.fire("settings_number_of_intermediate_nodes_changed",e,t),this._save_state()},get_settings_number_of_introduction_nodes:function(){return this._state.settings.number_of_introduction_nodes},set_settings_number_of_introduction_nodes:function(e){var t;t=this._state.number_of_introduction_nodes,this._state.settings.number_of_introduction_nodes=parseInt(e),this.fire("settings_number_of_introduction_nodes_changed",e,t),this._save_state()},get_settings_online:function(){return this._state.settings.online},set_settings_online:function(e){var t,n;t=this._state.online,n=!!e,this._state.settings.online=n,this.fire("settings_online_changed",n,t),this._save_state()},get_settings_packets_per_second:function(){return this._state.settings.packets_per_second},set_settings_packets_per_second:function(e){var t;t=this._state.packets_per_second,this._state.settings.packets_per_second=parseInt(e),this.fire("settings_packets_per_second_changed",e,t),this._save_state()},get_settings_reconnects_intervals:function(){return this._state.settings.reconnects_intervals},set_settings_reconnects_intervals:function(e){var t;t=this._state.reconnects_intervals,this._state.settings.reconnects_intervals=e,this.fire("settings_reconnects_intervals_changed",e,t),this._save_state()},get_settings_send_ctrl_enter:function(){return this._state.settings.send_ctrl_enter},set_settings_send_ctrl_enter:function(e){var t,n;t=this._state.send_ctrl_enter,n=!!e,this._state.settings.send_ctrl_enter=n,this.fire("settings_send_ctrl_enter_changed",n,t),this._save_state()},get_contacts:function(){return Array.from(this._state.contacts.values())},get_contacts_with_pending_messages:function(){return Array.from(this._local_state.contacts_with_pending_messages.values())},get_contacts_with_unread_messages:function(){return Array.from(this._local_state.contacts_with_unread_messages.values())},get_contact:function(e){return this._state.contacts.get(e)},add_contact:function(e,t,n){var i;this.has_contact(e)||((t=t.trim())||(t=o(e,new Uint8Array(0))),i=d([e,t,0,0,n,null,null]),this._state.contacts.set(e,i),this.fire("contact_added",i),this.fire("contacts_changed"),this._save_state())},has_contact:function(e){return this._state.contacts.has(e)},_set_contact:function(e,t){var n,i,r,s;if(n=this.get_contact(e)){for(r in i=n.clone(),t)s=t[r],i[r]=s;this._state.contacts.set(e,i),this.fire("contact_changed",i,n),this.fire("contacts_changed"),this._save_state()}},set_contact_nickname:function(e,t){t||(t=o(e,new Uint8Array(0))),this._set_contact(e,{nickname:t})},set_contact_remote_secret:function(e,t){this._set_contact(e,{remote_secret:t})},set_contact_local_secret:function(e,t){var n,i;(n=this.get_contact(e))&&(i=n.old_local_secret||n.local_secret,this._set_contact(e,{old_local_secret:i,local_secret:t}))},_update_contact_last_active:function(e){this._set_contact(e,{last_time_active:+new Date})},_update_contact_last_read_message:function(e){this._set_contact(e,{last_read_message:+new Date})},del_contact_old_local_secret:function(e){this._set_contact(e,{old_local_secret:null})},del_contact:function(e){var t,n=this;(t=this.get_contact(e))&&(a(this.get_ui_active_contact()||new Uint8Array(0),e)&&this.set_ui_active_contact(null),this.del_contact_messages(e).then(function(){n._state.contacts.delete(e),n.fire("contact_deleted",t),n._update_contact_with_pending_messages(e),n._update_contact_with_unread_messages(e),n.fire("contacts_changed"),n._save_state()}))},get_contacts_requests:function(){return Array.from(this._state.contacts_requests.values())},add_contact_request:function(e,t){var n,i,r;this.has_contact_request(e)||(n=this._state.secrets.get(t).name,i=this.get_settings_experience>=g.EXPERIENCE_ADVANCED?o(e,new Uint8Array(0)):o(e,t),r=_([e,i,n]),this._state.contacts_requests.set(e,r),this.fire("contact_request_added",r),this.fire("contacts_requests_changed"),this._save_state())},has_contact_request:function(e){return this._state.contacts_requests.has(e)},del_contact_request:function(e){var t,n;(t=this._state.contacts_requests.get(e))&&(this._state.contacts_requests.delete(e),n=new Date+this.get_settings_block_contact_requests_for(),this._state.contacts_requests_blocked.set(e,f([e,n])),this.fire("contact_request_deleted",t),this.fire("contacts_requests_changed"),this._save_state())},get_contacts_requests_blocked:function(){return Array.from(this._state.contacts_requests_blocked.values())},has_contact_request_blocked:function(e){var t;return!!((t=this._state.contacts_requests_blocked.get(e))&&t.blocked_until>+new Date)||this._state.contacts_requests_blocked.delete(e)},get_online_contacts:function(){return Array.from(this._local_state.online_contacts)},add_online_contact:function(e){this._local_state.online_contacts.add(e),this.fire("contact_online",e),this.fire("online_contacts_changed"),this._update_contact_last_active(e)},has_online_contact:function(e){return this._local_state.online_contacts.has(e)},del_online_contact:function(e){this._local_state.online_contacts.delete(e),this.fire("contact_offline",e),this.fire("online_contacts_changed"),this._update_contact_last_active(e)},_update_contact_with_pending_messages:function(e){var t=this;this.get_contact(e)?this.get_contact_messages(e).then(function(n){var i,r;for(i=n.length-1;i>=0;--i)if((r=n[i]).origin===g.MESSAGE_ORIGIN_SENT&&!r.date_sent)return void(t._local_state.contacts_with_pending_messages.has(e)||(t._local_state.contacts_with_pending_messages.add(e),t.fire("contacts_with_pending_messages_changed")));t._local_state.contacts_with_pending_messages.delete(e),t.fire("contacts_with_pending_messages_changed")}):this._local_state.contacts_with_pending_messages.delete(e)},_update_contact_with_unread_messages:function(e){var t,n,i=this;(t=this.get_contact(e))?(n=t.last_read_message,this.get_contact_messages(e).then(function(t){var r,s,o;for(r=0,s=t.length;r<s;++r)if((o=t[r]).origin===g.MESSAGE_ORIGIN_RECEIVED&&o.date_sent>n)return void(i._local_state.contacts_with_unread_messages.has(e)||(i._local_state.contacts_with_unread_messages.add(e),i.fire("contacts_with_unread_messages_changed")));i._local_state.contacts_with_unread_messages.delete(e),i.fire("contacts_with_unread_messages_changed")})):this._local_state.contacts_with_unread_messages.delete(e)},get_contact_messages:function(e){var t=this;return this._messages_transactions.then(function(){return t._local_state.messages.get(e)||t._messages_transaction(function(t,n){t.index("contact_id").getAll(IDBKeyRange.only(e)).onsuccess=function(e){n(e.target.result)}}).then(function(n){return n=n.map(function(e){return p([e.message_id,e.origin,e.date_written,e.date_sent,e.text])}),t._local_state.messages.set(e,n),n})})},get_contact_messages_to_be_sent:function(e){return this.get_contact_messages(e).then(function(e){return e.filter(function(e){return e.origin===g.MESSAGE_ORIGIN_SENT&&!e.date_sent})})},add_contact_message:function(e,t,n,i,r){var s=this;return this._messages_transaction(function(s,o){s.add({contact_id:e,origin:t,date_written:n,date_sent:i,text:r}).onsuccess=function(e){o(e.target.result)}}).then(function(o){var c;return c=p([o,t,n,i,r]),s._local_state.messages.delete(e),t===g.MESSAGE_ORIGIN_RECEIVED?(s._update_contact_last_active(e),a(s.get_ui_active_contact()||new Uint8Array(0),e)?s._update_contact_last_read_message(e):s._update_contact_with_unread_messages(e)):s._update_contact_with_pending_messages(e),s.fire("contact_message_added",e,c),s.fire("contact_messages_changed",e),o})},set_contact_message_sent:function(e,t,n){var i=this;this.get_contact_messages(e).then(function(r){var s,o;for(s=r.length-1;s>=0;--s)if((o=r[s]).id===t){o.date_sent=n,i._messages_transaction(a).then(c);break}function a(n){n.put({message_id:t,contact_id:e,origin:o.origin,date_written:o.date_written,date_sent:o.date_sent,text:o.text})}function c(){return i._update_contact_with_pending_messages(e),i.fire("contact_messages_changed",e)}})},del_contact_messages:function(e){var t=this;return this._messages_transaction(function(t){t.index("contact_id").openCursor(IDBKeyRange.only(e)).onsuccess=function(e){var t;(t=e.target.result)&&(t.delete(),t.continue())}}).then(function(){t._local_state.messages.delete(e),t.fire("contact_messages_changed",e)})},_messages_transaction:function(e){var t=this;return this._messages_transactions=this._messages_transactions.then(function(){return new Promise(function(n,i){var r,s,o;(s=o=t._database.transaction("messages","readwrite")).oncomplete=function(){n(r)},s.onerror=function(e){console.error("Messages transaction failed",e),i()},e(o.objectStore("messages"),function(e){r=e})})})},get_secrets:function(){return Array.from(this._state.secrets.values())},add_secret:function(e,t){var n;n=m([e,t]),this._state.secrets.set(n.secret,n),this.fire("secret_added",n),this.fire("secrets_changed"),this._save_state()},set_secret_name:function(e,t){var n;(n=this._state.secrets.get(e).clone()).name=t,this._state.secrets.set(e,n),this.fire("secrets_changed"),this._save_state()},set_secrets:function(e){this._state.secrets=e,this.fire("secrets_changed"),this._save_state()},del_secret:function(e){var t;(t=this._state.secrets.get(e))&&(this._state.secrets.delete(e),this.fire("secret_deleted",t),this.fire("secrets_changed"),this._save_state())}},g.prototype=Object.assign(Object.create(s.prototype),g.prototype),Object.defineProperty(g.prototype,"constructor",{value:g}),h={EXPERIENCE_REGULAR:0,EXPERIENCE_ADVANCED:1,EXPERIENCE_DEVELOPER:2,MESSAGE_ORIGIN_SENT:0,MESSAGE_ORIGIN_RECEIVED:1,MESSAGE_ORIGIN_SERVICE:2},Object.assign(g,h),Object.assign(g.prototype,h),g.DEFAULT_SETTINGS={announce:!0,audio_notifications:!0,block_contact_requests_for:2592e3,bootstrap_nodes:["50da72d1fe105c649a1c16c085627b368196e258667d2a2fc02d4b8af7182651:testnet-bootstrap.detox.technology:443"],bucket_size:2,experience:g.EXPERIENCE_REGULAR,help:!0,ice_servers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0-testnet-turn.detox.technology",username:"detox-user",credential:"pwd"}],max_pending_segments:10,number_of_intermediate_nodes:3,number_of_introduction_nodes:3,online:!0,packets_per_second:5,reconnects_intervals:[[5,30],[10,60],[15,150],[100,300],[Number.MAX_SAFE_INTEGER,600]],send_ctrl_enter:!0},d=t(["id","nickname","last_time_active","last_read_message","remote_secret","local_secret","old_local_secret"]),_=t(["id","name","secret_name"]),f=t(["id","blocked_until"]),p=t(["id","origin","date_written","date_sent","text"]),m=t(["secret","name"]),{Contact:d,ContactRequest:_,ContactRequestBlocked:f,Message:p,Secret:m,State:g,get_instance:function(e){return e in u||(u[e]=g(e)),u[e]}}})}.call(this),function(){define("js/behaviors",["@detox/chat","js/state"],function(e,t){var n;return{state_instance:n={properties:{chatId:{type:String,value:"detox-chat-app"},state:Object},created:function(){this.state=t.get_instance(this.chatId),this.state.ready()||(detox_chat_app.notify_warning("Previous state was not found, new identity generated",60),this.state.set_seed(e.generate_seed()),this.state.add_secret(e.generate_secret().slice(0,4),"Default secret"))}},experience_level:[n,{advanced_user:{type:Boolean,value:!1},developer:{type:Boolean,value:!1},ready:function(){var e,t=this;e=this.state,this.advanced_user=e.get_settings_experience()>=e.EXPERIENCE_ADVANCED,this.developer=e.get_settings_experience()===e.EXPERIENCE_DEVELOPER,e.on("settings_experience_changed",function(n){t.advanced_user=n>=e.EXPERIENCE_ADVANCED,t.developer=n===e.EXPERIENCE_DEVELOPER})}}],help:[n,{properties:{help:Boolean},ready:function(){var e=this;this.help=this.state.get_settings_help(),this.state.on("settings_help_changed",function(t){e.help=t})}}]}})}.call(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():define("hotkeys-js",t)}(0,function(){"use strict";var e="undefined"!=typeof navigator&&0<navigator.userAgent.toLowerCase().indexOf("firefox");function t(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){n(window.event)})}function n(e,t){for(var n=t.slice(0,t.length-1),i=0;i<n.length;i++)n[i]=e[n[i].toLowerCase()];return n}function i(e){e||(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");0<=n;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}function r(e,t){for(var n=e.length<t.length?t:e,i=e.length<t.length?e:t,r=!0,s=0;s<n.length;s++)-1===i.indexOf(n[s])&&(r=!1);return r}for(var s={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,"":20,",":188,".":190,"/":191,"`":192,"-":e?173:189,"=":e?61:187,";":e?59:186,"'":222,"[":219,"]":221,"\\":220},o={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":e?224:91,cmd:e?224:91,command:e?224:91},a=[],c={16:"shiftKey",18:"altKey",17:"ctrlKey"},l={16:!1,18:!1,17:!1},u={},h=1;h<20;h++)s["f"+h]=111+h;var d="all",_=l[e?224:91]=!(c[e?224:91]="metaKey"),f=function(e){return s[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function p(e){d=e||"all"}function m(){return d||"all"}function g(e,t,n){var i=void 0;if(t.scope===n||"all"===t.scope){for(var r in i=0<t.mods.length,l)Object.prototype.hasOwnProperty.call(l,r)&&(!l[r]&&-1<t.mods.indexOf(+r)||l[r]&&-1===t.mods.indexOf(+r))&&(i=!1);(0!==t.mods.length||l[16]||l[18]||l[17]||l[91])&&!i&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function y(e,r,s){var h=i(e),d=[],p="all",b=document,v=0;for(void 0===s&&"function"==typeof r&&(s=r),"[object Object]"===Object.prototype.toString.call(r)&&(r.scope&&(p=r.scope),r.element&&(b=r.element)),"string"==typeof r&&(p=r);v<h.length;v++)d=[],1<(e=h[v].split("+")).length&&(d=n(o,e)),(e="*"===(e=e[e.length-1])?"*":f(e))in u||(u[e]=[]),u[e].push({scope:p,mods:d,shortcut:h[v],method:s,key:h[v]});void 0===b||_||(_=!0,t(b,"keydown",function(e){!function(e){var t=u["*"],n=e.keyCode||e.which||e.charCode;if(-1===a.indexOf(n)&&a.push(n),93!==n&&224!==n||(n=91),n in l){for(var i in l[n]=!0,o)o[i]===n&&(y[i]=!0);if(!t)return}for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(l[r]=e[c[r]]);if(y.filter.call(this,e)){var s=m();if(t)for(var h=0;h<t.length;h++)t[h].scope===s&&g(e,t[h],s);if(n in u)for(var d=0;d<u[n].length;d++)g(e,u[n][d],s)}}(e)}),t(b,"keyup",function(e){!function(e){var t=e.keyCode||e.which||e.charCode,n=a.indexOf(t);if(n<0||a.splice(n,1),93!==t&&224!==t||(t=91),t in l)for(var i in l[t]=!1,o)o[i]===t&&(y[i]=!1)}(e)}))}var b={setScope:p,getScope:m,deleteScope:function(e,t){var n=void 0,i=void 0;for(var r in e||(e=m()),u)if(Object.prototype.hasOwnProperty.call(u,r))for(n=u[r],i=0;i<n.length;)n[i].scope===e?n.splice(i,1):i++;m()===e&&p(t||"all")},getPressedKeyCodes:function(){return a.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=f(e)),-1!==a.indexOf(e)},filter:function(e){var t=e.target.tagName||e.srcElement.tagName;return!("INPUT"===t||"SELECT"===t||"TEXTAREA"===t)},unbind:function(e,t){for(var s=i(e),a=void 0,c=[],l=void 0,h=0;h<s.length;h++){if(1<(a=s[h].split("+")).length&&(c=n(o,a)),e="*"===(e=a[a.length-1])?"*":f(e),t||(t=m()),!u[e])return;for(var d=0;d<u[e].length;d++)(l=u[e][d]).scope===t&&r(l.mods,c)&&(u[e][d]={})}}};for(var v in b)Object.prototype.hasOwnProperty.call(b,v)&&(y[v]=b[v]);if("undefined"!=typeof window){var w=window.hotkeys;y.noConflict=function(e){return e&&window.hotkeys===y&&(window.hotkeys=w),y},window.hotkeys=y}return y}),function(e){"use strict";var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:f,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:f,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:f,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function n(e){this.tokens=[],this.tokens.links={},this.options=e||g.defaults,this.rules=t.normal,this.options.pedantic?this.rules=t.pedantic:this.options.gfm&&(this.options.tables?this.rules=t.tables:this.rules=t.gfm)}t._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,t._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,t.def=u(t.def).replace("label",t._label).replace("title",t._title).getRegex(),t.bullet=/(?:[*+-]|\d+\.)/,t.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,t.item=u(t.item,"gm").replace(/bull/g,t.bullet).getRegex(),t.list=u(t.list).replace(/bull/g,t.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+t.def.source+")").getRegex(),t._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",t._comment=/<!--(?!-?>)[\s\S]*?-->/,t.html=u(t.html,"i").replace("comment",t._comment).replace("tag",t._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),t.paragraph=u(t.paragraph).replace("hr",t.hr).replace("heading",t.heading).replace("lheading",t.lheading).replace("tag",t._tag).getRegex(),t.blockquote=u(t.blockquote).replace("paragraph",t.paragraph).getRegex(),t.normal=p({},t),t.gfm=p({},t.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),t.gfm.paragraph=u(t.paragraph).replace("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|").getRegex(),t.tables=p({},t.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),t.pedantic=p({},t.normal,{html:u("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",t._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),n.rules=t,n.lex=function(e,t){return new n(t).lex(e)},n.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},n.prototype.token=function(e,n){var i,r,s,o,a,c,l,u,h,d,_,f,p;for(e=e.replace(/^ +$/gm,"");e;)if((s=this.rules.newline.exec(e))&&(e=e.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(e))e=e.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});else if(s=this.rules.fences.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]||""});else if(s=this.rules.heading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if(n&&(s=this.rules.nptable.exec(e))&&(c={type:"table",header:m(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]}).header.length===c.align.length){for(e=e.substring(s[0].length),u=0;u<c.align.length;u++)/^ *-+: *$/.test(c.align[u])?c.align[u]="right":/^ *:-+: *$/.test(c.align[u])?c.align[u]="center":/^ *:-+ *$/.test(c.align[u])?c.align[u]="left":c.align[u]=null;for(u=0;u<c.cells.length;u++)c.cells[u]=m(c.cells[u],c.header.length);this.tokens.push(c)}else if(s=this.rules.hr.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,n),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(e)){for(e=e.substring(s[0].length),_=(o=s[2]).length>1,this.tokens.push({type:"list_start",ordered:_,start:_?+o:""}),i=!1,d=(s=s[0].match(this.rules.item)).length,u=0;u<d;u++)l=(c=s[u]).length,~(c=c.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&u!==d-1&&(o===(a=t.bullet.exec(s[u+1])[0])||o.length>1&&a.length>1||(e=s.slice(u+1).join("\n")+e,u=d-1)),r=i||/\n\n(?!\s*$)/.test(c),u!==d-1&&(i="\n"===c.charAt(c.length-1),r||(r=i)),p=void 0,(f=/^\[[ xX]\] /.test(c))&&(p=" "!==c[1],c=c.replace(/^\[[ xX]\] +/,"")),this.tokens.push({type:r?"loose_item_start":"list_item_start",task:f,checked:p}),this.token(c,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(e))e=e.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:s[0]});else if(n&&(s=this.rules.def.exec(e)))e=e.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),h=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[h]||(this.tokens.links[h]={href:s[2],title:s[3]});else if(n&&(s=this.rules.table.exec(e))&&(c={type:"table",header:m(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/(?: *\| *)?\n$/,"").split("\n"):[]}).header.length===c.align.length){for(e=e.substring(s[0].length),u=0;u<c.align.length;u++)/^ *-+: *$/.test(c.align[u])?c.align[u]="right":/^ *:-+: *$/.test(c.align[u])?c.align[u]="center":/^ *:-+ *$/.test(c.align[u])?c.align[u]="left":c.align[u]=null;for(u=0;u<c.cells.length;u++)c.cells[u]=m(c.cells[u].replace(/^ *\| *| *\| *$/g,""),c.header.length);this.tokens.push(c)}else if(s=this.rules.lheading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(n&&(s=this.rules.paragraph.exec(e)))e=e.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var i={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:f,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)|^__([^\s])__(?!_)|^\*\*([^\s])\*\*(?!\*)/,em:/^_([^\s][\s\S]*?[^\s_])_(?!_)|^_([^\s_][\s\S]*?[^\s])_(?!_)|^\*([^\s][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*][\s\S]*?[^\s])\*(?!\*)|^_([^\s_])_(?!_)|^\*([^\s*])\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:f,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function r(e,t){if(this.options=t||g.defaults,this.links=e,this.rules=i.normal,this.renderer=this.options.renderer||new s,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=i.pedantic:this.options.gfm&&(this.options.breaks?this.rules=i.breaks:this.rules=i.gfm)}function s(e){this.options=e||g.defaults}function o(){}function a(e){this.tokens=[],this.token=null,this.options=e||g.defaults,this.options.renderer=this.options.renderer||new s,this.renderer=this.options.renderer,this.renderer.options=this.options}function c(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function l(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function u(e,t){return e=e.source||e,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function h(e,t){return d[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?d[" "+e]=e+"/":d[" "+e]=e.replace(/[^/]*$/,"")),e=d[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}i._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,i._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,i._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,i.autolink=u(i.autolink).replace("scheme",i._scheme).replace("email",i._email).getRegex(),i._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,i.tag=u(i.tag).replace("comment",t._comment).replace("attribute",i._attribute).getRegex(),i._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|[^\[\]\\])*?/,i._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|(?:\\[()]?|\([^\s\x00-\x1f()\\]*\)|[^\s\x00-\x1f()\\])*?)/,i._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,i.link=u(i.link).replace("label",i._label).replace("href",i._href).replace("title",i._title).getRegex(),i.reflink=u(i.reflink).replace("label",i._label).getRegex(),i.normal=p({},i),i.pedantic=p({},i.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:u(/^!?\[(label)\]\((.*?)\)/).replace("label",i._label).getRegex(),reflink:u(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",i._label).getRegex()}),i.gfm=p({},i.normal,{escape:u(i.escape).replace("])","~|])").getRegex(),url:u(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",i._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:u(i.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()}),i.breaks=p({},i.gfm,{br:u(i.br).replace("{2,}","*").getRegex(),text:u(i.gfm.text).replace("{2,}","*").getRegex()}),r.rules=i,r.output=function(e,t,n){return new r(t,n).output(e)},r.prototype.output=function(e){for(var t,n,i,s,o,a="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),a+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),i="@"===o[2]?"mailto:"+(n=c(this.mangle(o[1]))):n=c(o[1]),a+=this.renderer.link(i,null,n);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),e=e.substring(o[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):c(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),this.inLink=!0,i=o[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i))?(i=t[1],s=t[3]):s="":s=o[3]?o[3].slice(1,-1):"",i=i.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(o,{href:r.escapes(i),title:r.escapes(s)}),this.inLink=!1;else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){a+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),a+=this.renderer.strong(this.output(o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),a+=this.renderer.em(this.output(o[6]||o[5]||o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),a+=this.renderer.codespan(c(o[2].trim(),!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),a+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),a+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),a+=this.renderer.text(c(this.smartypants(o[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else o[0]=this.rules._backpedal.exec(o[0])[0],e=e.substring(o[0].length),"@"===o[2]?i="mailto:"+(n=c(o[0])):(n=c(o[0]),i="www."===o[1]?"http://"+n:n),a+=this.renderer.link(i,null,n);return a},r.escapes=function(e){return e?e.replace(r.rules._escapes,"$1"):e},r.prototype.outputLink=function(e,t){var n=t.href,i=t.title?c(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,i,this.output(e[1])):this.renderer.image(n,i,c(e[1]))},r.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},r.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",i=e.length,r=0;r<i;r++)t=e.charCodeAt(r),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},s.prototype.code=function(e,t,n){if(this.options.highlight){var i=this.options.highlight(e,t);null!=i&&i!==e&&(n=!0,e=i)}return t?'<pre><code class="'+this.options.langPrefix+c(t,!0)+'">'+(n?e:c(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:c(e,!0))+"</code></pre>"},s.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},s.prototype.html=function(e){return e},s.prototype.heading=function(e,t,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},s.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},s.prototype.list=function(e,t,n){var i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+i+">\n"},s.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},s.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},s.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},s.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},s.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},s.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},s.prototype.strong=function(e){return"<strong>"+e+"</strong>"},s.prototype.em=function(e){return"<em>"+e+"</em>"},s.prototype.codespan=function(e){return"<code>"+e+"</code>"},s.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},s.prototype.del=function(e){return"<del>"+e+"</del>"},s.prototype.link=function(e,t,n){if(this.options.sanitize){try{var i=decodeURIComponent(l(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return n}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return n}this.options.baseUrl&&!_.test(e)&&(e=h(this.options.baseUrl,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return n}var r='<a href="'+c(e)+'"';return t&&(r+=' title="'+t+'"'),r+">"+n+"</a>"},s.prototype.image=function(e,t,n){this.options.baseUrl&&!_.test(e)&&(e=h(this.options.baseUrl,e));var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+(this.options.xhtml?"/>":">")},s.prototype.text=function(e){return e},o.prototype.strong=o.prototype.em=o.prototype.codespan=o.prototype.del=o.prototype.text=function(e){return e},o.prototype.link=o.prototype.image=function(e,t,n){return""+n},o.prototype.br=function(){return""},a.parse=function(e,t){return new a(t).parse(e)},a.prototype.parse=function(e){this.inline=new r(e.links,this.options),this.inlineText=new r(e.links,p({},this.options,{renderer:new o})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},a.prototype.next=function(){return this.token=this.tokens.pop()},a.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},a.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},a.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,l(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,i,r="",s="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(r+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",i=0;i<t.length;i++)n+=this.renderer.tablecell(this.inline.output(t[i]),{header:!1,align:this.token.align[i]});s+=this.renderer.tablerow(n)}return this.renderer.table(r,s);case"blockquote_start":for(s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":s="";for(var o=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,o,a);case"list_item_start":for(s="",this.token.task&&(s+=this.renderer.checkbox(this.token.checked));"list_item_end"!==this.next().type;)s+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(s);case"loose_item_start":for(s="";"list_item_end"!==this.next().type;)s+=this.tok();return this.renderer.listitem(s);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var d={},_=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function f(){}function p(e){for(var t,n,i=1;i<arguments.length;i++)for(n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function m(e,t){var n=e.replace(/([^\\])\|/g,"$1 |").split(/ +\| */),i=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].replace(/\\\|/g,"|");return n}function g(e,t,i){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(i||"function"==typeof t){i||(i=t,t=null);var r,s,o=(t=p({},g.defaults,t||{})).highlight,l=0;try{r=n.lex(e,t)}catch(e){return i(e)}s=r.length;var u=function(e){if(e)return t.highlight=o,i(e);var n;try{n=a.parse(r,t)}catch(t){e=t}return t.highlight=o,e?i(e):i(null,n)};if(!o||o.length<3)return u();if(delete t.highlight,!s)return u();for(;l<r.length;l++)!function(e){"code"!==e.type?--s||u():o(e.text,e.lang,function(t,n){return t?u(t):null==n||n===e.text?--s||u():(e.text=n,e.escaped=!0,void(--s||u()))})}(r[l])}else try{return t&&(t=p({},g.defaults,t)),a.parse(n.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||g.defaults).silent)return"<p>An error occurred:</p><pre>"+c(e.message+"",!0)+"</pre>";throw e}}f.exec=f,g.options=g.setOptions=function(e){return p(g.defaults,e),g},g.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new s,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},g.defaults=g.getDefaults(),g.Parser=a,g.parser=a.parse,g.Renderer=s,g.TextRenderer=o,g.Lexer=n,g.lexer=n.lex,g.InlineLexer=r,g.inlineLexer=r.output,g.parse=g,"undefined"!=typeof module&&"object"==typeof exports?module.exports=g:define("marked",[],function(){return g})}(this||("undefined"!=typeof window?window:global)),function(){define("js/markdown",["marked"],function(e){var t,n;return(t=new e.Renderer).link=function(){return e.Renderer.prototype.link.apply(this,arguments).replace(/<a/,'$& target="_blank" rel="noreferrer noopener"')},t.image=t.link,n={baseUrl:"#",breaks:!0,gfm:!0,headerIds:!1,renderer:t,sanitize:!0,tables:!0},function(t){return e(t,n)}})}.call(this),function(){var e={};function t(){this.end=this.start=0,this.rules=this.parent=this.previous=null,this.cssText=this.parsedCssText="",this.atRule=!1,this.type=0,this.parsedSelector=this.selector=this.keyframesName=""}function n(e){var n=i,r=e=e.replace(c,"").replace(l,""),s=new t;s.start=0,s.end=r.length;for(var o=s,a=0,u=r.length;a<u;a++)if("{"===r[a]){o.rules||(o.rules=[]);var h=o,d=h.rules[h.rules.length-1]||null;(o=new t).start=a+1,o.parent=h,o.previous=d,h.rules.push(o)}else"}"===r[a]&&(o.end=a+1,o=o.parent||s);return n(s,e)}function i(e,t){var n=t.substring(e.start,e.end-1);if(e.parsedCssText=e.cssText=n.trim(),e.parent&&(n=(n=(n=function(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,function(e,t){for(t=6-(e=t).length;t--;)e="0"+e;return"\\"+e})}(n=t.substring(e.previous?e.previous.end:e.parent.start,e.start-1))).replace(p," ")).substring(n.lastIndexOf(";")+1),n=e.parsedSelector=e.selector=n.trim(),e.atRule=0===n.indexOf("@"),e.atRule?0===n.indexOf("@media")?e.type=o:n.match(f)&&(e.type=s,e.keyframesName=e.selector.split(p).pop()):e.type=0===n.indexOf("--")?a:r),n=e.rules)for(var c,l=0,u=n.length;l<u&&(c=n[l]);l++)i(c,t);return e}var r=1,s=7,o=4,a=1e3,c=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,l=/@import[^;]*;/gim,u=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,h=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,d=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,_=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,f=/^@[^\s]*keyframes/,p=/\s+/g,m=Promise.resolve();function g(t){(t=e[t])&&(t._applyShimCurrentVersion=t._applyShimCurrentVersion||0,t._applyShimValidatingVersion=t._applyShimValidatingVersion||0,t._applyShimNextVersion=(t._applyShimNextVersion||0)+1)}function y(e){return e._applyShimCurrentVersion===e._applyShimNextVersion}var b,v=!(window.ShadyDOM&&window.ShadyDOM.inUse);function w(e){b=(!e||!e.shimcssproperties)&&(v||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?b=window.ShadyCSS.nativeCss:window.ShadyCSS?(w(window.ShadyCSS),window.ShadyCSS=void 0):w(window.WebComponents&&window.WebComponents.flags);var E=b,k=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,A=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,x=/@media\s(.*)/,S=new Set;function T(e){return e?("string"==typeof e&&(e=n(e)),function e(t,n,i){i=void 0===i?"":i;var r="";if(t.cssText||t.rules){var s,o=t.rules;if((s=o)&&(s=!((s=o[0])&&s.selector&&0===s.selector.indexOf("--"))),s){s=0;for(var a,c=o.length;s<c&&(a=o[s]);s++)r=e(a,n,r)}else n=n?t.cssText:(n=(n=t.cssText).replace(u,"").replace(h,"")).replace(d,"").replace(_,""),(r=n.trim())&&(r="  "+r+"\n")}return r&&(t.selector&&(i+=t.selector+" {\n"),i+=r,t.selector&&(i+="}\n\n")),i}(e,E)):""}function P(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=n(e.textContent)),e.__cssRules||null}function O(e,t,n,i){if(e){var c=!1,l=e.type;if(i&&l===o){var u=e.selector.match(x);u&&(window.matchMedia(u[1]).matches||(c=!0))}if(l===r?t(e):n&&l===s?n(e):l===a&&(c=!0),(e=e.rules)&&!c){c=0,l=e.length;for(var h;c<l&&(h=e[c]);c++)O(h,t,n,i)}}}var C=/;\s*/m,N=/^\s*(initial)|(inherit)\s*$/,R=/\s*!important/;function I(){this.a={}}I.prototype.set=function(e,t){e=e.trim(),this.a[e]={h:t,i:{}}},I.prototype.get=function(e){return e=e.trim(),this.a[e]||null};var M=null;function D(){this.b=this.c=null,this.a=new I}function L(e,t){for(var n;n=A.exec(t);){var i=n[0],r=n[1];n=n.index;var s=t.slice(0,n+i.indexOf("@apply"));t=t.slice(n+i.length);var o=z(e,s);i=void 0;var a=e;r=r.replace(C,"");var c=[],l=a.a.get(r);if(l||(a.a.set(r,{}),l=a.a.get(r)),l){a.c&&(l.i[a.c]=!0);var u=l.h;for(i in u)l=[i,": var(",r,"_-_",i],(a=o&&o[i])&&l.push(",",a.replace(R,"")),l.push(")"),R.test(u[i])&&l.push(" !important"),c.push(l.join(""))}t=""+s+(i=c.join("; "))+t,A.lastIndex=n+i.length}return t}function z(e,t){t=t.split(";");for(var n,i,r,s={},o=0;o<t.length;o++)if((n=t[o])&&1<(r=n.split(":")).length){var a=e;i=n=r[0].trim(),r=r.slice(1).join(":");var c=N.exec(r);c&&(c[1]?(a.b||(a.b=document.createElement("meta"),a.b.setAttribute("apply-shim-measure",""),a.b.style.all="initial",document.head.appendChild(a.b)),i=window.getComputedStyle(a.b).getPropertyValue(i)):i="apply-shim-inherit",r=i),i=r,s[n]=i}return s}D.prototype.o=function(e){return e=A.test(e)||k.test(e),A.lastIndex=0,k.lastIndex=0,e},D.prototype.m=function(e,t){if(void 0===e.a){for(var n=[],i=e.content.querySelectorAll("style"),r=0;r<i.length;r++){var s=i[r];if(s.hasAttribute("shady-unscoped")){if(!v){var o=s.textContent;S.has(o)||(S.add(o),o=s.cloneNode(!0),document.head.appendChild(o)),s.parentNode.removeChild(s)}}else n.push(s.textContent),s.parentNode.removeChild(s)}(n=n.join("").trim())?((i=document.createElement("style")).textContent=n,e.content.insertBefore(i,e.content.firstChild),n=i):n=null,e.a=n}return(e=e.a)?this.j(e,t):null},D.prototype.j=function(e,t){t=void 0===t?"":t;var n=P(e);return this.l(n,t),e.textContent=T(n),n},D.prototype.f=function(e){var t=this,n=P(e);return O(n,function(e){":root"===e.selector&&(e.selector="html"),t.g(e)}),e.textContent=T(n),n},D.prototype.l=function(e,t){var n=this;this.c=t,O(e,function(e){n.g(e)}),this.c=null},D.prototype.g=function(e){e.cssText=function(e,t){return t=t.replace(k,function(t,n,i,r){return function(e,t,n,i,r){if(i&&function e(t,n){var i=t.indexOf("var(");if(-1===i)return n(t,"","","");e:{for(var r=0,s=i+3,o=t.length;s<o;s++)if("("===t[s])r++;else if(")"===t[s]&&0==--r)break e;s=-1}return r=t.substring(i+4,s),i=t.substring(0,i),t=e(t.substring(s+1),n),-1===(s=r.indexOf(","))?n(i,r.trim(),"",t):n(i,r.substring(0,s).trim(),r.substring(s+1).trim(),t)}(i,function(t,n){n&&e.a.get(n)&&(r="@apply "+n+";")}),!r)return t;var s=L(e,""+r),o=t.slice(0,t.indexOf("--")),a=s=z(e,s),c=e.a.get(n),l=c&&c.h;l?a=Object.assign(Object.create(l),s):e.a.set(n,a);var u,h=[],d=!1;for(u in a){var _=s[u];void 0===_&&(_="initial"),!l||u in l||(d=!0),h.push(n+"_-_"+u+": "+_)}return d&&function(e,t){if(M)for(var n in t.i)n!==e.c&&M(n)}(e,c),c&&(c.h=a),i&&(o=t+";"+o),""+o+h.join("; ")+";"}(e,t,n,i,r)}),L(e,t)}(this,e.parsedCssText),":root"===e.selector&&(e.selector=":host > *")},D.prototype.detectMixin=D.prototype.o,D.prototype.transformStyle=D.prototype.j,D.prototype.transformCustomStyle=D.prototype.f,D.prototype.transformRules=D.prototype.l,D.prototype.transformRule=D.prototype.g,D.prototype.transformTemplate=D.prototype.m,D.prototype._separator="_-_",Object.defineProperty(D.prototype,"invalidCallback",{get:function(){return M},set:function(e){M=e}});var B=new D;function U(){this.a=null,B.invalidCallback=g}function j(e){e.a||(e.a=window.ShadyCSS.CustomStyleInterface,e.a&&(e.a.transformCallback=function(e){B.f(e)},e.a.validateCallback=function(){requestAnimationFrame(function(){e.a.enqueued&&e.flushCustomStyles()})}))}if(U.prototype.prepareTemplate=function(t,n){j(this),e[n]=t,n=B.m(t,n),t._styleAst=n},U.prototype.flushCustomStyles=function(){if(j(this),this.a){var e=this.a.processStyles();if(this.a.enqueued){for(var t=0;t<e.length;t++){var n=this.a.getStyleForCustomStyle(e[t]);n&&B.f(n)}this.a.enqueued=!1}}},U.prototype.styleSubtree=function(e,t){if(j(this),t)for(var n in t)null===n?e.style.removeProperty(n):e.style.setProperty(n,t[n]);if(e.shadowRoot)for(this.styleElement(e),e=e.shadowRoot.children||e.shadowRoot.childNodes,t=0;t<e.length;t++)this.styleSubtree(e[t]);else for(e=e.children||e.childNodes,t=0;t<e.length;t++)this.styleSubtree(e[t])},U.prototype.styleElement=function(t){j(this);var n,i=t.localName;n=i?-1<i.indexOf("-")?i:t.getAttribute&&t.getAttribute("is")||"":t.is,(i=e[n])&&!y(i)&&((y(i)||i._applyShimValidatingVersion!==i._applyShimNextVersion)&&(this.prepareTemplate(i,n),function(e){e._applyShimValidatingVersion=e._applyShimNextVersion,e.b||(e.b=!0,m.then(function(){e._applyShimCurrentVersion=e._applyShimNextVersion,e.b=!1}))}(i)),(t=t.shadowRoot)&&(t=t.querySelector("style"))&&(t.__cssRules=i._styleAst,t.textContent=T(i._styleAst)))},U.prototype.styleDocument=function(e){j(this),this.styleSubtree(document.body,e)},!window.ShadyCSS||!window.ShadyCSS.ScopingShim){var q=new U,F=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate:function(e,t){q.flushCustomStyles(),q.prepareTemplate(e,t)},prepareTemplateStyles:function(e,t,n){this.prepareTemplate(e,t,n)},prepareTemplateDom:function(){},styleSubtree:function(e,t){q.flushCustomStyles(),q.styleSubtree(e,t)},styleElement:function(e){q.flushCustomStyles(),q.styleElement(e)},styleDocument:function(e){q.flushCustomStyles(),q.styleDocument(e)},getComputedStyleValue:function(e,t){return(e=window.getComputedStyle(e).getPropertyValue(t))?e.trim():""},flushCustomStyles:function(){q.flushCustomStyles()},nativeCss:E,nativeShadow:v},F&&(window.ShadyCSS.CustomStyleInterface=F)}window.ShadyCSS.ApplyShim=B}.call(this),function(){var e,t=!(window.ShadyDOM&&window.ShadyDOM.inUse);function n(n){e=(!n||!n.shimcssproperties)&&(t||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?e=window.ShadyCSS.nativeCss:window.ShadyCSS?(n(window.ShadyCSS),window.ShadyCSS=void 0):n(window.WebComponents&&window.WebComponents.flags);var i=e;function r(e,t){for(var n in t)null===n?e.style.removeProperty(n):e.style.setProperty(n,t[n])}var s,o=null,a=window.HTMLImports&&window.HTMLImports.whenReady||null;function c(e){requestAnimationFrame(function(){a?a(e):(o||(o=new Promise(function(e){s=e}),"complete"===document.readyState?s():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&s()})),o.then(function(){e&&e()}))})}var l=null,u=null;function h(){this.customStyles=[],this.enqueued=!1,c(function(){window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}function d(e){!e.enqueued&&u&&(e.enqueued=!0,c(u))}h.prototype.c=function(e){e.__seenByShadyCSS||(e.__seenByShadyCSS=!0,this.customStyles.push(e),d(this))},h.prototype.b=function(e){return e.__shadyCSSCachedStyle?e.__shadyCSSCachedStyle:e.getStyle?e.getStyle():e},h.prototype.a=function(){for(var e=this.customStyles,t=0;t<e.length;t++){var n=e[t];if(!n.__shadyCSSCachedStyle){var i=this.b(n);i&&(i=i.__appliedElement||i,l&&l(i),n.__shadyCSSCachedStyle=i)}}return e},h.prototype.addCustomStyle=h.prototype.c,h.prototype.getStyleForCustomStyle=h.prototype.b,h.prototype.processStyles=h.prototype.a,Object.defineProperties(h.prototype,{transformCallback:{get:function(){return l},set:function(e){l=e}},validateCallback:{get:function(){return u},set:function(e){var t=!1;u||(t=!0),u=e,t&&d(this)}}});var _=new h;window.ShadyCSS||(window.ShadyCSS={prepareTemplate:function(){},prepareTemplateDom:function(){},prepareTemplateStyles:function(){},styleSubtree:function(e,t){_.a(),r(e,t)},styleElement:function(){_.a()},styleDocument:function(e){_.a(),r(document.body,e)},getComputedStyleValue:function(e,t){return(e=window.getComputedStyle(e).getPropertyValue(t))?e.trim():""},flushCustomStyles:function(){},nativeCss:i,nativeShadow:t}),window.ShadyCSS.CustomStyleInterface=_}.call(this),function(){"use strict";const e=window.Polymer;window.Polymer=function(e){return window.Polymer._polymerFn(e)},e&&Object.assign(Polymer,e),window.Polymer._polymerFn=function(e){throw new Error("Load polymer.html to use the Polymer() function.")},window.Polymer.version="2.6.0",window.JSCompiler_renameProperty=function(e,t){return e}}(),function(){"use strict";let e,t,n=/(url\()([^)]*)(\))/g,i=/(^\/)|(^#)|(^[\w-\d]*:)/;function r(n,r){if(n&&i.test(n))return n;if(void 0===e){e=!1;try{const t=new URL("b","http://a");t.pathname="c%20d",e="http://a/c%20d"===t.href}catch(e){}}return r||(r=document.baseURI||window.location.href),e?new URL(n,r).href:(t||((t=document.implementation.createHTMLDocument("temp")).base=t.createElement("base"),t.head.appendChild(t.base),t.anchor=t.createElement("a"),t.body.appendChild(t.anchor)),t.base.href=r,t.anchor.href=n,t.anchor.href||n)}Polymer.ResolveUrl={resolveCss:function(e,t){return e.replace(n,function(e,n,i,s){return n+"'"+r(i.replace(/["']/g,""),t)+"'"+s})},resolveUrl:r,pathFromUrl:function(e){return e.substring(0,e.lastIndexOf("/")+1)}}}(),function(){"use strict";Polymer.Settings=Polymer.Settings||{},Polymer.Settings.useShadow=!window.ShadyDOM,Polymer.Settings.useNativeCSSProperties=Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss),Polymer.Settings.useNativeCustomElements=!window.customElements.polyfillWrapFlushCallback;let e=Polymer.rootPath||Polymer.ResolveUrl.pathFromUrl(document.baseURI||window.location.href);Polymer.rootPath=e,Polymer.setRootPath=function(e){Polymer.rootPath=e};let t=Polymer.sanitizeDOMValue;Polymer.sanitizeDOMValue=t,Polymer.setSanitizeDOMValue=function(e){Polymer.sanitizeDOMValue=e};Polymer.passiveTouchGestures=!1,Polymer.setPassiveTouchGestures=function(e){Polymer.passiveTouchGestures=e}}(),function(){"use strict";let e=0;function t(){}t.prototype.__mixinApplications,t.prototype.__mixinSet,Polymer.dedupingMixin=function(t){let n=t.__mixinApplications;n||(n=new WeakMap,t.__mixinApplications=n);let i=e++;return function(e){let r=e.__mixinSet;if(r&&r[i])return e;let s=n,o=s.get(e);o||(o=t(e),s.set(e,o));let a=Object.create(o.__mixinSet||r||null);return a[i]=!0,o.__mixinSet=a,o}}}(),function(){"use strict";function e(e){const t=customElements.get("dom-module");return t?t.import(e):null}function t(e){let t=e.body?e.body:e;const n=Polymer.ResolveUrl.resolveCss(t.textContent,e.baseURI),i=document.createElement("style");return i.textContent=n,i}const n={stylesFromModules(e){const t=e.trim().split(/\s+/),n=[];for(let e=0;e<t.length;e++)n.push(...this.stylesFromModule(t[e]));return n},stylesFromModule(t){const n=e(t);if(!n)return console.warn("Could not find style data in module named",t),[];if(void 0===n._styles){const e=[];e.push(...this._stylesFromModuleImports(n));const t=n.querySelector("template");t&&e.push(...this.stylesFromTemplate(t,n.assetpath)),n._styles=e}return n._styles},stylesFromTemplate(e,t){if(!e._styles){const n=[],i=e.content.querySelectorAll("style");for(let e=0;e<i.length;e++){let r=i[e],s=r.getAttribute("include");s&&n.push(...this.stylesFromModules(s).filter(function(e,t,n){return n.indexOf(e)===t})),t&&(r.textContent=Polymer.ResolveUrl.resolveCss(r.textContent,t)),n.push(r)}e._styles=n}return e._styles},stylesFromModuleImports(t){let n=e(t);return n?this._stylesFromModuleImports(n):[]},_stylesFromModuleImports(e){const n=[],i=e.querySelectorAll("link[rel=import][type~=css]");for(let e=0;e<i.length;e++){let r=i[e];if(r.import){const e=r.import,i=r.hasAttribute("shady-unscoped");if(i&&!e._unscopedStyle){const n=t(e);n.setAttribute("shady-unscoped",""),e._unscopedStyle=n}else e._style||(e._style=t(e));n.push(i?e._unscopedStyle:e._style)}}return n},cssFromModules(e){let t=e.trim().split(/\s+/),n="";for(let e=0;e<t.length;e++)n+=this.cssFromModule(t[e]);return n},cssFromModule(t){let n=e(t);if(n&&void 0===n._cssText){let e=this._cssFromModuleImports(n),t=n.querySelector("template");t&&(e+=this.cssFromTemplate(t,n.assetpath)),n._cssText=e||null}return n||console.warn("Could not find style data in module named",t),n&&n._cssText||""},cssFromTemplate(e,t){let n="";const i=this.stylesFromTemplate(e,t);for(let e=0;e<i.length;e++){let t=i[e];t.parentNode&&t.parentNode.removeChild(t),n+=t.textContent}return n},cssFromModuleImports(t){let n=e(t);return n?this._cssFromModuleImports(n):""},_cssFromModuleImports(e){let t="",n=this._stylesFromModuleImports(e);for(let e=0;e<n.length;e++)t+=n[e].textContent;return t}};Polymer.StyleGather=n}(),function(){"use strict";let e={},t={};class n extends HTMLElement{static get observedAttributes(){return["id"]}static import(n,i){if(n){let r=function(n){return e[n]||t[n.toLowerCase()]}(n);return r&&i?r.querySelector(i):r}return null}attributeChangedCallback(e,t,n){t!==n&&this.register()}get assetpath(){if(!this.__assetpath){const e=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,t=Polymer.ResolveUrl.resolveUrl(this.getAttribute("assetpath")||"",e.baseURI);this.__assetpath=Polymer.ResolveUrl.pathFromUrl(t)}return this.__assetpath}register(n){var i;(n=n||this.id)&&(this.id=n,e[n]=this,t[n.toLowerCase()]=this,(i=this).querySelector("style")&&console.warn("dom-module %s has style outside template",i.id))}}n.prototype.modules=e,customElements.define("dom-module",n),Polymer.DomModule=n}(),function(){"use strict";const e={isPath:function(e){return e.indexOf(".")>=0},root:function(e){let t=e.indexOf(".");return-1===t?e:e.slice(0,t)},isAncestor:function(e,t){return 0===e.indexOf(t+".")},isDescendant:function(e,t){return 0===t.indexOf(e+".")},translate:function(e,t,n){return t+n.slice(e.length)},matches:function(e,t){return e===t||this.isAncestor(e,t)||this.isDescendant(e,t)},normalize:function(e){if(Array.isArray(e)){let t=[];for(let n=0;n<e.length;n++){let i=e[n].toString().split(".");for(let e=0;e<i.length;e++)t.push(i[e])}return t.join(".")}return e},split:function(e){return Array.isArray(e)?this.normalize(e).split("."):e.toString().split(".")},get:function(e,t,n){let i=e,r=this.split(t);for(let e=0;e<r.length;e++){if(!i)return;i=i[r[e]]}return n&&(n.path=r.join(".")),i},set:function(e,t,n){let i=e,r=this.split(t),s=r[r.length-1];if(r.length>1){for(let e=0;e<r.length-1;e++){if(!(i=i[r[e]]))return}i[s]=n}else i[t]=n;return r.join(".")}};e.isDeep=e.isPath,Polymer.Path=e}(),function(){"use strict";const e={},t=/-[a-z]/g,n=/([A-Z])/g,i={dashToCamelCase:n=>e[n]||(e[n]=n.indexOf("-")<0?n:n.replace(t,e=>e[1].toUpperCase())),camelToDashCase:t=>e[t]||(e[t]=t.replace(n,"-$1").toLowerCase())};Polymer.CaseMap=i}(),function(){"use strict";let e=0,t=0,n=[],i=0,r=document.createTextNode("");new window.MutationObserver(function(){const e=n.length;for(let t=0;t<e;t++){let e=n[t];if(e)try{e()}catch(e){setTimeout(()=>{throw e})}}n.splice(0,e),t+=e}).observe(r,{characterData:!0}),Polymer.Async={timeOut:{after:e=>({run:t=>window.setTimeout(t,e),cancel(e){window.clearTimeout(e)}}),run:(e,t)=>window.setTimeout(e,t),cancel(e){window.clearTimeout(e)}},animationFrame:{run:e=>window.requestAnimationFrame(e),cancel(e){window.cancelAnimationFrame(e)}},idlePeriod:{run:e=>window.requestIdleCallback?window.requestIdleCallback(e):window.setTimeout(e,16),cancel(e){window.cancelIdleCallback?window.cancelIdleCallback(e):window.clearTimeout(e)}},microTask:{run:t=>(r.textContent=i++,n.push(t),e++),cancel(e){const i=e-t;if(i>=0){if(!n[i])throw new Error("invalid async handle: "+e);n[i]=null}}}}}(),function(){"use strict";const e=Polymer.Async.microTask;Polymer.PropertiesChanged=Polymer.dedupingMixin(t=>{return class extends t{static createProperties(e){const t=this.prototype;for(let n in e)n in t||t._createPropertyAccessor(n)}static attributeNameForProperty(e){return e.toLowerCase()}static typeForProperty(e){}_createPropertyAccessor(e,t){this._addPropertyToAttributeMap(e),this.hasOwnProperty("__dataHasAccessor")||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[e]||(this.__dataHasAccessor[e]=!0,this._definePropertyAccessor(e,t))}_addPropertyToAttributeMap(e){if(this.hasOwnProperty("__dataAttributes")||(this.__dataAttributes=Object.assign({},this.__dataAttributes)),!this.__dataAttributes[e]){const t=this.constructor.attributeNameForProperty(e);this.__dataAttributes[t]=e}}_definePropertyAccessor(e,t){Object.defineProperty(this,e,{get(){return this._getProperty(e)},set:t?function(){}:function(t){this._setProperty(e,t)}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let e in this.__dataHasAccessor)this.hasOwnProperty(e)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[e]=this[e],delete this[e])}_initializeInstanceProperties(e){Object.assign(this,e)}_setProperty(e,t){this._setPendingProperty(e,t)&&this._invalidateProperties()}_getProperty(e){return this.__data[e]}_setPendingProperty(e,t,n){let i=this.__data[e],r=this._shouldPropertyChange(e,t,i);return r&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),!this.__dataOld||e in this.__dataOld||(this.__dataOld[e]=i),this.__data[e]=t,this.__dataPending[e]=t),r}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,e.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){const e=this.__data,t=this.__dataPending,n=this.__dataOld;this._shouldPropertiesChange(e,t,n)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(e,t,n))}_shouldPropertiesChange(e,t,n){return Boolean(t)}_propertiesChanged(e,t,n){}_shouldPropertyChange(e,t,n){return n!==t&&(n==n||t==t)}attributeChangedCallback(e,t,n){t!==n&&this._attributeToProperty(e,n),super.attributeChangedCallback&&super.attributeChangedCallback(e,t,n)}_attributeToProperty(e,t,n){if(!this.__serializing){const i=this.__dataAttributes,r=i&&i[e]||e;this[r]=this._deserializeValue(t,n||this.constructor.typeForProperty(r))}}_propertyToAttribute(e,t,n){this.__serializing=!0,n=arguments.length<3?this[e]:n,this._valueToNodeAttribute(this,n,t||this.constructor.attributeNameForProperty(e)),this.__serializing=!1}_valueToNodeAttribute(e,t,n){const i=this._serializeValue(t);void 0===i?e.removeAttribute(n):e.setAttribute(n,i)}_serializeValue(e){switch(typeof e){case"boolean":return e?"":void 0;default:return null!=e?e.toString():void 0}}_deserializeValue(e,t){switch(t){case Boolean:return null!==e;case Number:return Number(e);default:return e}}}})}(),function(){"use strict";let e=Polymer.CaseMap;const t={};let n=HTMLElement.prototype;for(;n;){let e=Object.getOwnPropertyNames(n);for(let n=0;n<e.length;n++)t[e[n]]=!0;n=Object.getPrototypeOf(n)}Polymer.PropertyAccessors=Polymer.dedupingMixin(n=>{const i=Polymer.PropertiesChanged(n);return class extends i{static createPropertiesForAttributes(){let t=this.observedAttributes;for(let n=0;n<t.length;n++)this.prototype._createPropertyAccessor(e.dashToCamelCase(t[n]))}static attributeNameForProperty(t){return e.camelToDashCase(t)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(e){for(let t in e)this._setProperty(t,e[t])}_ensureAttribute(e,t){const n=this;n.hasAttribute(e)||this._valueToNodeAttribute(n,t,e)}_serializeValue(e){switch(typeof e){case"object":if(e instanceof Date)return e.toString();if(e)try{return JSON.stringify(e)}catch(e){return""}default:return super._serializeValue(e)}}_deserializeValue(e,t){let n;switch(t){case Object:try{n=JSON.parse(e)}catch(t){n=e}break;case Array:try{n=JSON.parse(e)}catch(t){n=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${e}`)}break;case Date:n=isNaN(e)?String(e):Number(e),n=new Date(n);break;default:n=super._deserializeValue(e,t)}return n}_definePropertyAccessor(e,n){!function(e,n){if(!t[n]){let t=e[n];void 0!==t&&(e.__data?e._setPendingProperty(n,t):(e.__dataProto?e.hasOwnProperty(JSCompiler_renameProperty("__dataProto",e))||(e.__dataProto=Object.create(e.__dataProto)):e.__dataProto={},e.__dataProto[n]=t))}}(this,e),super._definePropertyAccessor(e,n)}_hasAccessor(e){return this.__dataHasAccessor&&this.__dataHasAccessor[e]}_isPropertyPending(e){return Boolean(this.__dataPending&&e in this.__dataPending)}}})}(),function(){"use strict";const e={"dom-if":!0,"dom-repeat":!0};function t(t){let n=t.getAttribute("is");if(n&&e[n]){let e=t;for(e.removeAttribute("is"),t=e.ownerDocument.createElement(n),e.parentNode.replaceChild(t,e),t.appendChild(e);e.attributes.length;)t.setAttribute(e.attributes[0].name,e.attributes[0].value),e.removeAttribute(e.attributes[0].name)}return t}function n(e,t){let i=t.parentInfo&&n(e,t.parentInfo);if(!i)return e;for(let e=i.firstChild,n=0;e;e=e.nextSibling)if(t.parentIndex===n++)return e}function i(e,t,n,i){i.id&&(t[i.id]=n)}function r(e,t,n){if(n.events&&n.events.length)for(let i,r=0,s=n.events;r<s.length&&(i=s[r]);r++)e._addMethodEventListenerToNode(t,i.name,i.value,e)}function s(e,t,n){n.templateInfo&&(t._templateInfo=n.templateInfo)}Polymer.TemplateStamp=Polymer.dedupingMixin(e=>{return class extends e{static _parseTemplate(e,t){if(!e._templateInfo){let n=e._templateInfo={};n.nodeInfoList=[],n.stripWhiteSpace=t&&t.stripWhiteSpace||e.hasAttribute("strip-whitespace"),this._parseTemplateContent(e,n,{parent:null})}return e._templateInfo}static _parseTemplateContent(e,t,n){return this._parseTemplateNode(e.content,t,n)}static _parseTemplateNode(e,t,n){let i,r=e;return"template"!=r.localName||r.hasAttribute("preserve-content")?"slot"===r.localName&&(t.hasInsertionPoint=!0):i=this._parseTemplateNestedTemplate(r,t,n)||i,r.firstChild&&(i=this._parseTemplateChildNodes(r,t,n)||i),r.hasAttributes&&r.hasAttributes()&&(i=this._parseTemplateNodeAttributes(r,t,n)||i),i}static _parseTemplateChildNodes(e,n,i){if("script"!==e.localName&&"style"!==e.localName)for(let r,s=e.firstChild,o=0;s;s=r){if("template"==s.localName&&(s=t(s)),r=s.nextSibling,s.nodeType===Node.TEXT_NODE){let t=r;for(;t&&t.nodeType===Node.TEXT_NODE;)s.textContent+=t.textContent,r=t.nextSibling,e.removeChild(t),t=r;if(n.stripWhiteSpace&&!s.textContent.trim()){e.removeChild(s);continue}}let a={parentIndex:o,parentInfo:i};this._parseTemplateNode(s,n,a)&&(a.infoIndex=n.nodeInfoList.push(a)-1),s.parentNode&&o++}}static _parseTemplateNestedTemplate(e,t,n){let i=this._parseTemplate(e,t);return(i.content=e.content.ownerDocument.createDocumentFragment()).appendChild(e.content),n.templateInfo=i,!0}static _parseTemplateNodeAttributes(e,t,n){let i=!1,r=Array.from(e.attributes);for(let s,o=r.length-1;s=r[o];o--)i=this._parseTemplateNodeAttribute(e,t,n,s.name,s.value)||i;return i}static _parseTemplateNodeAttribute(e,t,n,i,r){return"on-"===i.slice(0,3)?(e.removeAttribute(i),n.events=n.events||[],n.events.push({name:i.slice(3),value:r}),!0):"id"===i&&(n.id=r,!0)}static _contentForTemplate(e){let t=e._templateInfo;return t&&t.content||e.content}_stampTemplate(e){e&&!e.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e);let t=this.constructor._parseTemplate(e),o=t.nodeInfoList,a=t.content||e.content,c=document.importNode(a,!0);c.__noInsertionPoint=!t.hasInsertionPoint;let l=c.nodeList=new Array(o.length);c.$={};for(let e,t=0,a=o.length;t<a&&(e=o[t]);t++){let o=l[t]=n(c,e);i(0,c.$,o,e),s(0,o,e),r(this,o,e)}return c=c}_addMethodEventListenerToNode(e,t,n,i){let r=function(e,t,n){return e=e._methodHost||e,function(t){e[n]?e[n](t,t.detail):console.warn("listener method `"+n+"` not defined")}}(i=i||e,0,n);return this._addEventListenerToNode(e,t,r),r}_addEventListenerToNode(e,t,n){e.addEventListener(t,n)}_removeEventListenerFromNode(e,t,n){e.removeEventListener(t,n)}}})}(),function(){"use strict";const e=Polymer.CaseMap;let t=0;const n={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},i=/[A-Z]/;let r;function s(e,t){let n=e[t];if(n){if(!e.hasOwnProperty(t)){n=e[t]=Object.create(e[t]);for(let e in n){let t=n[e],i=n[e]=Array(t.length);for(let e=0;e<t.length;e++)i[e]=t[e]}}}else n=e[t]={};return n}function o(e,n,i,r,s,o){if(n){let c=!1,l=t++;for(let t in i)a(e,n,l,t,i,r,s,o)&&(c=!0);return c}return!1}function a(e,t,n,i,r,s,o,a){let l=!1,u=t[o?Polymer.Path.root(i):i];if(u)for(let t,h=0,d=u.length;h<d&&(t=u[h]);h++)t.info&&t.info.lastRun===n||o&&!c(i,t.trigger)||(t.info&&(t.info.lastRun=n),t.fn(e,i,r,s,t.info,o,a),l=!0);return l}function c(e,t){if(t){let n=t.name;return n==e||t.structured&&Polymer.Path.isAncestor(n,e)||t.wildcard&&Polymer.Path.isDescendant(n,e)}return!0}function l(e,t,n,i,r){let s="string"==typeof r.method?e[r.method]:r.method,o=r.property;s?s.call(e,e.__data[o],i[o]):r.dynamicFn||console.warn("observer method `"+r.method+"` not defined")}function u(e,t,n){let i=Polymer.Path.root(t);if(i!==t){return h(e,Polymer.CaseMap.camelToDashCase(i)+"-changed",n[t],t),!0}return!1}function h(e,t,n,i){let r={value:n,queueProperty:!0};i&&(r.path=i),e.dispatchEvent(new CustomEvent(t,{detail:r}))}function d(e,t,n,i,r,s){let o=(s?Polymer.Path.root(t):t)!=t?t:null,a=o?Polymer.Path.get(e,o):e.__data[t];o&&void 0===a&&(a=n[t]),h(e,r.eventName,a,o)}function _(e,t,n,i,r){let s=e.__data[t];Polymer.sanitizeDOMValue&&(s=Polymer.sanitizeDOMValue(s,r.attrName,"attribute",e)),e._propertyToAttribute(t,r.attrName,s)}function f(e,t,n,i,r){let s=w(e,t,n,i,r),o=r.methodInfo;e.__dataHasAccessor&&e.__dataHasAccessor[o]?e._setPendingProperty(o,s,!0):e[o]=s}function p(t,n,i,r,s,o,a){i.bindings=i.bindings||[];let c={kind:r,target:s,parts:o,literal:a,isCompound:1!==o.length};if(i.bindings.push(c),function(e){return Boolean(e.target)&&"attribute"!=e.kind&&"text"!=e.kind&&!e.isCompound&&"{"===e.parts[0].mode}(c)){let{event:t,negate:n}=c.parts[0];c.listenerEvent=t||e.camelToDashCase(s)+"-changed",c.listenerNegate=n}let l=n.nodeInfoList.length;for(let e=0;e<c.parts.length;e++){let i=c.parts[e];i.compoundIndex=e,m(t,n,c,i,l)}}function m(e,t,n,i,r){if(!i.literal)if("attribute"===n.kind&&"-"===n.target[0])console.warn("Cannot set attribute "+n.target+' because "-" is not a valid attribute starting character');else{let s=i.dependencies,o={index:r,binding:n,part:i,evaluator:e};for(let n=0;n<s.length;n++){let i=s[n];"string"==typeof i&&((i=S(i)).wildcard=!0),e._addTemplatePropertyEffect(t,i.rootProperty,{fn:g,info:o,trigger:i})}}}function g(e,t,i,r,s,o,a){let c=a[s.index],l=s.binding,u=s.part;if(o&&u.source&&t.length>u.source.length&&"property"==l.kind&&!l.isCompound&&c.__isPropertyEffectsClient&&c.__dataHasAccessor&&c.__dataHasAccessor[l.target]){let n=i[t];t=Polymer.Path.translate(u.source,l.target,t),c._setPendingPropertyOrPath(t,n,!1,!0)&&e._enqueueClient(c)}else{!function(e,t,i,r,s){s=function(e,t,n,i){if(n.isCompound){let r=e.__dataCompoundStorage[n.target];r[i.compoundIndex]=t,t=r.join("")}return"attribute"!==n.kind&&("textContent"!==n.target&&("value"!==n.target||"input"!==e.localName&&"textarea"!==e.localName)||(t=null==t?"":t)),t}(t,s,i,r),Polymer.sanitizeDOMValue&&(s=Polymer.sanitizeDOMValue(s,i.target,i.kind,t));if("attribute"==i.kind)e._valueToNodeAttribute(t,s,i.target);else{let r=i.target;t.__isPropertyEffectsClient&&t.__dataHasAccessor&&t.__dataHasAccessor[r]?t[n.READ_ONLY]&&t[n.READ_ONLY][r]||t._setPendingProperty(r,s)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,r,s)}}(e,c,l,u,s.evaluator._evaluateBinding(e,u,t,i,r,o))}}function y(e,t){if(t.isCompound){let n=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),i=t.parts,r=new Array(i.length);for(let e=0;e<i.length;e++)r[e]=i[e].literal;let s=t.target;n[s]=r,t.literal&&"property"==t.kind&&(e[s]=t.literal)}}function b(e,t,i){if(i.listenerEvent){let r=i.parts[0];e.addEventListener(i.listenerEvent,function(e){!function(e,t,i,r,s){let o,a=e.detail,c=a&&a.path;c?(r=Polymer.Path.translate(i,r,c),o=a&&a.value):o=e.target[i],o=s?!o:o,t[n.READ_ONLY]&&t[n.READ_ONLY][r]||!t._setPendingPropertyOrPath(r,o,!0,Boolean(c))||a&&a.queueProperty||t._invalidateProperties()}(e,t,i.target,r.source,r.negate)})}}function v(e,t,n,i,r,s){s=t.static||s&&("object"!=typeof s||s[t.methodName]);let o={methodName:t.methodName,args:t.args,methodInfo:r,dynamicFn:s};for(let r,s=0;s<t.args.length&&(r=t.args[s]);s++)r.literal||e._addPropertyEffect(r.rootProperty,n,{fn:i,info:o,trigger:r});s&&e._addPropertyEffect(t.methodName,n,{fn:i,info:o})}function w(e,t,n,i,r){let s=e._methodHost||e,o=s[r.methodName];if(o){let i=function(e,t,n,i){let r=[];for(let s=0,o=t.length;s<o;s++){let o,a=t[s],c=a.name;if(a.literal?o=a.value:a.structured?void 0===(o=Polymer.Path.get(e,c))&&(o=i[c]):o=e[c],a.wildcard){let e=0===c.indexOf(n+"."),t=0===n.indexOf(c)&&!e;r[s]={path:t?n:c,value:t?i[n]:o,base:o}}else r[s]=o}return r}(e.__data,r.args,t,n);return o.apply(s,i)}r.dynamicFn||console.warn("method `"+r.methodName+"` not defined")}const E=[],k=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*)(?:,\\s*(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g");function A(e){let t="";for(let n=0;n<e.length;n++){t+=e[n].literal||""}return t}function x(e){let t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){let e={methodName:t[1],static:!0,args:E};if(t[2].trim()){return function(e,t){return t.args=e.map(function(e){let n=S(e);return n.literal||(t.static=!1),n},this),t}(t[2].replace(/\\,/g,"&comma;").split(","),e)}return e}return null}function S(e){let t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),n={name:t,value:"",literal:!1},i=t[0];switch("-"===i&&(i=t[1]),i>="0"&&i<="9"&&(i="#"),i){case"'":case'"':n.value=t.slice(1,-1),n.literal=!0;break;case"#":n.value=Number(t),n.literal=!0}return n.literal||(n.rootProperty=Polymer.Path.root(t),n.structured=Polymer.Path.isPath(t),n.structured&&(n.wildcard=".*"==t.slice(-2),n.wildcard&&(n.name=t.slice(0,-2)))),n}function T(e,t,n,i){let r=n+".splices";e.notifyPath(r,{indexSplices:i}),e.notifyPath(n+".length",t.length),e.__data[r]={indexSplices:null}}function P(e,t,n,i,r,s){T(e,t,n,[{index:i,addedCount:r,removed:s,object:t,type:"splice"}])}Polymer.PropertyEffects=Polymer.dedupingMixin(c=>{const h=Polymer.TemplateStamp(Polymer.PropertyAccessors(c));class m extends h{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataCounter=0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo}get PROPERTY_EFFECT_TYPES(){return n}_initializeProperties(){super._initializeProperties(),O.registerHost(this),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_initializeProtoProperties(e){this.__data=Object.create(e),this.__dataPending=Object.create(e),this.__dataOld={}}_initializeInstanceProperties(e){let t=this[n.READ_ONLY];for(let n in e)t&&t[n]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[n]=this.__dataPending[n]=e[n])}_addPropertyEffect(e,t,i){this._createPropertyAccessor(e,t==n.READ_ONLY);let r=s(this,t)[e];r||(r=this[t][e]=[]),r.push(i)}_removePropertyEffect(e,t,n){let i=s(this,t)[e],r=i.indexOf(n);r>=0&&i.splice(r,1)}_hasPropertyEffect(e,t){let n=this[t];return Boolean(n&&n[e])}_hasReadOnlyEffect(e){return this._hasPropertyEffect(e,n.READ_ONLY)}_hasNotifyEffect(e){return this._hasPropertyEffect(e,n.NOTIFY)}_hasReflectEffect(e){return this._hasPropertyEffect(e,n.REFLECT)}_hasComputedEffect(e){return this._hasPropertyEffect(e,n.COMPUTE)}_setPendingPropertyOrPath(e,t,n,i){if(i||Polymer.Path.root(Array.isArray(e)?e[0]:e)!==e){if(!i){let n=Polymer.Path.get(this,e);if(!(e=Polymer.Path.set(this,e,t))||!super._shouldPropertyChange(e,t,n))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(e,t,n))return function(e,t,n){let i=e.__dataLinkedPaths;if(i){let r;for(let s in i){let o=i[s];Polymer.Path.isDescendant(s,t)?(r=Polymer.Path.translate(s,o,t),e._setPendingPropertyOrPath(r,n,!0,!0)):Polymer.Path.isDescendant(o,t)&&(r=Polymer.Path.translate(o,s,t),e._setPendingPropertyOrPath(r,n,!0,!0))}}}(this,e,t),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[e])return this._setPendingProperty(e,t,n);this[e]=t}return!1}_setUnmanagedPropertyToNode(e,t,n){n===e[t]&&"object"!=typeof n||(e[t]=n)}_setPendingProperty(e,t,i){let r=this.__dataHasPaths&&Polymer.Path.isPath(e),s=r?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(e,t,s[e])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),e in this.__dataOld||(this.__dataOld[e]=this.__data[e]),r?this.__dataTemp[e]=t:this.__data[e]=t,this.__dataPending[e]=t,(r||this[n.NOTIFY]&&this[n.NOTIFY][e])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[e]=i),!0)}_setProperty(e,t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(e){this.__dataPendingClients=this.__dataPendingClients||[],e!==this&&this.__dataPendingClients.push(e)}_flushProperties(){this.__dataCounter++,super._flushProperties(),this.__dataCounter--}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let e=this.__dataPendingClients;if(e){this.__dataPendingClients=null;for(let t=0;t<e.length;t++){let n=e[t];n.__dataEnabled?n.__dataPending&&n._flushProperties():n._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(e,t){for(let i in e)!t&&this[n.READ_ONLY]&&this[n.READ_ONLY][i]||this._setPendingPropertyOrPath(i,e[i],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(e,i,r){let s=this.__dataHasPaths;this.__dataHasPaths=!1,function(e,t,i,r){let s=e[n.COMPUTE];if(s){let n=t;for(;o(e,s,n,i,r);)Object.assign(i,e.__dataOld),Object.assign(t,e.__dataPending),n=e.__dataPending,e.__dataPending=null}}(this,i,r,s);let c=this.__dataToNotify;this.__dataToNotify=null,this._propagatePropertyChanges(i,r,s),this._flushClients(),o(this,this[n.REFLECT],i,r,s),o(this,this[n.OBSERVE],i,r,s),c&&function(e,i,r,s,o){let c,l,h=e[n.NOTIFY],d=t++;for(let t in i)i[t]&&(h&&a(e,h,d,t,r,s,o)?c=!0:o&&u(e,t,r)&&(c=!0));c&&(l=e.__dataHost)&&l._invalidateProperties&&l._invalidateProperties()}(this,c,i,r,s),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(e,t,i){this[n.PROPAGATE]&&o(this,this[n.PROPAGATE],e,t,i);let r=this.__templateInfo;for(;r;)o(this,r.propertyEffects,e,t,i,r.nodeList),r=r.nextTemplateInfo}linkPaths(e,t){e=Polymer.Path.normalize(e),t=Polymer.Path.normalize(t),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[e]=t}unlinkPaths(e){e=Polymer.Path.normalize(e),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[e]}notifySplices(e,t){let n={path:""};T(this,Polymer.Path.get(this,e,n),n.path,t)}get(e,t){return Polymer.Path.get(t||this,e)}set(e,t,i){i?Polymer.Path.set(i,e,t):this[n.READ_ONLY]&&this[n.READ_ONLY][e]||this._setPendingPropertyOrPath(e,t,!0)&&this._invalidateProperties()}push(e,...t){let n={path:""},i=Polymer.Path.get(this,e,n),r=i.length,s=i.push(...t);return t.length&&P(this,i,n.path,r,t.length,[]),s}pop(e){let t={path:""},n=Polymer.Path.get(this,e,t),i=Boolean(n.length),r=n.pop();return i&&P(this,n,t.path,n.length,0,[r]),r}splice(e,t,n,...i){let r,s={path:""},o=Polymer.Path.get(this,e,s);return t<0?t=o.length-Math.floor(-t):t&&(t=Math.floor(t)),r=2===arguments.length?o.splice(t):o.splice(t,n,...i),(i.length||r.length)&&P(this,o,s.path,t,i.length,r),r}shift(e){let t={path:""},n=Polymer.Path.get(this,e,t),i=Boolean(n.length),r=n.shift();return i&&P(this,n,t.path,0,0,[r]),r}unshift(e,...t){let n={path:""},i=Polymer.Path.get(this,e,n),r=i.unshift(...t);return t.length&&P(this,i,n.path,0,t.length,[]),r}notifyPath(e,t){let n;if(1==arguments.length){let i={path:""};t=Polymer.Path.get(this,e,i),n=i.path}else n=Array.isArray(e)?Polymer.Path.normalize(e):e;this._setPendingPropertyOrPath(n,t,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(e,t){var i;this._addPropertyEffect(e,n.READ_ONLY),t&&(this["_set"+(i=e,i[0].toUpperCase()+i.substring(1))]=function(t){this._setProperty(e,t)})}_createPropertyObserver(e,t,i){let r={property:e,method:t,dynamicFn:Boolean(i)};this._addPropertyEffect(e,n.OBSERVE,{fn:l,info:r,trigger:{name:e}}),i&&this._addPropertyEffect(t,n.OBSERVE,{fn:l,info:r,trigger:{name:t}})}_createMethodObserver(e,t){let i=x(e);if(!i)throw new Error("Malformed observer expression '"+e+"'");v(this,i,n.OBSERVE,w,null,t)}_createNotifyingProperty(t){this._addPropertyEffect(t,n.NOTIFY,{fn:d,info:{eventName:e.camelToDashCase(t)+"-changed",property:t}})}_createReflectedProperty(e){let t=this.constructor.attributeNameForProperty(e);"-"===t[0]?console.warn("Property "+e+" cannot be reflected to attribute "+t+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(e,n.REFLECT,{fn:_,info:{attrName:t}})}_createComputedProperty(e,t,i){let r=x(t);if(!r)throw new Error("Malformed computed expression '"+t+"'");v(this,r,n.COMPUTE,f,e,i)}static addPropertyEffect(e,t,n){this.prototype._addPropertyEffect(e,t,n)}static createPropertyObserver(e,t,n){this.prototype._createPropertyObserver(e,t,n)}static createMethodObserver(e,t){this.prototype._createMethodObserver(e,t)}static createNotifyingProperty(e){this.prototype._createNotifyingProperty(e)}static createReadOnlyProperty(e,t){this.prototype._createReadOnlyProperty(e,t)}static createReflectedProperty(e){this.prototype._createReflectedProperty(e)}static createComputedProperty(e,t,n){this.prototype._createComputedProperty(e,t,n)}static bindTemplate(e){return this.prototype._bindTemplate(e)}_bindTemplate(e,t){let n=this.constructor._parseTemplate(e),i=this.__templateInfo==n;if(!i)for(let e in n.propertyEffects)this._createPropertyAccessor(e);if(t&&((n=Object.create(n)).wasPreBound=i,!i&&this.__templateInfo)){let e=this.__templateInfoLast||this.__templateInfo;return this.__templateInfoLast=e.nextTemplateInfo=n,n.previousTemplateInfo=e,n}return this.__templateInfo=n}static _addTemplatePropertyEffect(e,t,n){(e.hostProps=e.hostProps||{})[t]=!0;let i=e.propertyEffects=e.propertyEffects||{};(i[t]=i[t]||[]).push(n)}_stampTemplate(e){O.beginHosting(this);let t=super._stampTemplate(e);O.endHosting(this);let n=this._bindTemplate(e,!0);if(n.nodeList=t.nodeList,!n.wasPreBound){let e=n.childNodes=[];for(let n=t.firstChild;n;n=n.nextSibling)e.push(n)}return t.templateInfo=n,function(e,t){let{nodeList:n,nodeInfoList:i}=t;if(i.length)for(let t=0;t<i.length;t++){let r=i[t],s=n[t],o=r.bindings;if(o)for(let t=0;t<o.length;t++){let n=o[t];y(s,n),b(s,e,n)}s.__dataHost=e}}(this,n),this.__dataReady&&o(this,n.propertyEffects,this.__data,null,!1,n.nodeList),t}_removeBoundDom(e){let t=e.templateInfo;t.previousTemplateInfo&&(t.previousTemplateInfo.nextTemplateInfo=t.nextTemplateInfo),t.nextTemplateInfo&&(t.nextTemplateInfo.previousTemplateInfo=t.previousTemplateInfo),this.__templateInfoLast==t&&(this.__templateInfoLast=t.previousTemplateInfo),t.previousTemplateInfo=t.nextTemplateInfo=null;let n=t.childNodes;for(let e=0;e<n.length;e++){let t=n[e];t.parentNode.removeChild(t)}}static _parseTemplateNode(e,t,n){let i=super._parseTemplateNode(e,t,n);if(e.nodeType===Node.TEXT_NODE){let r=this._parseBindings(e.textContent,t);r&&(e.textContent=A(r)||" ",p(this,t,n,"text","textContent",r),i=!0)}return i}static _parseTemplateNodeAttribute(e,t,n,r,s){let o=this._parseBindings(s,t);if(o){let s=r,a="property";i.test(r)?a="attribute":"$"==r[r.length-1]&&(r=r.slice(0,-1),a="attribute");let c=A(o);return c&&"attribute"==a&&e.setAttribute(r,c),"input"===e.localName&&"value"===s&&e.setAttribute(s,""),e.removeAttribute(s),"property"===a&&(r=Polymer.CaseMap.dashToCamelCase(r)),p(this,t,n,a,r,o,c),!0}return super._parseTemplateNodeAttribute(e,t,n,r,s)}static _parseTemplateNestedTemplate(e,t,n){let i=super._parseTemplateNestedTemplate(e,t,n),r=n.templateInfo.hostProps;for(let e in r){p(this,t,n,"property","_host_"+e,[{mode:"{",source:e,dependencies:[e]}])}return i}static _parseBindings(e,t){let n,i=[],r=0;for(;null!==(n=k.exec(e));){n.index>r&&i.push({literal:e.slice(r,n.index)});let s=n[1][0],o=Boolean(n[2]),a=n[3].trim(),c=!1,l="",u=-1;"{"==s&&(u=a.indexOf("::"))>0&&(l=a.substring(u+2),a=a.substring(0,u),c=!0);let h=x(a),d=[];if(h){let{args:e,methodName:n}=h;for(let t=0;t<e.length;t++){let n=e[t];n.literal||d.push(n)}let i=t.dynamicFns;(i&&i[n]||h.static)&&(d.push(n),h.dynamicFn=!0)}else d.push(a);i.push({source:a,mode:s,negate:o,customEvent:c,signature:h,dependencies:d,event:l}),r=k.lastIndex}if(r&&r<e.length){let t=e.substring(r);t&&i.push({literal:t})}return i.length?i:null}static _evaluateBinding(e,t,n,i,r,s){let o;return o=t.signature?w(e,n,i,0,t.signature):n!=t.source?Polymer.Path.get(e,t.source):s&&Polymer.Path.isPath(n)?Polymer.Path.get(e,n):e.__data[n],t.negate&&(o=!o),o}}return r=m,m});let O={stack:[],registerHost(e){if(this.stack.length){this.stack[this.stack.length-1]._enqueueClient(e)}},beginHosting(e){this.stack.push(e)},endHosting(e){let t=this.stack.length;t&&this.stack[t-1]==e&&this.stack.pop()}}}(),function(){"use strict";Polymer.PropertiesMixin=Polymer.dedupingMixin(e=>{const t=Polymer.PropertiesChanged(e);function n(e){const t=Object.getPrototypeOf(e);return t.prototype instanceof r?t:null}function i(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",e))){let t=null;e.hasOwnProperty(JSCompiler_renameProperty("properties",e))&&e.properties&&(t=function(e){const t={};for(let n in e){const i=e[n];t[n]="function"==typeof i?{type:i}:i}return t}(e.properties)),e.__ownProperties=t}return e.__ownProperties}class r extends t{static get observedAttributes(){const e=this._properties;return e?Object.keys(e).map(e=>this.attributeNameForProperty(e)):[]}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const e=n(this);e&&e.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const e=i(this);e&&this.createProperties(e)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const e=n(this);this.__properties=Object.assign({},e&&e._properties,i(this))}return this.__properties}static typeForProperty(e){const t=this._properties[e];return t&&t.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return r})}(),function(){"use strict";Polymer.ElementMixin=Polymer.dedupingMixin(e=>{const t=Polymer.PropertiesMixin(Polymer.PropertyEffects(e));return class extends t{static _finalizeClass(){super._finalizeClass(),this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&this.is&&Polymer.telemetry.register(this.prototype);const e=((t=this).hasOwnProperty(JSCompiler_renameProperty("__ownObservers",t))||(t.__ownObservers=t.hasOwnProperty(JSCompiler_renameProperty("observers",t))?t.observers:null),t.__ownObservers);var t;e&&this.createObservers(e,this._properties);let n=this.template;if(n)if("string"==typeof n){let e=document.createElement("template");e.innerHTML=n,n=e}else n=n.cloneNode(!0);this.prototype._template=n}static createProperties(e){for(let s in e)t=this.prototype,n=s,i=e[s],r=e,i.computed&&(i.readOnly=!0),i.computed&&!t._hasReadOnlyEffect(n)&&t._createComputedProperty(n,i.computed,r),i.readOnly&&!t._hasReadOnlyEffect(n)&&t._createReadOnlyProperty(n,!i.computed),i.reflectToAttribute&&!t._hasReflectEffect(n)&&t._createReflectedProperty(n),i.notify&&!t._hasNotifyEffect(n)&&t._createNotifyingProperty(n),i.observer&&t._createPropertyObserver(n,i.observer,r[i.observer]),t._addPropertyToAttributeMap(n);var t,n,i,r}static createObservers(e,t){const n=this.prototype;for(let i=0;i<e.length;i++)n._createMethodObserver(e[i],t)}static get template(){return this.hasOwnProperty(JSCompiler_renameProperty("_template",this))||(this._template=Polymer.DomModule&&Polymer.DomModule.import(this.is,"template")||Object.getPrototypeOf(this.prototype).constructor.template),this._template}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const e=Polymer.DomModule&&Polymer.DomModule.import(this.is);this._importPath=e?e.assetpath:Object.getPrototypeOf(this.prototype).constructor.importPath}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){Polymer.telemetry.instanceCount++,this.constructor.finalize();const e=this.constructor.importPath;this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=Polymer.rootPath,this.importPath=e;let t=function(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",e))){e.__propertyDefaults=null;let t=e._properties;for(let n in t){let i=t[n];"value"in i&&(e.__propertyDefaults=e.__propertyDefaults||{},e.__propertyDefaults[n]=i)}}return e.__propertyDefaults}(this.constructor);if(t)for(let e in t){let n=t[e];if(!this.hasOwnProperty(e)){let t="function"==typeof n.value?n.value.call(this):n.value;this._hasAccessor(e)?this._setPendingProperty(e,t,!0):this[e]=t}}}static _processStyleText(e,t){return Polymer.ResolveUrl.resolveCss(e,t)}static _finalizeTemplate(e){const t=this.prototype._template;if(t&&!t.__polymerFinalized){t.__polymerFinalized=!0;const n=this.importPath;!function(e,t,n,i){const r=t.content.querySelectorAll("style"),s=Polymer.StyleGather.stylesFromTemplate(t),o=Polymer.StyleGather.stylesFromModuleImports(n),a=t.content.firstElementChild;for(let n=0;n<o.length;n++){let r=o[n];r.textContent=e._processStyleText(r.textContent,i),t.content.insertBefore(r,a)}let c=0;for(let t=0;t<s.length;t++){let n=s[t],o=r[c];o!==n?(n=n.cloneNode(!0),o.parentNode.insertBefore(n,o)):c++,n.textContent=e._processStyleText(n.textContent,i)}window.ShadyCSS&&window.ShadyCSS.prepareTemplate(t,n)}(this,t,e,n?Polymer.ResolveUrl.resolveUrl(n):""),this.prototype._bindTemplate(t)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(e){if(this.attachShadow)return e?(this.shadowRoot||this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e),this.shadowRoot):null;throw new Error("ShadowDOM not available. Polymer.Element can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(e){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,e)}resolveUrl(e,t){return!t&&this.importPath&&(t=Polymer.ResolveUrl.resolveUrl(this.importPath)),Polymer.ResolveUrl.resolveUrl(e,t)}static _parseTemplateContent(e,t,n){return t.dynamicFns=t.dynamicFns||this._properties,super._parseTemplateContent(e,t,n)}}}),Polymer.telemetry={instanceCount:0,registrations:[],_regLog:function(e){console.log("["+e.is+"]: registered")},register:function(e){this.registrations.push(e),Polymer.log&&this._regLog(e)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}},Polymer.updateStyles=function(e){window.ShadyCSS&&window.ShadyCSS.styleDocument(e)}}(),function(){"use strict";class e{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(e,t){this._asyncModule=e,this._callback=t,this._timer=this._asyncModule.run(()=>{this._timer=null,this._callback()})}cancel(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(t,n,i){return t instanceof e?t.cancel():t=new e,t.setConfig(n,i),t}}Polymer.Debouncer=e}(),function(){"use strict";let e="string"==typeof document.head.style.touchAction,t="__polymerGesturesHandled",n="__polymerGesturesTouchAction",i=2500,r=["mousedown","mousemove","mouseup","click"],s=[0,1,4,2],o=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}();function a(e){return r.indexOf(e)>-1}let c=!1;function l(t){if(!a(t)&&"touchend"!==t)return e&&c&&Polymer.passiveTouchGestures?{passive:!0}:void 0}!function(){try{let e=Object.defineProperty({},"passive",{get(){c=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}();let u=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),h=function(){};h.prototype.reset,h.prototype.mousedown,h.prototype.mousemove,h.prototype.mouseup,h.prototype.touchstart,h.prototype.touchmove,h.prototype.touchend,h.prototype.click;const d=[],_={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0};function f(e){let t=[...e.labels||[]];if(!t.length){t=[];let n=e.getRootNode();if(e.id){let i=n.querySelectorAll(`label[for = ${e.id}]`);for(let e=0;e<i.length;e++)t.push(i[e])}}return t}let p=function(e){let n=e.sourceCapabilities;var i;if((!n||n.firesTouchEvents)&&(e[t]={skip:!0},"click"===e.type)){let t=!1,n=e.composedPath&&e.composedPath();if(n)for(let e=0;e<n.length;e++){if(n[e].nodeType===Node.ELEMENT_NODE)if("label"===n[e].localName)d.push(n[e]);else if(i=n[e],_[i.localName]){let i=f(n[e]);for(let e=0;e<i.length;e++)t=t||d.indexOf(i[e])>-1}if(n[e]===y.mouse.target)return}if(t)return;e.preventDefault(),e.stopPropagation()}};function m(e){let t=u?["click"]:r;for(let n,i=0;i<t.length;i++)n=t[i],e?(d.length=0,document.addEventListener(n,p,!0)):document.removeEventListener(n,p,!0)}function g(e){let t=e.type;if(!a(t))return!1;if("mousemove"===t){let t=void 0===e.buttons?1:e.buttons;return e instanceof window.MouseEvent&&!o&&(t=s[e.which]||0),Boolean(1&t)}return 0===(void 0===e.button?0:e.button)}let y={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function b(e,t,n){e.movefn=t,e.upfn=n,document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}function v(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}document.addEventListener("touchend",function(e){y.mouse.mouseIgnoreJob||m(!0),y.mouse.target=e.composedPath()[0],y.mouse.mouseIgnoreJob=Polymer.Debouncer.debounce(y.mouse.mouseIgnoreJob,Polymer.Async.timeOut.after(i),function(){m(),y.mouse.target=null,y.mouse.mouseIgnoreJob=null})},!!c&&{passive:!0});const w={gestures:{},recognizers:[],deepTargetFind:function(e,t){let n=document.elementFromPoint(e,t),i=n;for(;i&&i.shadowRoot&&!window.ShadyDOM;){if(i===(i=i.shadowRoot.elementFromPoint(e,t)))break;i&&(n=i)}return n},_findOriginalTarget:function(e){if(e.composedPath){const t=e.composedPath();return t.length>0?t[0]:e.target}return e.target},_handleNative:function(n){let i,r=n.type,s=n.currentTarget.__polymerGestures;if(!s)return;let o=s[r];if(o){if(!n[t]&&(n[t]={},"touch"===r.slice(0,5))){let t=(n=n).changedTouches[0];if("touchstart"===r&&1===n.touches.length&&(y.touch.id=t.identifier),y.touch.id!==t.identifier)return;e||"touchstart"!==r&&"touchmove"!==r||w._handleTouchAction(n)}if(!(i=n[t]).skip){for(let e,t=0;t<w.recognizers.length;t++)o[(e=w.recognizers[t]).name]&&!i[e.name]&&e.flow&&e.flow.start.indexOf(n.type)>-1&&e.reset&&e.reset();for(let e,t=0;t<w.recognizers.length;t++)o[(e=w.recognizers[t]).name]&&!i[e.name]&&(i[e.name]=!0,e[r](n))}}},_handleTouchAction:function(e){let t=e.changedTouches[0],i=e.type;if("touchstart"===i)y.touch.x=t.clientX,y.touch.y=t.clientY,y.touch.scrollDecided=!1;else if("touchmove"===i){if(y.touch.scrollDecided)return;y.touch.scrollDecided=!0;let i=function(e){let t="auto",i=e.composedPath&&e.composedPath();if(i)for(let e,r=0;r<i.length;r++)if((e=i[r])[n]){t=e[n];break}return t}(e),r=!1,s=Math.abs(y.touch.x-t.clientX),o=Math.abs(y.touch.y-t.clientY);e.cancelable&&("none"===i?r=!0:"pan-x"===i?r=o>s:"pan-y"===i&&(r=s>o)),r?e.preventDefault():w.prevent("track")}},addListener:function(e,t,n){return!!this.gestures[t]&&(this._add(e,t,n),!0)},removeListener:function(e,t,n){return!!this.gestures[t]&&(this._remove(e,t,n),!0)},_add:function(e,t,n){let i=this.gestures[t],r=i.deps,s=i.name,o=e.__polymerGestures;o||(e.__polymerGestures=o={});for(let t,n,i=0;i<r.length;i++)t=r[i],u&&a(t)&&"click"!==t||((n=o[t])||(o[t]=n={_count:0}),0===n._count&&e.addEventListener(t,this._handleNative,l(t)),n[s]=(n[s]||0)+1,n._count=(n._count||0)+1);e.addEventListener(t,n),i.touchAction&&this.setTouchAction(e,i.touchAction)},_remove:function(e,t,n){let i=this.gestures[t],r=i.deps,s=i.name,o=e.__polymerGestures;if(o)for(let t,n,i=0;i<r.length;i++)(n=o[t=r[i]])&&n[s]&&(n[s]=(n[s]||1)-1,n._count=(n._count||1)-1,0===n._count&&e.removeEventListener(t,this._handleNative,l(t)));e.removeEventListener(t,n)},register:function(e){this.recognizers.push(e);for(let t=0;t<e.emits.length;t++)this.gestures[e.emits[t]]=e},_findRecognizerByEvent:function(e){for(let t,n=0;n<this.recognizers.length;n++){t=this.recognizers[n];for(let n,i=0;i<t.emits.length;i++)if((n=t.emits[i])===e)return t}return null},setTouchAction:function(t,i){e&&Polymer.Async.microTask.run(()=>{t.style.touchAction=i}),t[n]=i},_fire:function(e,t,n){let i=new Event(t,{bubbles:!0,cancelable:!0,composed:!0});if(i.detail=n,e.dispatchEvent(i),i.defaultPrevented){let e=n.preventer||n.sourceEvent;e&&e.preventDefault&&e.preventDefault()}},prevent:function(e){let t=this._findRecognizerByEvent(e);t.info&&(t.info.prevent=!0)},resetMouseCanceller:function(){y.mouse.mouseIgnoreJob&&y.mouse.mouseIgnoreJob.flush()}};w.register({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){v(this.info)},mousedown:function(e){if(!g(e))return;let t=w._findOriginalTarget(e),n=this;b(this.info,function(e){g(e)||(n._fire("up",t,e),v(n.info))},function(e){g(e)&&n._fire("up",t,e),v(n.info)}),this._fire("down",t,e)},touchstart:function(e){this._fire("down",w._findOriginalTarget(e),e.changedTouches[0],e)},touchend:function(e){this._fire("up",w._findOriginalTarget(e),e.changedTouches[0],e)},_fire:function(e,t,n,i){w._fire(t,e,{x:n.clientX,y:n.clientY,sourceEvent:n,preventer:i,prevent:function(e){return w.prevent(e)}})}}),w.register({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){this.moves.length>2&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,v(this.info)},hasMovedEnough:function(e,t){if(this.info.prevent)return!1;if(this.info.started)return!0;let n=Math.abs(this.info.x-e),i=Math.abs(this.info.y-t);return n>=5||i>=5},mousedown:function(e){if(!g(e))return;let t=w._findOriginalTarget(e),n=this,i=function(e){let i=e.clientX,r=e.clientY;n.hasMovedEnough(i,r)&&(n.info.state=n.info.started?"mouseup"===e.type?"end":"track":"start","start"===n.info.state&&w.prevent("tap"),n.info.addMove({x:i,y:r}),g(e)||(n.info.state="end",v(n.info)),n._fire(t,e),n.info.started=!0)};b(this.info,i,function(e){n.info.started&&i(e),v(n.info)}),this.info.x=e.clientX,this.info.y=e.clientY},touchstart:function(e){let t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(e){let t=w._findOriginalTarget(e),n=e.changedTouches[0],i=n.clientX,r=n.clientY;this.hasMovedEnough(i,r)&&("start"===this.info.state&&w.prevent("tap"),this.info.addMove({x:i,y:r}),this._fire(t,n),this.info.state="track",this.info.started=!0)},touchend:function(e){let t=w._findOriginalTarget(e),n=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:n.clientX,y:n.clientY}),this._fire(t,n,e))},_fire:function(e,t){let n,i=this.info.moves[this.info.moves.length-2],r=this.info.moves[this.info.moves.length-1],s=r.x-this.info.x,o=r.y-this.info.y,a=0;i&&(n=r.x-i.x,a=r.y-i.y),w._fire(e,"track",{state:this.info.state,x:t.clientX,y:t.clientY,dx:s,dy:o,ddx:n,ddy:a,sourceEvent:t,hover:function(){return w.deepTargetFind(t.clientX,t.clientY)}})}}),w.register({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(e){this.info.x=e.clientX,this.info.y=e.clientY},mousedown:function(e){g(e)&&this.save(e)},click:function(e){g(e)&&this.forward(e)},touchstart:function(e){this.save(e.changedTouches[0],e)},touchend:function(e){this.forward(e.changedTouches[0],e)},forward:function(e,t){let n=Math.abs(e.clientX-this.info.x),i=Math.abs(e.clientY-this.info.y),r=w._findOriginalTarget(t||e);r&&!r.disabled&&(isNaN(n)||isNaN(i)||n<=25&&i<=25||function(e){if("click"===e.type){if(0===e.detail)return!0;let t=w._findOriginalTarget(e);if(!t.nodeType||t.nodeType!==Node.ELEMENT_NODE)return!0;let n=t.getBoundingClientRect(),i=e.pageX,r=e.pageY;return!(i>=n.left&&i<=n.right&&r>=n.top&&r<=n.bottom)}return!1}(e))&&(this.info.prevent||w._fire(r,"tap",{x:e.clientX,y:e.clientY,sourceEvent:e,preventer:t}))}}),w.findOriginalTarget=w._findOriginalTarget,w.add=w.addListener,w.remove=w.removeListener,Polymer.Gestures=w}(),function(){"use strict";const e=Polymer.Gestures;Polymer.GestureEventListeners=Polymer.dedupingMixin(t=>{return class extends t{_addEventListenerToNode(t,n,i){e.addListener(t,n,i)||super._addEventListenerToNode(t,n,i)}_removeEventListenerFromNode(t,n,i){e.removeListener(t,n,i)||super._removeEventListenerFromNode(t,n,i)}}})}(),function(){"use strict";const e=/:host\(:dir\((ltr|rtl)\)\)/g,t=':host([dir="$1"])',n=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,i=':host([dir="$2"]) $1',r=[];let s=null,o="";function a(){o=document.documentElement.getAttribute("dir")}function c(e){if(!e.__autoDirOptOut){e.setAttribute("dir",o)}}function l(){a(),o=document.documentElement.getAttribute("dir");for(let e=0;e<r.length;e++)c(r[e])}Polymer.DirMixin=Polymer.dedupingMixin(o=>{s||(a(),(s=new MutationObserver(l)).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));const u=Polymer.PropertyAccessors(o);class h extends u{static _processStyleText(e,t){return e=super._processStyleText(e,t),e=this._replaceDirInCssText(e)}static _replaceDirInCssText(r){let s=r;return r!==(s=(s=s.replace(e,t)).replace(n,i))&&(this.__activateDir=!0),s}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir")}connectedCallback(){u.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(s&&s.takeRecords().length&&l(),r.push(this),c(this))}disconnectedCallback(){if(u.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const e=r.indexOf(this);e>-1&&r.splice(e,1)}}}return h.__activateDir=!1,h})}(),function(){"use strict";function e(e){window.HTMLImports?HTMLImports.whenReady(e):e()}Polymer.importHref=function(t,n,i,r){let s=document.head.querySelector('link[href="'+t+'"][import-href]');s||((s=document.createElement("link")).rel="import",s.href=t,s.setAttribute("import-href","")),r&&s.setAttribute("async","");let o=function(){s.removeEventListener("load",a),s.removeEventListener("error",c)},a=function(t){o(),s.__dynamicImportLoaded=!0,n&&e(()=>{n(t)})},c=function(t){o(),s.parentNode&&s.parentNode.removeChild(s),i&&e(()=>{i(t)})};return s.addEventListener("load",a),s.addEventListener("error",c),null==s.parentNode?document.head.appendChild(s):s.__dynamicImportLoaded&&s.dispatchEvent(new Event("load")),s}}(),function(){"use strict";let e=!1,t=[],n=[];function i(){e=!0,requestAnimationFrame(function(){e=!1,r(t),setTimeout(function(){!function(e){for(let t=0,n=e.length;t<n;t++)s(e.shift())}(n)})})}function r(e){for(;e.length;)s(e.shift())}function s(e){const t=e[0],n=e[1],i=e[2];try{n.apply(t,i)}catch(e){setTimeout(()=>{throw e})}}Polymer.RenderStatus={beforeNextRender:function(n,r,s){e||i(),t.push([n,r,s])},afterNextRender:function(t,r,s){e||i(),n.push([t,r,s])},flush:function(){for(;t.length||n.length;)r(t),r(n);e=!1}}}(),function(){"use strict";function e(){document.body.removeAttribute("unresolved")}window.WebComponents?window.addEventListener("WebComponentsReady",e):"interactive"===document.readyState||"complete"===document.readyState?e():window.addEventListener("DOMContentLoaded",e)}(),function(){"use strict";function e(e,t,n){return{index:e,removed:t,addedCount:n}}const t=0,n=1,i=2,r=3;function s(s,a,c,l,u,h){let d,_=0,f=0,p=Math.min(c-a,h-u);if(0==a&&0==u&&(_=function(e,t,n){for(let i=0;i<n;i++)if(!o(e[i],t[i]))return i;return n}(s,l,p)),c==s.length&&h==l.length&&(f=function(e,t,n){let i=e.length,r=t.length,s=0;for(;s<n&&o(e[--i],t[--r]);)s++;return s}(s,l,p-_)),u+=_,h-=f,(c-=f)-(a+=_)==0&&h-u==0)return[];if(a==c){for(d=e(a,[],0);u<h;)d.removed.push(l[u++]);return[d]}if(u==h)return[e(a,[],c-a)];let m=function(e){let s=e.length-1,o=e[0].length-1,a=e[s][o],c=[];for(;s>0||o>0;){if(0==s){c.push(i),o--;continue}if(0==o){c.push(r),s--;continue}let l,u=e[s-1][o-1],h=e[s-1][o],d=e[s][o-1];(l=h<d?h<u?h:u:d<u?d:u)==u?(u==a?c.push(t):(c.push(n),a=u),s--,o--):l==h?(c.push(r),s--,a=h):(c.push(i),o--,a=d)}return c.reverse(),c}(function(e,t,n,i,r,s){let a=s-r+1,c=n-t+1,l=new Array(a);for(let e=0;e<a;e++)l[e]=new Array(c),l[e][0]=e;for(let e=0;e<c;e++)l[0][e]=e;for(let n=1;n<a;n++)for(let s=1;s<c;s++)if(o(e[t+s-1],i[r+n-1]))l[n][s]=l[n-1][s-1];else{let e=l[n-1][s]+1,t=l[n][s-1]+1;l[n][s]=e<t?e:t}return l}(s,a,c,l,u,h));d=void 0;let g=[],y=a,b=u;for(let s=0;s<m.length;s++)switch(m[s]){case t:d&&(g.push(d),d=void 0),y++,b++;break;case n:d||(d=e(y,[],0)),d.addedCount++,y++,d.removed.push(l[b]),b++;break;case i:d||(d=e(y,[],0)),d.addedCount++,y++;break;case r:d||(d=e(y,[],0)),d.removed.push(l[b]),b++}return d&&g.push(d),g}function o(e,t){return e===t}Polymer.ArraySplice={calculateSplices:function(e,t){return s(e,0,e.length,t,0,t.length)}}}(),function(){"use strict";function e(e){return"slot"===e.localName}Polymer.FlattenedNodesObserver=class{static getFlattenedNodes(t){return e(t)?(t=t).assignedNodes({flatten:!0}):Array.from(t.childNodes).map(t=>e(t)?(t=t).assignedNodes({flatten:!0}):[t]).reduce((e,t)=>e.concat(t),[])}constructor(e,t){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=e,this.callback=t,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=(()=>{this._schedule()}),this.connect(),this._schedule()}connect(){e(this._target)?this._listenSlots([this._target]):this._target.children&&(this._listenSlots(this._target.children),window.ShadyDOM?this._shadyChildrenObserver=ShadyDOM.observeChildren(this._target,e=>{this._processMutations(e)}):(this._nativeChildrenObserver=new MutationObserver(e=>{this._processMutations(e)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){e(this._target)?this._unlistenSlots([this._target]):this._target.children&&(this._unlistenSlots(this._target.children),window.ShadyDOM&&this._shadyChildrenObserver?(ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,Polymer.Async.microTask.run(()=>this.flush()))}_processMutations(e){this._processSlotMutations(e),this.flush()}_processSlotMutations(e){if(e)for(let t=0;t<e.length;t++){let n=e[t];n.addedNodes&&this._listenSlots(n.addedNodes),n.removedNodes&&this._unlistenSlots(n.removedNodes)}}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let e={target:this._target,addedNodes:[],removedNodes:[]},t=this.constructor.getFlattenedNodes(this._target),n=Polymer.ArraySplice.calculateSplices(t,this._effectiveNodes);for(let t,i=0;i<n.length&&(t=n[i]);i++)for(let n,i=0;i<t.removed.length&&(n=t.removed[i]);i++)e.removedNodes.push(n);for(let i,r=0;r<n.length&&(i=n[r]);r++)for(let n=i.index;n<i.index+i.addedCount;n++)e.addedNodes.push(t[n]);this._effectiveNodes=t;let i=!1;return(e.addedNodes.length||e.removedNodes.length)&&(i=!0,this.callback.call(this._target,e)),i}_listenSlots(t){for(let n=0;n<t.length;n++){let i=t[n];e(i)&&i.addEventListener("slotchange",this._boundSchedule)}}_unlistenSlots(t){for(let n=0;n<t.length;n++){let i=t[n];e(i)&&i.removeEventListener("slotchange",this._boundSchedule)}}}}(),function(){"use strict";let e=[];function t(){const t=Boolean(e.length);for(;e.length;)try{e.shift().flush()}catch(e){setTimeout(()=>{throw e})}return t}Polymer.enqueueDebouncer=function(t){e.push(t)},Polymer.flush=function(){let e,n;do{e=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),n=t()}while(e||n)}}(),function(){"use strict";const e=Element.prototype,t=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector,n=function(e,n){return t.call(e,n)};class i{constructor(e){this.node=e}observeNodes(e){return new Polymer.FlattenedNodesObserver(this.node,e)}unobserveNodes(e){e.disconnect()}notifyObserver(){}deepContains(e){if(this.node.contains(e))return!0;let t=e,n=e.ownerDocument;for(;t&&t!==n&&t!==this.node;)t=t.parentNode||t.host;return t===this.node}getOwnerRoot(){return this.node.getRootNode()}getDistributedNodes(){return"slot"===this.node.localName?this.node.assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let e=[],t=this.node.assignedSlot;for(;t;)e.push(t),t=t.assignedSlot;return e}importNode(e,t){return(this.node instanceof Document?this.node:this.node.ownerDocument).importNode(e,t)}getEffectiveChildNodes(){return Polymer.FlattenedNodesObserver.getFlattenedNodes(this.node)}queryDistributedElements(e){let t=this.getEffectiveChildNodes(),i=[];for(let r,s=0,o=t.length;s<o&&(r=t[s]);s++)r.nodeType===Node.ELEMENT_NODE&&n(r,e)&&i.push(r);return i}get activeElement(){let e=this.node;return void 0!==e._activeElement?e._activeElement:e.activeElement}}!function(e,t){for(let n=0;n<t.length;n++){let i=t[n];e[i]=function(){return this.node[i].apply(this.node,arguments)}}}(i.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),function(e,t){for(let n=0;n<t.length;n++){let i=t[n];Object.defineProperty(e,i,{get:function(){return this.node[i]},configurable:!0})}}(i.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),function(e,t){for(let n=0;n<t.length;n++){let i=t[n];Object.defineProperty(e,i,{get:function(){return this.node[i]},set:function(e){this.node[i]=e},configurable:!0})}}(i.prototype,["textContent","innerHTML"]);Polymer.DomApi=i,Polymer.DomApi.prototype.cloneNode,Polymer.DomApi.prototype.appendChild,Polymer.DomApi.prototype.insertBefore,Polymer.DomApi.prototype.removeChild,Polymer.DomApi.prototype.replaceChild,Polymer.DomApi.prototype.setAttribute,Polymer.DomApi.prototype.removeAttribute,Polymer.DomApi.prototype.querySelector,Polymer.DomApi.prototype.querySelectorAll,Polymer.dom=function(e){if(!(e=e||document).__domApi){let t;t=e instanceof Event?new class{constructor(e){this.event=e}get rootTarget(){return this.event.composedPath()[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}(e):new i(e),e.__domApi=t}return e.__domApi},Polymer.dom.matchesSelector=n,Polymer.dom.flush=Polymer.flush,Polymer.dom.addDebouncer=Polymer.enqueueDebouncer}(),function(){"use strict";let e=window.ShadyCSS;Polymer.LegacyElementMixin=Polymer.dedupingMixin(t=>{const n=Polymer.DirMixin(Polymer.GestureEventListeners(Polymer.ElementMixin(t))),i={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class r extends n{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers,this._applyListeners()}created(){}connectedCallback(){super.connectedCallback(),this.isAttached=!0,this.attached()}attached(){}disconnectedCallback(){super.disconnectedCallback(),this.isAttached=!1,this.detached()}detached(){}attributeChangedCallback(e,t,n){t!==n&&(super.attributeChangedCallback(e,t,n),this.attributeChanged(e,t,n))}attributeChanged(e,t,n){}_initializeProperties(){let e=Object.getPrototypeOf(this);e.hasOwnProperty("__hasRegisterFinished")||(e.__hasRegisterFinished=!0,this._registered()),super._initializeProperties(),this.root=this,this.created()}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(e){return this._serializeValue(e)}deserialize(e,t){return this._deserializeValue(e,t)}reflectPropertyToAttribute(e,t,n){this._propertyToAttribute(e,t,n)}serializeValueToAttribute(e,t,n){this._valueToNodeAttribute(n||this,e,t)}extend(e,t){if(!e||!t)return e||t;let n=Object.getOwnPropertyNames(t);for(let i,r=0;r<n.length&&(i=n[r]);r++){let n=Object.getOwnPropertyDescriptor(t,i);n&&Object.defineProperty(e,i,n)}return e}mixin(e,t){for(let n in t)e[n]=t[n];return e}chainObject(e,t){return e&&t&&e!==t&&(e.__proto__=t),e}instanceTemplate(e){let t=this.constructor._contentForTemplate(e);return document.importNode(t,!0)}fire(e,t,n){n=n||{},t=null==t?{}:t;let i=new Event(e,{bubbles:void 0===n.bubbles||n.bubbles,cancelable:Boolean(n.cancelable),composed:void 0===n.composed||n.composed});return i.detail=t,(n.node||this).dispatchEvent(i),i}listen(e,t,n){e=e||this;let i=this.__boundListeners||(this.__boundListeners=new WeakMap),r=i.get(e);r||(r={},i.set(e,r));let s=t+n;r[s]||(r[s]=this._addMethodEventListenerToNode(e,t,n,this))}unlisten(e,t,n){e=e||this;let i=this.__boundListeners&&this.__boundListeners.get(e),r=t+n,s=i&&i[r];s&&(this._removeEventListenerFromNode(e,t,s),i[r]=null)}setScrollDirection(e,t){Polymer.Gestures.setTouchAction(t||this,i[e]||"auto")}$$(e){return this.root.querySelector(e)}get domHost(){let e=this.getRootNode();return e instanceof DocumentFragment?e.host:e}distributeContent(){window.ShadyDOM&&this.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return Polymer.dom(this).getEffectiveChildNodes()}queryDistributedElements(e){return Polymer.dom(this).queryDistributedElements(e)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter(function(e){return e.nodeType===Node.ELEMENT_NODE})}getEffectiveTextContent(){let e=this.getEffectiveChildNodes(),t=[];for(let n,i=0;n=e[i];i++)n.nodeType!==Node.COMMENT_NODE&&t.push(n.textContent);return t.join("")}queryEffectiveChildren(e){let t=this.queryDistributedElements(e);return t&&t[0]}queryAllEffectiveChildren(e){return this.queryDistributedElements(e)}getContentChildNodes(e){let t=this.root.querySelector(e||"slot");return t?Polymer.dom(t).getDistributedNodes():[]}getContentChildren(e){return this.getContentChildNodes(e).filter(function(e){return e.nodeType===Node.ELEMENT_NODE})}isLightDescendant(e){return this!==e&&this.contains(e)&&this.getRootNode()===e.getRootNode()}isLocalDescendant(e){return this.root===e.getRootNode()}scopeSubtree(e,t){}getComputedStyleValue(t){return e.getComputedStyleValue(this,t)}debounce(e,t,n){return this._debouncers=this._debouncers||{},this._debouncers[e]=Polymer.Debouncer.debounce(this._debouncers[e],n>0?Polymer.Async.timeOut.after(n):Polymer.Async.microTask,t.bind(this))}isDebouncerActive(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];return!(!t||!t.isActive())}flushDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.flush()}cancelDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.cancel()}async(e,t){return t>0?Polymer.Async.timeOut.run(e.bind(this),t):~Polymer.Async.microTask.run(e.bind(this))}cancelAsync(e){e<0?Polymer.Async.microTask.cancel(~e):Polymer.Async.timeOut.cancel(e)}create(e,t){let n=document.createElement(e);if(t)if(n.setProperties)n.setProperties(t);else for(let e in t)n[e]=t[e];return n}importHref(e,t,n,i){let r=t?t.bind(this):null,s=n?n.bind(this):null;return Polymer.importHref(e,r,s,i)}elementMatches(e,t){return Polymer.dom.matchesSelector(t||this,e)}toggleAttribute(e,t,n){n=n||this,1==arguments.length&&(t=!n.hasAttribute(e)),t?n.setAttribute(e,""):n.removeAttribute(e)}toggleClass(e,t,n){n=n||this,1==arguments.length&&(t=!n.classList.contains(e)),t?n.classList.add(e):n.classList.remove(e)}transform(e,t){(t=t||this).style.webkitTransform=e,t.style.transform=e}translate3d(e,t,n,i){i=i||this,this.transform("translate3d("+e+","+t+","+n+")",i)}arrayDelete(e,t){let n;if(Array.isArray(e)){if((n=e.indexOf(t))>=0)return e.splice(n,1)}else{if((n=Polymer.Path.get(this,e).indexOf(t))>=0)return this.splice(e,n,1)}return null}_logger(e,t){switch(Array.isArray(t)&&1===t.length&&Array.isArray(t[0])&&(t=t[0]),e){case"log":case"warn":case"error":console[e](...t)}}_log(...e){this._logger("log",e)}_warn(...e){this._logger("warn",e)}_error(...e){this._logger("error",e)}_logf(e,...t){return["[%s::%s]",this.is,e,...t]}}return r.prototype.is="",r})}(),function(){"use strict";let e={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0};function t(e,t){if(!e)return t=t;t=Polymer.LegacyElementMixin(t),Array.isArray(e)||(e=[e]);let i=t.prototype.behaviors;return t=function e(t,i){for(let r=0;r<t.length;r++){let s=t[r];s&&(i=Array.isArray(s)?e(s,i):n(s,i))}return i}(e=function e(t,n,i){n=n||[];for(let r=t.length-1;r>=0;r--){let s=t[r];s?Array.isArray(s)?e(s,n):n.indexOf(s)<0&&(!i||i.indexOf(s)<0)&&n.unshift(s):console.warn("behavior is null, check for missing or 404 import")}return n}(e,null,i),t),i&&(e=i.concat(e)),t.prototype.behaviors=e,t}function n(t,n){class i extends n{static get properties(){return t.properties}static get observers(){return t.observers}static get template(){return t._template||Polymer.DomModule&&Polymer.DomModule.import(this.is,"template")||n.template||this.prototype._template||null}created(){super.created(),t.created&&t.created.call(this)}_registered(){super._registered(),t.beforeRegister&&t.beforeRegister.call(Object.getPrototypeOf(this)),t.registered&&t.registered.call(Object.getPrototypeOf(this))}_applyListeners(){if(super._applyListeners(),t.listeners)for(let e in t.listeners)this._addMethodEventListenerToNode(this,e,t.listeners[e])}_ensureAttributes(){if(t.hostAttributes)for(let e in t.hostAttributes)this._ensureAttribute(e,t.hostAttributes[e]);super._ensureAttributes()}ready(){super.ready(),t.ready&&t.ready.call(this)}attached(){super.attached(),t.attached&&t.attached.call(this)}detached(){super.detached(),t.detached&&t.detached.call(this)}attributeChanged(e,n,i){super.attributeChanged(e,n,i),t.attributeChanged&&t.attributeChanged.call(this,e,n,i)}}i.generatedFrom=t;for(let n in t)if(!(n in e)){let e=Object.getOwnPropertyDescriptor(t,n);e&&Object.defineProperty(i.prototype,n,e)}return i}Polymer.Class=function(e){e||console.warn("Polymer.Class requires `info` argument");let i=n(e,e.behaviors?t(e.behaviors,HTMLElement):Polymer.LegacyElementMixin(HTMLElement));return i.is=e.is,i},Polymer.mixinBehaviors=t}(),function(){"use strict";window.Polymer._polymerFn=function(e){let t;return t="function"==typeof e?e:Polymer.Class(e),customElements.define(t.is,t),t}}(),function(){"use strict";function e(e,t,n,i,r){let s;r&&(s="object"==typeof n&&null!==n)&&(i=e.__dataTemp[t]);let o=i!==n&&(i==i||n==n);return s&&o&&(e.__dataTemp[t]=n),o}Polymer.MutableData=Polymer.dedupingMixin(t=>{return class extends t{_shouldPropertyChange(t,n,i){return e(this,t,n,i,!0)}}}),Polymer.OptionalMutableData=Polymer.dedupingMixin(t=>{return class extends t{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(t,n,i){return e(this,t,n,i,this.mutableData)}}}),Polymer.MutableData._mutablePropertyChange=e}(),function(){"use strict";let e=null;function t(){return e}t.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:t,writable:!0}});const n=Polymer.PropertyEffects(t),i=Polymer.MutableData(n);const r=Polymer.PropertyEffects(class{});class s extends r{constructor(e){super(),this._configureProperties(e),this.root=this._stampTemplate(this.__dataHost);let t=this.children=[];for(let e=this.root.firstChild;e;e=e.nextSibling)t.push(e),e.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let n=this.__templatizeOptions;(e&&n.instanceProps||!n.instanceProps)&&this._enableProperties()}_configureProperties(e){if(this.__templatizeOptions.forwardHostProp)for(let e in this.__hostProps)this._setPendingProperty(e,this.__dataHost["_host_"+e]);for(let t in e)this._setPendingProperty(t,e[t])}forwardHostProp(e,t){this._setPendingPropertyOrPath(e,t,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(e,t,n){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(e,t,e=>{e.model=this,n(e)});else{let i=this.__dataHost.__dataHost;i&&i._addEventListenerToNode(e,t,n)}}_showHideChildren(e){let t=this.children;for(let n=0;n<t.length;n++){let i=t[n];if(Boolean(e)!=Boolean(i.__hideTemplateChildren__))if(i.nodeType===Node.TEXT_NODE)e?(i.__polymerTextContent__=i.textContent,i.textContent=""):i.textContent=i.__polymerTextContent__;else if("slot"===i.localName)if(e)i.__polymerReplaced__=document.createComment("hidden-slot"),i.parentNode.replaceChild(i.__polymerReplaced__,i);else{const e=i.__polymerReplaced__;e&&e.parentNode.replaceChild(i,e)}else i.style&&(e?(i.__polymerDisplay__=i.style.display,i.style.display="none"):i.style.display=i.__polymerDisplay__);i.__hideTemplateChildren__=e,i._showHideChildren&&i._showHideChildren(e)}}_setUnmanagedPropertyToNode(e,t,n){e.__hideTemplateChildren__&&e.nodeType==Node.TEXT_NODE&&"textContent"==t?e.__polymerTextContent__=n:super._setUnmanagedPropertyToNode(e,t,n)}get parentModel(){let e=this.__parentModel;if(!e){let t;e=this;do{e=e.__dataHost.__dataHost}while((t=e.__templatizeOptions)&&!t.parentModel);this.__parentModel=e}return e}dispatchEvent(e){return!0}}s.prototype.__dataHost,s.prototype.__templatizeOptions,s.prototype._methodHost,s.prototype.__templatizeOwner,s.prototype.__hostProps;const o=Polymer.MutableData(s);function a(e,t,n){let i=n.mutableData?o:s,r=class extends i{};return r.prototype.__templatizeOptions=n,r.prototype._bindTemplate(e),function(e,t,n,i){let r=n.hostProps||{};for(let t in i.instanceProps){delete r[t];let n=i.notifyInstanceProp;n&&e.prototype._addPropertyEffect(t,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:u(t,n)})}if(i.forwardHostProp&&t.__dataHost)for(let t in r)e.prototype._addPropertyEffect(t,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(e,t,n){e.__dataHost._setPendingPropertyOrPath("_host_"+t,n[t],!0,!0)}})}(r,e,t,n),r}function c(t,r,s){let o=s.forwardHostProp;if(o){let a=r.templatizeTemplateClass;if(!a){let e=s.mutableData?i:n;a=r.templatizeTemplateClass=class extends e{};let t=r.hostProps;for(let e in t)a.prototype._addPropertyEffect("_host_"+e,a.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:l(e,o)}),a.prototype._createNotifyingProperty("_host_"+e)}!function(t,n){e=t,Object.setPrototypeOf(t,n.prototype),new n,e=null}(t,a),t.__dataProto&&Object.assign(t.__data,t.__dataProto),t.__dataTemp={},t.__dataPending=null,t.__dataOld=null,t._enableProperties()}}function l(e,t){return function(e,n,i){t.call(e.__templatizeOwner,n.substring("_host_".length),i[n])}}function u(e,t){return function(e,n,i){t.call(e.__templatizeOwner,e,n,i[n])}}Polymer.Templatize={templatize(e,t,n){if(n=n||{},e.__templatizeOwner)throw new Error("A <template> can only be templatized once");e.__templatizeOwner=t;let i=(t?t.constructor:s)._parseTemplate(e),r=i.templatizeInstanceClass;r||(r=a(e,i,n),i.templatizeInstanceClass=r),c(e,i,n);let o=class extends r{};return o.prototype._methodHost=function(e){let t=e.__dataHost;return t&&t._methodHost||t}(e),o.prototype.__dataHost=e,o.prototype.__templatizeOwner=t,o.prototype.__hostProps=i.hostProps,o=o},modelForElement(e,t){let n;for(;t;)if(n=t.__templatizeInstance){if(n.__dataHost==e)return n;t=n.__dataHost}else t=t.parentNode;return null}},Polymer.TemplateInstanceBase=s}(),function(){"use strict";Polymer.TemplateInstanceBase;Polymer.Templatizer={templatize(e,t){this._templatizerTemplate=e,this.ctor=Polymer.Templatize.templatize(e,this,{mutableData:Boolean(t),parentModel:this._parentModel,instanceProps:this._instanceProps,forwardHostProp:this._forwardHostPropV2,notifyInstanceProp:this._notifyInstancePropV2})},stamp(e){return new this.ctor(e)},modelForElement(e){return Polymer.Templatize.modelForElement(this._templatizerTemplate,e)}}}(),function(){"use strict";const e=Polymer.GestureEventListeners(Polymer.OptionalMutableData(Polymer.PropertyEffects(HTMLElement)));class t extends e{static get observedAttributes(){return["mutable-data"]}constructor(){super(),this.root=null,this.$=null,this.__children=null}attributeChangedCallback(){this.mutableData=!0}connectedCallback(){this.style.display="none",this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){this.parentNode.insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let e=0;e<this.__children.length;e++)this.root.appendChild(this.__children[e])}render(){let e;if(!this.__children){if(!(e=e||this.querySelector("template"))){let t=new MutationObserver(()=>{if(!(e=this.querySelector("template")))throw new Error("dom-bind requires a <template> child");t.disconnect(),this.render()});return void t.observe(this,{childList:!0})}this.root=this._stampTemplate(e),this.$=this.root.$,this.__children=[];for(let e=this.root.firstChild;e;e=e.nextSibling)this.__children[this.__children.length]=e;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}}customElements.define("dom-bind",t),Polymer.DomBind=t}(),function(){"use strict";class e{constructor(e){this.value=e.toString()}toString(){return this.value}}function t(t){if(t instanceof e)return t.value;throw new Error(`non-literal value passed to Polymer.htmlLiteral: ${t}`)}Polymer.html=function(n,...i){const r=document.createElement("template");return r.innerHTML=i.reduce((i,r,s)=>i+function(n){if(n instanceof HTMLTemplateElement)return n.innerHTML;if(n instanceof e)return t(n);throw new Error(`non-template value passed to Polymer.html: ${n}`)}(r)+n[s+1],n[0]),r},Polymer.htmlLiteral=function(n,...i){return new e(i.reduce((e,i,r)=>e+t(i)+n[r+1],n[0]))}}(),function(){"use strict";const e=Polymer.ElementMixin(HTMLElement);Polymer.Element=e,Polymer.html=Polymer.html}(),function(){"use strict";Polymer.TemplateInstanceBase;const e=Polymer.OptionalMutableData(Polymer.Element);class t extends e{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!0,readOnly:!0},initialCount:{type:Number,observer:"__initializeChunking"},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__limit=1/0,this.__pool=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__lastChunkTime=null,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let e=0;e<this.__instances.length;e++)this.__detachInstance(e)}connectedCallback(){if(super.connectedCallback(),this.style.display="none",this.__isDetached){this.__isDetached=!1;let e=this.parentNode;for(let t=0;t<this.__instances.length;t++)this.__attachInstance(t,e)}}__ensureTemplatized(){if(!this.__ctor){let e=this.template=this.querySelector("template");if(!e){let e=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");e.disconnect(),this.__render()});return e.observe(this,{childList:!0}),!1}let t={};t[this.as]=!0,t[this.indexAs]=!0,t[this.itemsIndexAs]=!0,this.__ctor=Polymer.Templatize.templatize(e,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:t,forwardHostProp:function(e,t){let n=this.__instances;for(let i,r=0;r<n.length&&(i=n[r]);r++)i.forwardHostProp(e,t)},notifyInstanceProp:function(e,t,n){if(Polymer.Path.matches(this.as,t)){let i=e[this.itemsIndexAs];t==this.as&&(this.items[i]=n);let r=Polymer.Path.translate(this.as,"items."+i,t);this.notifyPath(r,n)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(e){if("string"==typeof e){let t=e,n=this.__getMethodHost();return function(){return n[t].apply(n,arguments)}}return e}__sortChanged(e){this.__sortFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__filterChanged(e){this.__filterFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(e){return Math.ceil(1e3/e)}__initializeChunking(){this.initialCount&&(this.__limit=this.initialCount,this.__chunkCount=this.initialCount,this.__lastChunkTime=performance.now())}__tryRenderChunk(){this.items&&this.__limit<this.items.length&&this.__debounceRender(this.__requestRenderChunk)}__requestRenderChunk(){requestAnimationFrame(()=>this.__renderChunk())}__renderChunk(){let e=performance.now(),t=this._targetFrameTime/(e-this.__lastChunkTime);this.__chunkCount=Math.round(this.__chunkCount*t)||1,this.__limit+=this.__chunkCount,this.__lastChunkTime=e,this.__debounceRender(this.__render)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__itemsChanged(e){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(e.path,e.value)||(this.__initializeChunking(),this.__debounceRender(this.__render))}__handleObservedPaths(e){if(this.__sortFn||this.__filterFn)if(e){if(this.__observePaths){let t=this.__observePaths;for(let n=0;n<t.length;n++)0===e.indexOf(t[n])&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__debounceRender(e,t=0){this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,t>0?Polymer.Async.timeOut.after(t):Polymer.Async.microTask,e.bind(this)),Polymer.enqueueDebouncer(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),Polymer.flush()}__render(){this.__ensureTemplatized()&&(this.__applyFullRefresh(),this.__pool.length=0,this._setRenderedItemCount(this.__instances.length),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this.__tryRenderChunk())}__applyFullRefresh(){let e=this.items||[],t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=n;this.__filterFn&&(t=t.filter((t,n,i)=>this.__filterFn(e[t],n,i))),this.__sortFn&&t.sort((t,n)=>this.__sortFn(e[t],e[n]));const n=this.__itemsIdxToInstIdx={};let i=0;const r=Math.min(t.length,this.__limit);for(;i<r;i++){let r=this.__instances[i],s=t[i],o=e[s];n[s]=i,r?(r._setPendingProperty(this.as,o),r._setPendingProperty(this.indexAs,i),r._setPendingProperty(this.itemsIndexAs,s),r._flushProperties()):this.__insertInstance(o,i,s)}for(let e=this.__instances.length-1;e>=i;e--)this.__detachAndRemoveInstance(e)}__detachInstance(e){let t=this.__instances[e];for(let e=0;e<t.children.length;e++){let n=t.children[e];t.root.appendChild(n)}return t}__attachInstance(e,t){let n=this.__instances[e];t.insertBefore(n.root,this)}__detachAndRemoveInstance(e){let t=this.__detachInstance(e);t&&this.__pool.push(t),this.__instances.splice(e,1)}__stampInstance(e,t,n){let i={};return i[this.as]=e,i[this.indexAs]=t,i[this.itemsIndexAs]=n,new this.__ctor(i)}__insertInstance(e,t,n){let i=this.__pool.pop();i?(i._setPendingProperty(this.as,e),i._setPendingProperty(this.indexAs,t),i._setPendingProperty(this.itemsIndexAs,n),i._flushProperties()):i=this.__stampInstance(e,t,n);let r=this.__instances[t+1],s=r?r.children[0]:this;return this.parentNode.insertBefore(i.root,s),this.__instances[t]=i,i}_showHideChildren(e){for(let t=0;t<this.__instances.length;t++)this.__instances[t]._showHideChildren(e)}__handleItemPath(e,t){let n=e.slice(6),i=n.indexOf("."),r=i<0?n:n.substring(0,i);if(r==parseInt(r,10)){let e=i<0?"":n.substring(i+1);this.__handleObservedPaths(e);let s=this.__itemsIdxToInstIdx[r],o=this.__instances[s];if(o){let n=this.as+(e?"."+e:"");o._setPendingPropertyOrPath(n,t,!1,!0),o._flushProperties()}return!0}}itemForElement(e){let t=this.modelForElement(e);return t&&t[this.as]}indexForElement(e){let t=this.modelForElement(e);return t&&t[this.indexAs]}modelForElement(e){return Polymer.Templatize.modelForElement(this.template,e)}}customElements.define(t.is,t),Polymer.DomRepeat=t}(),function(){"use strict";class e extends Polymer.Element{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"}}}constructor(){super(),this.__renderDebouncer=null,this.__invalidProps=null,this.__instance=null,this._lastIf=!1,this.__ctor=null}__debounceRender(){this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,Polymer.Async.microTask,()=>this.__render()),Polymer.enqueueDebouncer(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback(),this.parentNode&&(this.parentNode.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||this.parentNode.host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),this.style.display="none",this.if&&this.__debounceRender()}render(){Polymer.flush()}__render(){if(this.if){if(!this.__ensureInstance())return;this._showHideChildren()}else this.restamp&&this.__teardownInstance();!this.restamp&&this.__instance&&this._showHideChildren(),this.if!=this._lastIf&&(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__ensureInstance(){let e=this.parentNode;if(e){if(!this.__ctor){let e=this.querySelector("template");if(!e){let e=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-if requires a <template> child");e.disconnect(),this.__render()});return e.observe(this,{childList:!0}),!1}this.__ctor=Polymer.Templatize.templatize(e,this,{mutableData:!0,forwardHostProp:function(e,t){this.__instance&&(this.if?this.__instance.forwardHostProp(e,t):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Polymer.Path.root(e)]=!0))}})}if(this.__instance){this.__syncHostProperties();let t=this.__instance.children;if(t&&t.length){if(this.previousSibling!==t[t.length-1])for(let n,i=0;i<t.length&&(n=t[i]);i++)e.insertBefore(n,this)}}else this.__instance=new this.__ctor,e.insertBefore(this.__instance.root,this)}return!0}__syncHostProperties(){let e=this.__invalidProps;if(e){for(let t in e)this.__instance._setPendingProperty(t,this.__dataHost[t]);this.__invalidProps=null,this.__instance._flushProperties()}}__teardownInstance(){if(this.__instance){let e=this.__instance.children;if(e&&e.length){let t=e[0].parentNode;for(let n,i=0;i<e.length&&(n=e[i]);i++)t.removeChild(n)}this.__instance=null,this.__invalidProps=null}}_showHideChildren(){let e=this.__hideTemplateChildren__||!this.if;this.__instance&&this.__instance._showHideChildren(e)}}customElements.define(e.is,e),Polymer.DomIf=e}(),function(){"use strict";let e=Polymer.dedupingMixin(e=>{let t=Polymer.ElementMixin(e);return class extends t{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return["__updateSelection(multi, items.*)"]}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(e,t){let n=t.path;if("items"==n){let n=t.base||[],i=this.__lastItems;if(e!==this.__lastMulti&&this.clearSelection(),i){let e=Polymer.ArraySplice.calculateSplices(n,i);this.__applySplices(e)}this.__lastItems=n,this.__lastMulti=e}else if("items.splices"==t.path)this.__applySplices(t.value.indexSplices);else{let e=n.slice("items.".length),t=parseInt(e,10);e.indexOf(".")<0&&e==t&&this.__deselectChangedIdx(t)}}__applySplices(e){let t=this.__selectedMap;for(let n=0;n<e.length;n++){let i=e[n];t.forEach((e,n)=>{e<i.index||(e>=i.index+i.removed.length?t.set(n,e+i.addedCount-i.removed.length):t.set(n,-1))});for(let e=0;e<i.addedCount;e++){let n=i.index+e;t.has(this.items[n])&&t.set(this.items[n],n)}}this.__updateLinks();let n=0;t.forEach((e,i)=>{e<0?(this.multi?this.splice("selected",n,1):this.selected=this.selectedItem=null,t.delete(i)):n++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let e=0;this.__selectedMap.forEach(t=>{t>=0&&this.linkPaths("items."+t,"selected."+e++)})}else this.__selectedMap.forEach(e=>{this.linkPaths("selected","items."+e),this.linkPaths("selectedItem","items."+e)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(e){return this.__selectedMap.has(e)}isIndexSelected(e){return this.isSelected(this.items[e])}__deselectChangedIdx(e){let t=this.__selectedIndexForItemIndex(e);if(t>=0){let e=0;this.__selectedMap.forEach((n,i)=>{t==e++&&this.deselect(i)})}}__selectedIndexForItemIndex(e){let t=this.__dataLinkedPaths["items."+e];if(t)return parseInt(t.slice("selected.".length),10)}deselect(e){let t=this.__selectedMap.get(e);if(t>=0){let n;this.__selectedMap.delete(e),this.multi&&(n=this.__selectedIndexForItemIndex(t)),this.__updateLinks(),this.multi?this.splice("selected",n,1):this.selected=this.selectedItem=null}}deselectIndex(e){this.deselect(this.items[e])}select(e){this.selectIndex(this.items.indexOf(e))}selectIndex(e){let t=this.items[e];this.isSelected(t)?this.toggle&&this.deselectIndex(e):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(t,e),this.__updateLinks(),this.multi?this.push("selected",t):this.selected=this.selectedItem=t)}}});Polymer.ArraySelectorMixin=e;let t=e(Polymer.Element);class n extends t{static get is(){return"array-selector"}}customElements.define(n.is,n),Polymer.ArraySelector=n}(),function(){"use strict";const e="include",t=window.ShadyCSS.CustomStyleInterface;class n extends HTMLElement{constructor(){super(),this._style=null,t.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const t=this.querySelector("style");if(!t)return null;this._style=t;const n=t.getAttribute(e);return n&&(t.removeAttribute(e),t.textContent=Polymer.StyleGather.cssFromModules(n)+t.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define("custom-style",n),Polymer.CustomStyle=n}(),function(){"use strict";let e;e=Polymer.MutableData._mutablePropertyChange,Polymer.MutableDataBehavior={_shouldPropertyChange(t,n,i){return e(this,t,n,i,!0)}},Polymer.OptionalMutableDataBehavior={properties:{mutableData:Boolean},_shouldPropertyChange(t,n,i){return e(this,t,n,i,this.mutableData)}}}(),Polymer.Base=Polymer.LegacyElementMixin(HTMLElement).prototype,Polymer.html=Polymer.html,function(){var e,t,n,i,r=[].slice,s=Array.from||function(e){return r.call(e)};function o(e,t,n,i,r){var s,o;s=document.createElement("div"),n?(s.innerHTML="<b></b><br>",s.querySelector("b").textContent=t,s.insertAdjacentText("beforeend",n)):s.insertAdjacentText("beforeend",t),o=csw.functions.notify(s,e,"right",i),r&&o.addEventListener("click",r)}function a(t,i,r,s){return new Promise(function(a){var c;"number"==typeof r&&(s=r,r=""),document.hasFocus()||!Notification||"denied"===Notification.permission?o(t,i,r,s,a):"default"===Notification.permission?(n||(n=!0,c=e?"Application tried to show you a system notification while was inactive, but you have to grant permission for that first, do that after clicking on this notification":"Website tried to show you a desktop notification while was inactive, but you have to grant permission for that first, do that after clicking on this notification",csw.functions.notify(c,"warning","right").addEventListener("click",function(){Notification.requestPermission().then(function(e){switch(e){case"granted":csw.functions.notify("You will no longer miss important notifications ","success","right",3);break;case"denied":csw.functions.notify("In case you change your mind, desktop notifications can be re-enabled in browser settings ","success","right",5)}})})),o(t,i,r,s,a)):function(e,t,n,i){var r;r=new Notification(e,{body:t}),i&&r.addEventListener("click",i),n&&setTimeout(function(){r.close()},1e3*n)}(i,r,s,a)})}e="?home"===location.search,Polymer.setPassiveTouchGestures(!0),"serviceWorker"in navigator&&window.detox_sw_path&&require(["@detox/chat"]).then(function(t){t[0].ready(function(){navigator.serviceWorker.register(detox_sw_path).then(function(t){t.onupdatefound=function(){var n;(n=t.installing).onstatechange=function(){switch(n.state){case"installed":navigator.serviceWorker.controller?e?detox_chat_app.notify_success("Application was updated in background and new version ready to be used, restart to enjoy it",10):detox_chat_app.notify_success("Website was updated in background and new version ready to be used, refresh page to enjoy it",10):e?detox_chat_app.notify_success("Application is ready to work offline",10):detox_chat_app.notify_success("Website is ready to work offline",10);break;case"redundant":console.error("The installing service worker became redundant")}}},window.detox_service_worker_registration=t}).catch(function(e){console.error("Error during service worker registration:",e)})})}),null!=(t=navigator.storage)&&t.persist?navigator.storage.persisted().then(function(e){e||(console.info("Persistent storage is not yet granted, requesting..."),navigator.storage.persist().then(function(e){e?console.info("Persistent storage granted"):console.warn("Persistent storage denied, data may be lost under storage pressure")}))}):console.warn("Persistent storage not supported, data may be lost under storage pressure"),n=!1,(i=window.detox_chat_app||(window.detox_chat_app={})).notify_error=function(){return a.apply(null,["error"].concat(s(arguments)))},i.notify=function(){return a.apply(null,[""].concat(s(arguments)))},i.notify_success=function(){return a.apply(null,["success"].concat(s(arguments)))},i.notify_warning=function(){return a.apply(null,["warning"].concat(s(arguments)))},i.play_sound=function(e){try{new Audio(e).play()}catch(e){}},i.simple_modal=function(t){var n,i;return n=+new Date,(i=csw.functions.simple_modal(t)).addEventListener("close",function(){history.state===n&&history.back()}),e&&(history.pushState(n,"","#modal"),window.addEventListener("popstate",function(){i.close()},{once:!0})),i},e&&(history.pushState({loaded:!0},""),addEventListener("popstate",function(){var e;null!=(e=history.state)&&e.loaded||(csw.functions.notify("Press one more time to exit","bottom",2),setTimeout(function(){history.pushState({loaded:!0},"")},2e3))}))}.call(this),function(){window.csw||(window.csw={}),csw.behaviors||(csw.behaviors={}),csw.functions||(csw.functions={})}.call(this),function(){csw.behaviors.button={properties:{active:{notify:!0,reflectToAttribute:!0,type:Boolean},empty:{reflectToAttribute:!0,type:Boolean},iconBefore:{type:String},iconAfter:{type:String},icon:{type:String},primary:{reflectToAttribute:!0,type:Boolean}},ready:function(){var e;this.empty=!this.firstElementChild.childNodes.length,(e=this.iconBefore||this.icon)&&this.firstElementChild.insertAdjacentHTML("afterbegin",'<csw-icon icon="'+e+'" mono></csw-icon> '),this.iconAfter&&this.firstElementChild.insertAdjacentHTML("beforeend",' <csw-icon icon="'+this.iconAfter+'" mono></csw-icon>')}}}.call(this),function(){var e;(e=csw.functions).modal=function(e){var t;return t=document.createElement("csw-modal"),"string"==typeof e||e instanceof Function?t.innerHTML=e:"jquery"in e?e.appendTo(t):t.appendChild(e),document.documentElement.appendChild(t),t},e.simple_modal=function(e){var t;return(t=csw.functions.modal(e)).autoDestroy=!0,t.open(),t},e.alert=function(e){return e instanceof Function&&(e=e.toString()),"string"==typeof e&&-1===e.indexOf("<")&&(e="<h3>"+e+"</h3>"),new Promise(function(t){var n,i,r,s,o,a;(n=i=csw.functions.modal(e)).autoDestroy=!0,n.manualClose=!0,(r=s=document.createElement("csw-button")).innerHTML="<button>OK</button>",r.primary=!0,r.action="close",r.bind=i,(o=s.firstElementChild).addEventListener("click",function(){t(),i.close()}),(a=i).ok=o,a.appendChild(s),a.open(),o.focus()})},e.confirm=function(e,t,n){var i,r,s,o,a,c,l,u;return e instanceof Function&&(e=e.toString()),"string"==typeof e&&-1===e.indexOf("<")&&(e="<h3>"+e+"</h3>"),(i=r=csw.functions.modal(e)).autoDestroy=!0,i.manualClose=!0,(s=o=document.createElement("csw-button")).innerHTML="<button>OK</button>",s.primary=!0,(a=o.firstElementChild).addEventListener("click",function(){"function"==typeof t&&t(),r.close()}),(c=document.createElement("csw-button")).innerHTML="<button>Cancel</button>",(l=c.firstElementChild).addEventListener("click",function(){"function"==typeof n&&n(),r.close()}),(u=r).ok=a,u.cancel=l,u.appendChild(o),u.appendChild(c),u.open(),a.focus(),t?r:new Promise(function(e,t){a.addEventListener("click",function(){e(),r.close()}),l.addEventListener("click",function(){t(),r.close()})})},e.prompt=function(e,t,n){var i,r,s,o;return e instanceof Function&&(e=e.toString()),"string"==typeof e&&-1===e.indexOf("<")&&(e="<h3>"+e+"</h3>"),((i=csw.functions.confirm(e+'\n<p><csw-input-text><input type="text"></csw-input-text></p>',function(){})).input=i.querySelector("input")).focus(),r=i.input,s=i.ok,o=i.cancel,t?(s.addEventListener("click",function(){t(r.value)}),o.addEventListener("click",function(){"function"==typeof n&&n()}),i):new Promise(function(e,t){s.addEventListener("click",function(){e(r.value)}),o.addEventListener("click",function(){t()})})},e.notify=function(e){var t,n,i,r,s,o,a;for(n=[],i=1,r=arguments.length;i<r;++i)n.push(arguments[i]);t=n,s=document.createElement("csw-notify"),"string"==typeof e||e instanceof Function?s.innerHTML=e:"jquery"in e?e.appendTo(s):s.appendChild(e),s.noIcon=!0;for(i=0,o=t.length;i<o;++i)switch(typeof(a=t[i])){case"string":s[a]=!0;break;case"number":s.timeout=a}return document.documentElement.insertBefore(s,document.querySelector(s.is)),s}}.call(this),function(){var e,t;e=new Promise(function(e){var t;window.WebComponents&&window.WebComponents.ready?setTimeout(e):(t=function(){setTimeout(e),document.removeEventListener("WebComponentsReady",t)},document.addEventListener("WebComponentsReady",t))}),t={},csw.behaviors.injectLightStyles=[{attached:function(){var n,i,r=this;this._styles_dom_module_added||(this._styles_dom_module_added=!0,t[this._styles_dom_module]?this.insertAdjacentHTML("beforeend","<style>"+t[this._styles_dom_module]+"</style>"):((n=document.querySelector("head")).insertAdjacentHTML("beforeend",'<custom-style><style include="'+this._styles_dom_module+'"></style></custom-style>'),i=n.lastElementChild,e.then(function(){Polymer.updateStyles(),t[r._styles_dom_module]=i.firstElementChild.textContent.split(":not(.style-scope)").join(""),n.removeChild(i),r.insertAdjacentHTML("beforeend","<style>"+t[r._styles_dom_module]+"</style>")})))}}]}.call(this),function(){csw.behaviors.label={properties:{active:{notify:!0,observer:"_active_changed",reflectToAttribute:!0,type:Boolean},value:{notify:!0,observer:"_value_changed",type:String}},attached:function(){var e,t,n,i,r,s,o=this;for((r=o.nextSibling)&&r.nodeType===Node.TEXT_NODE&&null!=(s=r.nextSibling)&&"function"==typeof s.matches&&s.matches(o.is)&&r.parentNode.removeChild(r),this.local_input=this.querySelector("input"),this.local_input.label=this,this.active=this.local_input.checked,e=this._get_inputs(),void 0!==this.value&&this._value_changed(this.value),t=0,n=e.length;t<n;++t)i=e[t],a.call(this,i);function a(e){var t=this;e.addEventListener("change",function(){"radio"===t.local_input.type?(t.value=e.value,t.active=t.local_input.value==e.value,t.local_input.checked=t.local_input.value==e.value):t.active=!t.active}),e.checked&&(this.value=e.value)}this.local_input.addEventListener("focus",function(){o.focus=!0}),this.local_input.addEventListener("blur",function(){o.focus=!1})},_get_inputs:function(){return this.local_input.name?this.parentNode.querySelectorAll('input[name="'+this.local_input.name+'"]'):this._inputs_around()},_inputs_around:function(){var e,t,n;for((e=[]).push(this.local_input),t=this;(t=t.previousElementSibling)&&t.matches(this.is)&&(n=t.querySelector("input"));)e.push(n);for(t=this;(t=t.nextElementSibling)&&t.matches(this.is)&&(n=t.querySelector("input"));)e.push(n);return e},_active_changed:function(e){void 0!==e&&this.local_input.checked!==e&&("radio"===this.local_input.type?e&&this.click():this.local_input.checked=e)},_value_changed:function(e){var t,n,i,r,s,o;if(void 0!==e&&this.local_input)for(t=0,i=(n=this._get_inputs()).length;t<i;++t)s=(r=n[t]).value==e,r.checked=s,null!=(o=r.label)&&(o.active=s)}}}.call(this),function(){csw.behaviors.ready={_when_ready:function(e){var t;window.WebComponents&&window.WebComponents.ready?setTimeout(e):(t=function(){setTimeout(e),document.removeEventListener("WebComponentsReady",t)},document.addEventListener("WebComponentsReady",t))}}}.call(this),function(){csw.behaviors.size={properties:{compact:{reflectToAttribute:!0,type:Boolean},fullWidth:{reflectToAttribute:!0,type:Boolean}}}}.call(this),function(){csw.behaviors.tight={properties:{tight:Boolean},ready:function(){this.tight&&(null!=this?this.nextSibling.nodeType:void 0)===Node.TEXT_NODE&&this.nextSibling.parentNode.removeChild(this.nextSibling)}}}.call(this),function(){csw.behaviors.this={properties:{this:{notify:!0,readOnly:!0,type:Object}},attached:function(){this.this||this._setThis(this)}}}.call(this),function(){var e;e=null,csw.behaviors.tooltip={properties:{tooltip:{observer:"_tooltip_changed",type:String}},attached:function(){var e=this;this.addEventListener("mouseover",function(){return function t(){e.removeEventListener("mouseover",t),e.tooltip&&e._tooltip_for_element(e)}}())},_tooltip_for_element:function(t){var n,i,r=this;this._tooltip_binding_added||(this._tooltip_binding_added=!0,this._initialize_tooltip(),t.tooltip=t.tooltip||t.getAttribute("tooltip"),n=this._schedule_show.bind(this,t),i=function(){r._cancel_schedule_show(),e._hide(t)},t.addEventListener("mousemove",n),t.addEventListener("pointermove",n),t.addEventListener("mouseleave",i),t.addEventListener("pointerleave",i),document.addEventListener("wheel",i,{passive:!0}),document.addEventListener("touchmove",i,{passive:!0}))},_initialize_tooltip:function(){e||(e=document.createElement("csw-tooltip"),document.documentElement.appendChild(e))},_schedule_show:function(t){this._cancel_schedule_show(),this.show_timeout=setTimeout(e._show.bind(e,t),e._for_element=this,100)},_cancel_schedule_show:function(){this.show_timeout&&clearTimeout(this.show_timeout)},_tooltip_changed:function(t){void 0!==t&&e&&e._for_element===this&&e._update_content(t)}}}.call(this),function(){csw.behaviors.value={ready:function(){var e;(e=this.firstElementChild).addEventListener("change",function(){this.dispatchEvent(new CustomEvent("value-changed"))}),e.addEventListener("input",function(){this.dispatchEvent(new CustomEvent("value-changed"))})}}}.call(this),function(){csw.behaviors.cswButton=[csw.behaviors.button,csw.behaviors.tight,csw.behaviors.tooltip,{properties:{action:String,bind:Object},listeners:{tap:"_tap"},_tap:function(){if(this.bind&&this.action)return this.bind[this.action]()}}]}.call(this),function(){csw.behaviors.cswDropdown=[{hostAttributes:{role:"group"},properties:{align:"left",opened:{reflectToAttribute:!0,type:Boolean},target:Object},created:function(){var e=this;document.addEventListener("keydown",function(t){27===t.keyCode&&e.opened&&(e.opened=!1)}),document.addEventListener("click",function(t){var n,i,r;if(e.opened){for(n=0,r=(i=t.composedPath()).length;n<r;++n)if(i[n]===e.target)return;e.close()}})},attached:function(){!this.target&&this.previousElementSibling.matches("csw-button")&&(this.target=this.previousElementSibling,this.target.action="toggle",this.target.bind=this)},toggle:function(){this.opened?this.close():this.open()},open:function(){var e;!this.opened&&this.target&&(e=this.target.getBoundingClientRect(),"left"===this.align?this.style.left=e.left+"px":this.style.right=document.documentElement.clientWidth-e.right-scrollX+"px",this.style.top=e.top+e.height+"px",this.opened=!0,this.fire("open"))},close:function(){this.opened&&(this.opened=!1,this.fire("close"))}}]}.call(this),function(){csw.behaviors.cswForm=[csw.behaviors.injectLightStyles,{_styles_dom_module:"csw-form-styles"}]}.call(this),function(){csw.behaviors.cswGroup=[{hostAttributes:{role:"group"},properties:{vertical:{reflectToAttribute:!0,type:Boolean}}}]}.call(this),function(){csw.behaviors.cswIcon=[csw.behaviors.tooltip,{observers:["_icon_changed(icon, flipX, flipY, mono, rotate, spin, spinStep)"],properties:{icon:{reflectToAttribute:!0,type:String},flipX:{reflectToAttribute:!0,type:Boolean,value:!1},flipY:{reflectToAttribute:!0,type:Boolean,value:!1},mono:{reflectToAttribute:!0,type:Boolean,value:!1},rotate:{reflectToAttribute:!0,type:Number,value:!1},spin:{reflectToAttribute:!0,type:Boolean,value:!1},spinStep:{reflectToAttribute:!0,type:Boolean,value:!1},multiple:{type:Boolean,value:!1},stacked1:String,stacked2:String,regular:String},_icon_changed:function(e,t,n,i,r,s,o){var a,c;e?(this.hidden&&(this.hidden=!1),a="",t&&(a+="fa-flip-horizontal "),n&&(a+="fa-flip-vertical "),i&&(a+="fa-fw "),r&&(a+="fa-rotate-"+r+" "),s&&(a+="fa-spin "),o&&(a+="fa-pulse "),a+="fa ",c=e.split(" "),this.multiple=c.length>1,this.multiple?(this.stacked1=a+this._full_icon_name(c[0])+" fa-stack-2x",this.stacked2=a+this._full_icon_name(c[1])+" fa-stack-1x fa-inverse"):this.regular=a+this._full_icon_name(c[0])):this.hidden=!0},_full_icon_name:function(e){var t;return"fab"===(t=e.split("-")[0])||"fa"===t||"fas"===t||"far"===t?e:"fab-"+e+" fa-"+e}}]}.call(this),function(){csw.behaviors.cswInputText=[csw.behaviors.size,csw.behaviors.tight,csw.behaviors.tooltip,csw.behaviors.value]}.call(this),function(){csw.behaviors.cswLabelButton=[csw.behaviors.label,csw.behaviors.tooltip,csw.behaviors.injectLightStyles,{_styles_dom_module:"csw-label-button-styles",properties:{first:{reflectToAttribute:!0,type:Boolean},last:{reflectToAttribute:!0,type:Boolean},primary:{reflectToAttribute:!0,type:Boolean}},ready:function(){var e,t;if((null!=(e=this.previousElementSibling)?e.is:void 0)!==this.is&&(this.first=!0),(null!=(t=this.nextElementSibling)?t.is:void 0)!==this.is&&(this.last=!0),this.querySelector("label").setAttribute("role","button"),this.querySelector("input").disabled)return this.querySelector("label").setAttribute("disabled","")}}]}.call(this),function(){csw.behaviors.cswLabelSwitcher=[csw.behaviors.label,csw.behaviors.tooltip,csw.behaviors.injectLightStyles,{_styles_dom_module:"csw-label-switcher-styles",attached:function(){this.querySelector("csw-icon")||(this.querySelector("input").insertAdjacentHTML("afterend",'<csw-icon icon="check" mono></csw-icon>'),this.querySelector("input").disabled&&this.querySelector("label").setAttribute("disabled",""))}}]}.call(this),function(){csw.behaviors.cswLinkButton=[csw.behaviors.button,csw.behaviors.tight,csw.behaviors.tooltip,{ready:function(){return this.querySelector("a").setAttribute("role","button")}}]}.call(this),function(){csw.behaviors.cswModal=[csw.behaviors.this,{properties:{asIs:{reflectToAttribute:!0,type:Boolean},autoDestroy:Boolean,autoOpen:Boolean,manualClose:Boolean,opened:{observer:"_opened_changed",type:Boolean}},listeners:{transitionend:"_transitionend"},_esc_handler:function(e){27!==e.keyCode||this.manualClose||this.close()},ready:function(){this._esc_handler=this._esc_handler.bind(this)},attached:function(){var e;null!=(e=this.previousElementSibling)&&e.matches("csw-button")&&!this.previousElementSibling.action&&(this.previousElementSibling.action="open",this.previousElementSibling.bind=this),this.autoOpen&&(this.autoOpen=!1,this.open())},_transitionend:function(){var e;!this.opened&&this.autoDestroy&&null!=(e=this.parentNode)&&e.removeChild(this)},_overlay_tap:function(){this.manualClose||this.close()},_opened_changed:function(e){var t,n,i,r=this;void 0!==e&&(null!=(t=this.parentNode)&&t.matches("html")||document.documentElement.appendChild(this),this.distributeContent(!0),Polymer.dom.flush(),(n=document.body).modalOpened=n.modalOpened||0,e?(null!=(i=document.querySelector("csw-tooltip"))&&(i.show=!1),document.addEventListener("keydown",this._esc_handler),this.content&&(this.innerHTML=this.content,this.content=null),++n.modalOpened,this.fire("open"),n.setAttribute("modal-opened",""),setTimeout(function(){r.setAttribute("opened","")},100)):(document.removeEventListener("keydown",this._esc_handler),--n.modalOpened,this.fire("close"),this.removeAttribute("opened"),n.modalOpened||n.removeAttribute("modal-opened")))},open:function(){return this.opened||(this.opened=!0),this},close:function(){return this.opened&&(this.opened=!1),this}}]}.call(this),function(){var e;e=new Promise(csw.behaviors.ready._when_ready),csw.behaviors.cswNotify=[csw.behaviors.ready,{properties:{bottom:{reflectToAttribute:!0,type:Boolean},content:String,error:{reflectToAttribute:!0,type:Boolean},left:{reflectToAttribute:!0,type:Boolean},noIcon:{reflectToAttribute:!0,type:Boolean},right:{reflectToAttribute:!0,type:Boolean},selectable:{reflectToAttribute:!0,type:Boolean},show:{reflectToAttribute:!0,type:Boolean},success:{reflectToAttribute:!0,type:Boolean},timeout:Number,top:{reflectToAttribute:!0,type:Boolean},warning:{reflectToAttribute:!0,type:Boolean}},attached:function(){this.last_node=this.parentNode,this.parentNode.matches("html")?(this.bottom||this.top||(this.top=!0),this.offsetLeft,this._show()):document.documentElement.insertBefore(this,document.querySelector(this.is))},_tap:function(e){this.selectable&&e.target!==this.$.content&&e.target!==this.$.icon||this._hide()},_show:function(){var t=this;e=e.then(function(){return t.content&&(t.innerHTML=t.content),t.show=!0,t._update_position(),t.fire("show"),new Promise(function(e){setTimeout(function(){t.timeout&&setTimeout(t._hide.bind(t),1e3*t.timeout),e()},t._transition_duration())})})},_hide:function(){var t=this;e=e.then(function(){return t.show=!1,t._update_position(),t.fire("hide"),new Promise(function(e){setTimeout(function(){var n;null!=(n=t.parentNode)&&n.removeChild(t),e()},t._transition_duration())})})},_get_similar:function(){var e,t,n,i,r;return e=this.is,t=this.bottom,n=this.left,i=this.right,r=this.top,Array.from(document.querySelector("html").children).filter(function(s){return s.is===e&&s.bottom===t&&s.left===n&&s.right===i&&s.top===r&&s.show})},_update_position:function(e){var t,n,i,r,s,o;for(n=0,i=(t=this._get_similar()).length;n<i;++n)r=n,s=t[n],o=t[r-1],s._update_own_position(o)},_update_own_position:function(e){var t,n,i;e?(t=parseFloat(e.style.marginBottom||0),n=parseFloat(getComputedStyle(e).height),i=parseFloat(e.style.marginTop||0)):(t=0,n=0,i=0),this.top?this.style.marginTop=i+n+"px":this.style.marginBottom=t+n+"px"},_transition_duration:function(){var e;return"ms"===(e=getComputedStyle(this).transitionDuration).substr(-2)?parseFloat(e):1e3*parseFloat(e)}}]}.call(this),function(){csw.behaviors.cswPagination=[{hostAttributes:{role:"group"},properties:{page:{notify:!0,reflectToAttribute:!0,type:Number},pages:{reflectToAttribute:!0,type:Number},pages_list:Array},_pages_list:function(e,t){var n,i,r,s;if(e&&t){if(n=[],i=this._render_one.bind(this,n,e),t<=11)for(r=1;r<=t;++r)i(r);else if(e<=6){for(r=1;r<=7;++r)i(r);for(i(0,"..."),r=t-2;r<=t;++r)i(r)}else if(e>=t-5){for(r=1;r<=3;++r)i(r);for(i(0,"..."),r=t-6;r<=t;++r)i(r)}else{for(r=1;r<=2;++r)i(r);for(i(0,"..."),r=e-2,s=e+2;r<=s;++r)i(r);for(i(0,"..."),r=t-1;r<=t;++r)i(r)}return n[0].first=!0,n[n.length-1].last=!0,n}},_render_one:function(e,t,n,i){e.push({text:i||n,active:n===t,disabled:!n})},_set_page:function(e){this.page=e.model.item.text},next:function(){this.page<this.pages&&this.page++},prev:function(){this.page>1&&this.page--}}]}.call(this),function(){csw.behaviors.cswProgress=[csw.behaviors.size,csw.behaviors.tight,csw.behaviors.tooltip,csw.behaviors.injectLightStyles,{_styles_dom_module:"csw-progress-styles",properties:{infinite:Boolean,primary:{reflectToAttribute:!0,type:Boolean},textProgress:{type:Boolean,value:!1},value:{observer:"_value_changed",reflectToAttribute:!0,type:Number}},attached:function(){var e,t,n=this;this.firstElementChild.getAttribute("max")||(this.firstElementChild.max=100),e=this.firstElementChild.getAttribute("value"),this.value?this.firstElementChild.setAttribute("value",this.value):this.value=e||0,this.infinite&&(t=function(){n.parentNode&&(n.value=(n.value+9)%n.firstElementChild.max,n.firstElementChild.value=n.value,setTimeout(t,200))})()},_value_changed:function(e){var t;void 0!==e&&null!=(t=this.firstElementChild)&&(t.value=e)}}]}.call(this),function(){csw.behaviors.cswSelect=[csw.behaviors.ready,csw.behaviors.size,csw.behaviors.tight,csw.behaviors.tooltip,csw.behaviors.value,csw.behaviors.injectLightStyles,{_styles_dom_module:"csw-select-styles",properties:{selected:{notify:!0,observer:"_selected_changed",type:Object}},ready:function(){var e,t=this;e=function(){var n,i,r,s,o,a;if(t._select=t.firstElementChild,t._select.addEventListener("value-changed",(s=t,o="_value_changed",function(){return(a||s)[o].apply(s,arguments)})),void 0===t.selected&&(t.selected=t._select.value),clearTimeout(n),n=setTimeout(function(){t.removeEventListener("dom-change",e),void 0!==t.selected&&t._selected_changed(t.selected)},100),!t._height_updated)if(t._select.size<=1)t._height_updated=!0;else{if(t.querySelectorAll("option").length){if(0===(i=t.querySelector("option").getBoundingClientRect().height*t._select.size))return;t._height_updated=!0,r=parseFloat(getComputedStyle(t._select).fontSize),t._select.style.height="calc("+i+"em / "+r+")"}t._scroll_to_selected()}},this.addEventListener("dom-change",e)},_scroll_to_selected:function(){var e,t;(e=this.querySelector("option"))&&(t=e.getBoundingClientRect().height,this._select.size>1&&this._select.selectedOptions[0]&&(this._select.scrollTop=t*(this._select.selectedIndex-Math.floor(this._select.size/2))+this._number_of_optgroups()),this._select.getBoundingClientRect().height>=t*(this.querySelectorAll("option").length+this.querySelectorAll("optgroup").length)&&(this._select.style.overflowY="auto"))},_number_of_optgroups:function(){var e,t;if(t=0,(e=this._select.selectedOptions[0].parentNode).matches("optgroup"))for(;e;)++t,e=e.previousElementSibling;return t},_value_changed:function(){var e;e=[],Array.prototype.forEach.call(this._select.selectedOptions,function(t){return e.push(t.value)}),this._select.multiple||(e=e[0]),this.set("selected",e)},_selected_changed:function(e){void 0!==e&&(e=e instanceof Array?e.map(String):String(e),Array.prototype.forEach.call(this.querySelectorAll("option"),function(t){return t.selected=e===t.value||e instanceof Array&&-1!==e.indexOf(t.value)}),this.fire("selected"))}}]}.call(this),function(){csw.behaviors.cswSwitcher=[{properties:{selected:{notify:!0,observer:"_selected_changed",type:Number}},ready:function(){var e,t,n;for(e=0,n=(t=this.children).length;e<n;++e)if(t[e].active)return;this.selected||(this.selected=0)},_selected_changed:function(e){var t,n,i,r,s;if(void 0!==e)for(t=0,i=(n=this.children).length;t<i;++t)r=t,(s=n[t]).matches("template")||(s.active=r===e,r===e?s.setAttribute("active",""):s.removeAttribute("active"))}}]}.call(this),function(){csw.behaviors.cswTabs=[{hostAttributes:{role:"group"},properties:{selected:{notify:!0,observer:"_selected_changed",type:Number}},listeners:{tap:"_tap"},ready:function(){var e,t,n;for(e=0,n=(t=this.children).length;e<n;++e)if(t[e].active)return;this.selected||(this.selected=0)},_tap:function(e){var t,n,i,r,s,o,a=this;if(t=function(){var t,n,i,r;for(t=0,i=(n=e.composedPath()).length;t<i;++t)if(r=t,n[t]===a)return e.composedPath()[r-3]}())for(n=0,r=(i=this.children).length;n<r;++n)s=n,(o=i[n]).matches("template")||(o===t?(this.selected=s,o.setAttribute("active","")):o.removeAttribute("active"))},_selected_changed:function(e){var t,n,i,r,s;if(void 0!==e){for(t=0,i=(n=this.children).length;t<i;++t)r=t,(s=n[t]).matches("template")||(s.active=r===e,r===e?s.setAttribute("active",""):s.removeAttribute("active"));null!=(n=this.nextElementSibling)&&"function"==typeof n.matches&&n.matches("csw-switcher")&&(this.nextElementSibling.selected=e)}}}]}.call(this),function(){function e(e,t,n){return function(){return(n||e)[t].apply(e,arguments)}}csw.behaviors.cswTextarea=[csw.behaviors.ready,csw.behaviors.size,csw.behaviors.tooltip,csw.behaviors.value,{properties:{autosize:{observer:"_autosize_changed",reflectToAttribute:!0,type:Boolean},initialized:Boolean},attached:function(){this.initialized=!0,this._when_ready(e(this,"_do_autosizing"))},_autosize_changed:function(){this._do_autosizing()},_do_autosizing:function(){this.initialized&&void 0!==this.autosize&&(window.autosize?this._do_autosizing_callback(autosize):window.require&&require(["autosize"],e(this,"_do_autosizing_callback")))},_do_autosizing_callback:function(e){void 0!==e&&(e?(e(this.firstElementChild),e.update(this.firstElementChild)):e.destroy(this.firstElementChild))}}]}.call(this),function(){csw.behaviors.cswTooltip=[csw.behaviors.tooltip,{properties:{selectable:{reflectToAttribute:!0,type:Boolean},show:{reflectToAttribute:!0,type:Boolean},showQuick:{reflectToAttribute:!0,type:Boolean},top:{reflectToAttribute:!0,type:Boolean}},listeners:{mouseenter:"_self_show",pointerenter:"_self_show",mouseleave:"_self_hide",pointerleave:"_self_hide"},attached:function(){var e,t=this;(e=this.parentNode).matches("html")?document.addEventListener("keydown",function(e){27===e.keyCode&&t.show&&(t.show=!1)}):(e.removeChild(this),e.addEventListener("mouseover",function(){return function n(){e.removeEventListener("mouseover",n),t._tooltip_for_element(e)}}()))},_self_show:function(){this.selectable&&(this.show=!0)},_self_hide:function(){this.selectable&&this._hide()},_show:function(e){var t,n,i;e.tooltip&&!this.show&&(this._update_content(e.tooltip),t=this._get_tooltip_position(e),(n=this.style).top=t.top+"px",n.left=t.left+"px",this.top=t.arrow_top,(i=this.$.arrow.style).left=-t.arrow_left_offset+"px",i.right=t.arrow_left_offset+"px",this.show=!0)},_hide:function(){this.show=!1},_get_tooltip_position:function(e){var t,n,i,r,s;return this.showQuick=!0,Polymer.flush(),t=this.getBoundingClientRect(),n=e.getBoundingClientRect(),i={top:scrollY,left:scrollX,arrow_top:!1,arrow_left_offset:0},r=document.documentElement.clientWidth,this.showQuick=!1,n.top>t.height?i.top+=n.top-t.height:(i.arrow_top=!0,i.top+=n.bottom),(s=n.left+n.width/2-t.width/2)>=0?s+t.width<=r?i.left+=s:(i.left+=r-t.width,i.arrow_left_offset=r-t.width/2-n.left-n.width/2):i.arrow_left_offset=t.width/2-n.left-n.width/2,i},_update_content:function(e){this.innerHTML!==e&&(this.innerHTML=e)}}]}.call(this),function(){Polymer({is:"csw-button",behaviors:csw.behaviors.cswButton})}.call(this),function(){Polymer({is:"csw-dropdown",behaviors:csw.behaviors.cswDropdown})}.call(this),function(){Polymer({is:"csw-form",behaviors:csw.behaviors.cswForm})}.call(this),function(){Polymer({is:"csw-group",behaviors:csw.behaviors.cswGroup})}.call(this),function(){Polymer({is:"csw-icon",behaviors:csw.behaviors.cswIcon})}.call(this),function(){Polymer({is:"csw-input-text",behaviors:csw.behaviors.cswInputText})}.call(this),function(){Polymer({is:"csw-label-button",behaviors:csw.behaviors.cswLabelButton})}.call(this),function(){Polymer({is:"csw-label-switcher",behaviors:csw.behaviors.cswLabelSwitcher})}.call(this),function(){Polymer({is:"csw-link-button",behaviors:csw.behaviors.cswLinkButton})}.call(this),function(){Polymer({is:"csw-modal",behaviors:csw.behaviors.cswModal})}.call(this),function(){Polymer({is:"csw-notify",behaviors:csw.behaviors.cswNotify})}.call(this),function(){Polymer({is:"csw-pagination",behaviors:csw.behaviors.cswPagination})}.call(this),function(){Polymer({is:"csw-progress",behaviors:csw.behaviors.cswProgress})}.call(this),function(){Polymer({is:"csw-select",behaviors:csw.behaviors.cswSelect})}.call(this),function(){Polymer({is:"csw-switcher",behaviors:csw.behaviors.cswSwitcher})}.call(this),function(){Polymer({is:"csw-tabs",behaviors:csw.behaviors.cswTabs})}.call(this),function(){Polymer({is:"csw-textarea",behaviors:csw.behaviors.cswTextarea})}.call(this),function(){Polymer({is:"csw-tooltip",behaviors:csw.behaviors.cswTooltip})}.call(this),function(){require(["@detox/chat","@detox/core","@detox/utils","swipe-listener","js/behaviors"]).then(function(e){var t,n,i,r,s,o,a,c;t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],o=i.are_arrays_equal,a=i.timeoutSet,c=i.ArrayMap,Polymer({is:"detox-chat-app",behaviors:[s.state_instance],properties:{sidebar_shown:{type:Boolean,value:!1}},created:function(){this.state.get_settings_online()&&this._connect_to_the_network()},ready:function(){var e,t=this;e=this.state,this.sidebar_shown=e.get_ui_sidebar_shown(),e.on("ui_sidebar_shown_changed",function(e){t.sidebar_shown=e}),r(this),this.addEventListener("swipe",function(e){var t;(t=e.detail.directions).left&&this.state.set_ui_sidebar_shown(!1),t.right&&e.detail.x[0]<=document.documentElement.clientWidth/8&&this.state.set_ui_sidebar_shown(!0)})},_connect_to_the_network:function(){var e=this;t.ready(function(){var i,r,s,l,u,h;function d(e){var t,n;(t=i.get(e)).received&&t.sent&&(l.add_online_contact(e),(n=l.get_nickname())&&h.nickname(e,n),l.get_contact_messages_to_be_sent(e).then(function(t){var n,i,r;for(n=0,i=t.length;n<i;++n)r=t[n],_(e,r)}))}function _(e,t){var n;n=h.text_message(e,t.date_written,t.text),r.has(e)||r.set(e,new Map),r.get(e).set(n,t.id)}function f(e){var t;(t=l.get_contact(e))&&l.get_contact_messages_to_be_sent(e).then(function(n){var i,r,o,c,u,d,_;if(n.length&&t.local_secret&&(s.has(e)||s.set(e,{trial:0,timeout:null}),!(i=s.get(e)).timeout))for(++i.trial,r=0,c=(o=l.get_settings_reconnects_intervals()).length;r<c;++r)if(d=(u=o[r])[0],_=u[1],i.trial<=d){i.timeout=a(_,f);break}function f(){i.timeout=null,h.connect_to(e,t.remote_secret)}})}i=c(),r=c(),s=c(),l=e.state,u=n.Core(l.get_settings_bootstrap_nodes(),l.get_settings_ice_servers(),l.get_settings_packets_per_second(),l.get_settings_bucket_size()),h=t.Chat(u,l.get_seed(),l.get_settings_number_of_introduction_nodes(),l.get_settings_number_of_intermediate_nodes()),u.once("ready",function(){var e,t,n;for(l.set_online(!0),l.get_settings_announce()&&h.announce(),e=0,n=(t=l.get_contacts()).length;e<n;++e)f(t[e].id)}).on("connected_nodes_count",function(e){l.set_connected_nodes_count(e)}).on("aware_of_nodes_count",function(e){l.set_aware_of_nodes_count(e)}).on("routing_paths_count",function(e){l.set_routing_paths_count(e)}).on("application_connections_count",function(e){l.set_application_connections_count(e)}),h.once("announced",function(){l.set_announced(!0)}).on("introduction",function(e,t){var n,i,r,s,a,c,u;if(n=l.get_contact(e))return!!(!n.local_secret||o(t,n.local_secret)||n.old_local_contact&&o(t,n.old_local_secret));if(!l.has_contact_request_blocked(e)){for(i=t.length,r=0,a=(s=l.get_secrets()).length;r<a;++r)if(c=s[r],(u=new Uint8Array(i)).set(c.secret),o(t,u)&&!l.has_contact_request(e)){l.add_contact_request(e,c.secret);break}return!1}}).on("connected",function(e){var n,r;s.has(e)&&((n=s.get(e)).timeout&&clearTimeout(n.timeout),s.delete(e)),l.has_contact(e)&&(i.set(e,{received:!1,sent:!1}),r=t.generate_secret(),l.set_contact_local_secret(e,r),h.secret(e,r))}).on("connection_failed",function(e){f(e)}).on("secret",function(e,t){var n;return n=l.get_contact(e),!o(t,n.remote_secret)&&(l.set_contact_remote_secret(e,t),i.get(e).received=!0,d(e),!0)}).on("secret_received",function(e){l.del_contact_old_local_secret(e),i.get(e).sent=!0,d(e)}).on("nickname",function(e,n){var i,r;i=l.get_contact(e);try{if(r=t.id_decode(i.nickname)[0],!o(i.id,r))return;(n=n.trimLeft())&&l.set_contact_nickname(e,n)}catch(e){}}).on("text_message",function(e,t,n,i){(i=i.trim())&&l.get_contact_messages(e).then(function(r){var s,o,a;for(s=r.length-1;s>=0;--s)if((o=r[s]).origin===l.MESSAGE_ORIGIN_RECEIVED){a=o;break}a&&(a.date_sent>n||a.date_written>=t)||l.add_contact_message(e,l.MESSAGE_ORIGIN_RECEIVED,t,n,i)})}).on("text_message_received",function(e,t){var n,i;(n=null!=(i=r.get(e))?i.get(t):void 0)&&(r.get(e).delete(t),l.set_contact_message_sent(e,n,t))}).on("disconnected",function(e){i.delete(e),r.delete(e),l.del_online_contact(e),f(e)}),l.on("contact_added",function(e){h.connect_to(e.id,e.remote_secret)}).on("contact_message_added",function(e,t){var n;if(t.origin===l.MESSAGE_ORIGIN_RECEIVED||!l.has_online_contact(e))return n=l.get_contact(e),void h.connect_to(e,n.remote_secret);_(e,t)}).on("nickname_changed",function(e){var t,n,i,r;if(e=e.trim())for(t=0,i=(n=l.get_online_contacts()).length;t<i;++t)r=n[t],h.nickname(r,e)}),e._core_instance=u,e._chat_instance=h})},_hide_sidebar:function(){this.state.set_ui_sidebar_shown(!1)},_sidebar_click:function(e){e.clientX>this.$.sidebar.clientWidth&&this._hide_sidebar()}})})}.call(this),function(){require(["@detox/utils","hotkeys-js","js/behaviors","js/markdown"]).then(function(e){var t,n,i,r;t=e[0],n=e[1],i=e[2],r=e[3],Polymer({is:"detox-chat-app-dialogs",behaviors:[i.state_instance,Polymer.MutableDataBehavior],properties:{active_contact:{type:Boolean,value:!1},contact:Object,messages:Array,send_ctrl_enter:Boolean,text_message:{type:String,value:""},unread_messages:Boolean},created:function(){this._ctrl_enter_handler=this._ctrl_enter_handler.bind(this),this._enter_handler=this._enter_handler.bind(this)},ready:function(){var e,n,i,r,s=this;e=t.are_arrays_equal,n=t.ArrayMap,i=n(),r=this.state,this.active_contact=!!r.get_ui_active_contact(),this.send_ctrl_enter=r.get_settings_send_ctrl_enter(),this._update_unread_messages(),r.on("contact_message_added",function(t,n){var i,s,o,a;i=r.get_ui_active_contact(),n.origin===r.MESSAGE_ORIGIN_RECEIVED&&(r.get_settings_audio_notifications()&&detox_chat_app.play_sound("dist/definite.mp3?e60cc"),document.hasFocus()&&i&&e(t,i)||(s=r.get_contact(t),(o=document.createElement("div")).innerHTML=n.text,a=function e(t){var n;return(n=t.childNodes).length?function(){var i,r,s,o=[];for(i=0,s=(r=n).length;i<s;++i)t=r[i],o.push(e(t));return o}().map(function(e){return e.trim()}).filter(Boolean).join(" "):t.textContent.trim()}(o),detox_chat_app.notify(s.nickname,a.length>60?a.substr(0,60)+"...":a,7).then(function(){r.set_ui_active_contact(t)})))}).on("contact_messages_changed",function(t){var n,i,o;(n=r.get_ui_active_contact())&&e(t,n)&&(i=s.$["messages-list"],o=i.scrollHeight-i.offsetHeight===i.scrollTop,r.get_contact_messages(t).then(function(e){s.messages=e,s.notifyPath("messages"),o&&(s.$["messages-list-template"].render(),i.scrollTop=i.scrollHeight-i.offsetHeight)}))}).on("contact_changed",function(t){var n;null!=(n=s.contact)&&n.id&&e(s.contact.id,t.id)&&(s.contact=t)}).on("contact_deleted",function(e){i.delete(e.id)}).on("contacts_with_unread_messages_changed",function(){s._update_unread_messages()}).on("ui_active_contact_changed",function(e,t){var n;if((n=s.text_message.trim())&&t&&(i.set(t,n),s.text_message=""),e&&i.has(e)&&(s.text_message=i.get(e),i.delete(e)),!e)return s.active_contact=!1,s.contact={},void(s.messages=[]);s.active_contact=!0,s.contact=r.get_contact(e),r.get_contact_messages(e).then(function(e){var t;s.messages=e,s.notifyPath("messages"),s.$["messages-list-template"].render(),(t=s.$["messages-list"]).scrollTop=t.scrollHeight-t.offsetHeight,s._update_unread_messages()})}).on("settings_send_ctrl_enter_changed",function(e){s.send_ctrl_enter=e})},attached:function(){n("Ctrl+Enter",this._ctrl_enter_handler),n("Enter",this._enter_handler)},detached:function(){n.unbind("Ctrl+Enter",this._ctrl_enter_handler),n.unbind("Enter",this._enter_handler)},_ctrl_enter_handler:function(e){e.composedPath()[0]===this.$.textarea&&(this._send(),e.preventDefault())},_enter_handler:function(e){e.composedPath()[0]!==this.$.textarea||this.send_ctrl_enter||(this._send(),e.preventDefault())},_update_unread_messages:function(){var e;e=this.state,this.unread_messages=!!e.get_contacts_with_unread_messages().filter(function(t){return t!==e.get_ui_active_contact()}).length},_show_sidebar:function(){this.state.set_ui_sidebar_shown(!0)},_send_placeholder:function(e){return"Type you message here, Markdown (GFM) supported!\n"+(e?"Enter for new line, Ctrl+Enter for sending":"Shift+Enter for new line, Enter for sending")},_send:function(){var e,t,n;(e=this.text_message.trim())&&(this.text_message="",n=(t=this.state).get_ui_active_contact(),t.add_contact_message(n,t.MESSAGE_ORIGIN_SENT,+new Date,0,e),t.get_settings_audio_notifications()&&detox_chat_app.play_sound("dist/knob.mp3?3628d"))},_markdown_renderer:function(e){return r(e)},_format_date:function(e){return e?e-new Date<864e5?new Date(e).toLocaleTimeString():new Date(e).toLocaleString():"Not yet"},_message_origin:function(e){switch(e.origin){case this.state.MESSAGE_ORIGIN_SENT:return"sent";case this.state.MESSAGE_ORIGIN_RECEIVED:return"received";case this.state.MESSAGE_ORIGIN_SERVICE:return"service"}},_help_insecure:function(){detox_chat_app.simple_modal("<p>Don't get this message wrong, Detox Chat in particular and Detox network in general are built with security and anonymity in mind from the beginning.</p>\n<p>However, until independent security audit is conducted and proved that the application is indeed secure, you shouldn't trust it critical data.</p>")},_not_implemented:function(){csw.functions.alert("Yeah, I'd like to use this too, but it is not yet implemented, get back in future updates")}})})}.call(this),function(){require(["@detox/chat","@detox/crypto","@detox/utils","js/behaviors"]).then(function(e){var t,n,i,r;t=e[0],n=e[1],i=e[2],r=e[3],Polymer({is:"detox-chat-app-sidebar-contacts",behaviors:[r.experience_level,r.help,r.state_instance],properties:{add_contact:{type:Boolean,value:!1},contacts:{type:Array,value:[]},contacts_requests:{type:Array,value:[]},contacts_with_pending_messages:Object,contacts_with_unread_messages:Object,new_contact_id:{type:String,value:""},new_contact_name:{type:String,value:""},online_contacts:{type:Object},ui_active_contact:{type:Object}},ready:function(){var e,t,n,r,s,o=this;e=i.ArraySet,t=this.state,this.contacts=t.get_contacts(),this.online_contacts=e(t.get_online_contacts()),this.contacts_requests=t.get_contacts_requests(),this.contacts_with_pending_messages=e(t.get_contacts_with_pending_messages()),this.contacts_with_unread_messages=e(t.get_contacts_with_unread_messages()),this.ui_active_contact=e([t.get_ui_active_contact()||new Uint8Array(0)]),t.on("contacts_changed",function(){o.contacts=t.get_contacts()}).on("online_contacts_changed",function(){o.online_contacts=e(t.get_online_contacts())}).on("contact_request_added",function(){detox_chat_app.notify_warning("Incoming contact request received",7)}).on("contacts_requests_changed",function(){var e;e=t.get_contacts_requests(),o.contacts_requests=e}).on("contacts_with_pending_messages_changed",function(){o.contacts_with_pending_messages=e(t.get_contacts_with_pending_messages())}).on("contacts_with_unread_messages_changed",function(){o.contacts_with_unread_messages=e(t.get_contacts_with_unread_messages())}).on("ui_active_contact_changed",function(){o.ui_active_contact=e([t.get_ui_active_contact()||new Uint8Array(0)])}),navigator.registerProtocolHandler&&(n=location.href.split("?")[0],navigator.registerProtocolHandler("web+detoxchat",n+"?contact=%s","Detox Chat")),location.search&&(r=new URL(location.href).searchParams.get("contact"))&&r.startsWith("web+detoxchat:")&&(s=r.substr("web+detoxchat".length+1).split("+"),this.add_contact=!0,this.new_contact_id=s[0],this.new_contact_name=decodeURIComponent(s.slice(1).join(" ")),detox_chat_app.notify_success("Contact addition form is filled, confirm if you want to proceed",5))},_hide_header:function(e,t){return!e.length||t},_add_contact:function(){this.add_contact=!0},_add_contact_confirm:function(){var e=this;t.ready(function(){var r,s,o,a,c;try{if(s=(r=t.id_decode(e.new_contact_id))[0],o=r[1],a=n.create_keypair(e.state.get_seed()).ed25519.public,i.are_arrays_equal(s,a))return void detox_chat_app.notify_error("Adding yourself to contacts is not supported",3);if(c=e.state.get_contact(s))return void detox_chat_app.notify_warning('Not added: this contact is already in contacts list under nickname "'+c.nickname+'"',3);e.state.add_contact(s,e.new_contact_name||e.new_contact_id,o),detox_chat_app.notify_success("Contact added","You can already send messages and they will be delivered when/if contact request is accepted",5),e.add_contact=!1,e.new_contact_id="",e.new_contact_name=""}catch(e){e,detox_chat_app.notify_error("Incorrect ID, check for typos and try again",3)}})},_add_contact_cancel:function(){this.add_contact=!1},_help:function(){var e;e=this.advanced_user?"<p>You need to add contact using their ID in order to communicate.</p>\n<p>There are 2 kinds of IDs: without secrets and with secrets. Look at <i>Profile</i> tab for more details on those.</p>\n<p>Each contact in the list might have some of the corners highlighted, which indicates some information about its state.</p>\n<p>Top left corner is highlighted when there is an active connection to contact right now.<br>\nBottom left corner is highlighted means that there was never an active connection, for instance you've added someone to contacts, but they didn't accept request (yet).<br>\nTop right corner is highlighted when there are unread messages from that contact.<br>\nBottom right corner is highlighted when your last message to contact was not yet received (just received, there is no indication if it was read by contact).</p>":"<p>You need to add contact using their ID in order to communicate.</p>\n<p>Your ID can be found in <i>Profile</i> tab.</p>\n<p>Each contact in the list might have some of the corners highlighted, which indicates some information about its state.</p>\n<p>Top left corner is highlighted when there is an active connection to contact right now.<br>\nBottom left corner is highlighted means that there was never an active connection, for instance you've added someone to contacts, but they didn't accept request (yet).<br>\nTop right corner is highlighted when there are unread messages from that contact.<br>\nBottom right corner is highlighted when your last message to contact was not yet received (just received, there is no indication if it was read by contact).</p>",detox_chat_app.simple_modal(e)},_set_active_contact:function(e){var t;(t=this.state).set_ui_active_contact(e.model.item.id),t.set_ui_sidebar_shown(!1)},_rename_contact:function(e){var t=this;csw.functions.prompt("New nickname:",function(n){t.state.set_contact_nickname(e.model.item.id,n),detox_chat_app.notify_success("Nickname updated",3)}).input.value=e.model.item.nickname,e.stopPropagation()},_del_contact:function(e){var t=this;csw.functions.confirm("<h3>Are you sure you want to delete contact <i>"+e.model.item.nickname+"</i>?</h3>",function(){t.state.del_contact(e.model.item.id)}),e.stopPropagation()},_accept_contact_request:function(e){var t,n,i,r;t=this.state,n=e.model.item,i=this.advanced_user?"<h3>What do you want to do with contact request?</h3>\n<p>ID: <i>"+n.name+"</i></p>\n<p>Secret used: <i>"+n.secret_name+'</i></p>\n<csw-group>\n\t<csw-button primary><button id="accept">Accept</button></csw-button>\n\t<csw-button><button id="reject">Reject</button></csw-button>\n\t<csw-button><button id="cancel">Cancel</button></csw-button>\n</csw-group>':"<h3>What do you want to do with contact request?</h3>\n<p>ID: <i>"+n.name+'</i></p>\n<csw-group>\n\t<csw-button primary><button id="accept">Accept</button></csw-button>\n\t<csw-button><button id="reject">Reject</button></csw-button>\n\t<csw-button><button id="cancel">Cancel</button></csw-button>\n</csw-group>',(r=csw.functions.simple_modal(i)).querySelector("#accept").addEventListener("click",function(){t.add_contact(n.id,n.name,new Uint8Array(0)),t.del_contact_request(n.id),r.close(),detox_chat_app.notify_success("Contact added",3)}),r.querySelector("#reject").addEventListener("click",function(){t.del_contact_request(n.id),r.close(),detox_chat_app.notify_warning("Contact request rejected",3)}),r.querySelector("#cancel").addEventListener("click",function(){r.close()})},_online:function(e,t){return t.has(e.id)},_selected:function(e,t){return t.has(e.id)},_unconfirmed:function(e){return!e.local_secret},_unread:function(e,t){return t.has(e.id)},_pending:function(e,t){return t.has(e.id)}})})}.call(this),function(){require(["@detox/chat","@detox/crypto","js/behaviors"]).then(function(e){var t,n,i;t=e[0],n=e[1],i=e[2],Polymer({is:"detox-chat-app-sidebar-profile",behaviors:[i.experience_level,i.help,i.state_instance],properties:{add_secret:{type:Boolean,value:!1},id_base58:String,id_default_secret:String,new_secret_name:String,new_secret_length:{type:Number,value:4},nickname:String},ready:function(){var e=this;t.ready(function(){var i,r,s;function o(){var t,n,o,a,c;for(t=r.get_secrets(),e.id_default_secret=i(s,t[0].secret),n=[],o=0,a=t.length;o<a;++o)c=t[o],n.push({secret:c.secret,id:i(s,c.secret),name:c.name});e.secrets=n}i=t.id_encode,r=e.state,s=n.create_keypair(r.get_seed()).ed25519.public,e.id_base58=i(s,new Uint8Array(0)),e.nickname=r.get_nickname(),o(),r.on("nickname_changed",function(t){e.nickname!==t&&(e.nickname=t)}).on("secrets_changed",o)})},_nickname_blur:function(){this.nickname!==this.state.get_nickname()&&(this.state.set_nickname(this.nickname),detox_chat_app.notify_success("Nickname updated",3))},_id_click:function(e){e.target.select(),document.execCommand("copy"),detox_chat_app.notify_success("ID copied to clipboard",3)},_add_secret:function(){this.add_secret=!0},_add_secret_confirm:function(){var e,n;(e=this.new_secret_name.trim())?(n=t.generate_secret().slice(0,this.new_secret_length),this.state.add_secret(n,e),detox_chat_app.notify_success("Secret added",3),this.add_secret=!1,this.new_secret_name="",this.new_secret_length=4):detox_chat_app.notify_error("Secret name is required",3)},_add_secret_cancel:function(){this.add_secret=!1},_help_id:function(){detox_chat_app.simple_modal("<p>ID is an identifier that represents you in the network.<br>\nIf you share this ID with someone, they'll be able to send contact request to you.</p>")},_help_secrets:function(){detox_chat_app.simple_modal("<p>Secrets are used as anti-spam system. You can create different secrets for different purposes.<br>\nEach time you have incoming contact request, you'll see which secret was used.<br>\nFor instance, you can create a secret for conference and know who is connecting to you before you accept contact request.</p>\n\n<p>For contact requests you need to share ID with secret.<br>\nPlain ID without secret will not result in visible contact request, but if you and your interlocutor add each other to contacts list explicitly, you'll be connected and able to communicate.</p>")},_rename_secret:function(e){var t=this;csw.functions.prompt("New secret name:",function(n){(n=n.trim())?(t.state.set_secret_name(e.model.item.secret,n),detox_chat_app.notify_success("Secret name updated",3)):detox_chat_app.notify_error("Secret name is required",3)}).input.value=e.model.item.name,e.preventDefault()},_del_secret:function(e){var t=this;csw.functions.confirm("<h3>Are you sure you want to delete secret <i>"+e.model.item.name+"</i>?</h3>",function(){t.state.del_secret(e.model.item.secret)}),e.preventDefault()}})})}.call(this),function(){require(["js/behaviors"]).then(function(e){var t;t=e[0],Polymer({is:"detox-chat-app-sidebar-settings",behaviors:[t.experience_level,t.help,t.state_instance],properties:{settings_announce:{observer:"_settings_announce_changed",type:String},settings_audio_notifications:{observer:"_settings_audio_notifications_changed",type:String},settings_block_contact_requests_for:{observer:"_settings_block_contact_requests_for_changed",type:Number},settings_bootstrap_nodes:{observer:"_settings_bootstrap_nodes_changed",type:Object},settings_bootstrap_nodes_string:String,settings_bucket_size:{observer:"_settings_bucket_size_changed",type:Number},settings_experience:{observer:"_settings_experience_changed",type:Number},settings_help:{observer:"_settings_help_changed",type:String},settings_ice_servers:{observer:"_settings_ice_servers_changed",type:Object},settings_ice_servers_string:String,settings_max_pending_segments:{observer:"_settings_max_pending_segments_changed",type:Number},settings_number_of_intermediate_nodes:{observer:"_settings_number_of_intermediate_nodes_changed",type:Number},settings_number_of_introduction_nodes:{observer:"_settings_number_of_introduction_nodes_changed",type:Number},settings_online:{observer:"_settings_online_changed",type:String},settings_packets_per_second:{observer:"_settings_packets_per_second_changed",type:Number},settings_reconnects_intervals:{observer:"_settings_reconnects_intervals_changed",type:Object},settings_reconnects_intervals_string:String,settings_send_ctrl_enter:{observer:"_settings_send_ctrl_enter_changed",type:String}},ready:function(){var e,t=this;e=this.state,this.settings_announce=this._bool_to_string(e.get_settings_announce()),this.settings_audio_notifications=this._bool_to_string(e.get_settings_audio_notifications()),this.settings_block_contact_requests_for=e.get_settings_block_contact_requests_for()/60/60/24,this.settings_bootstrap_nodes=e.get_settings_bootstrap_nodes(),this.settings_bucket_size=e.get_settings_bucket_size(),this.settings_experience=e.get_settings_experience(),this.settings_help=this._bool_to_string(e.get_settings_help()),this.settings_ice_servers=e.get_settings_ice_servers(),this.settings_max_pending_segments=e.get_settings_max_pending_segments(),this.settings_number_of_intermediate_nodes=e.get_settings_number_of_intermediate_nodes(),this.settings_number_of_introduction_nodes=e.get_settings_number_of_introduction_nodes(),this.settings_online=this._bool_to_string(e.get_settings_online()),this.settings_packets_per_second=e.get_settings_packets_per_second(),this.settings_reconnects_intervals=e.get_settings_reconnects_intervals(),this.settings_send_ctrl_enter=this._bool_to_string(e.get_settings_send_ctrl_enter()),e.on("settings_announce_changed",function(e){e=t._bool_to_string(e)}).on("settings_audio_notifications_changed",function(e){e=t._bool_to_string(e)}).on("settings_block_contact_requests_for_changed",function(e){t.block_contact_requests_for=e/60/60/24}).on("settings_bootstrap_nodes_changed",function(e){t.settings_bootstrap_nodes=e}).on("settings_bucket_size_changed",function(e){t.settings_bucket_size=e}).on("settings_experience_changed",function(e){t.settings_experience=e}).on("settings_help_changed",function(e){e=t._bool_to_string(e)}).on("settings_ice_servers_changed",function(e){t.settings_ice_servers=e}).on("settings_max_pending_segments_changed",function(e){t.settings_max_pending_segments=e}).on("settings_number_of_intermediate_nodes_changed",function(e){t.settings_number_of_intermediate_nodes=e}).on("settings_number_of_introduction_nodes_changed",function(e){t.settings_number_of_introduction_nodes=e}).on("settings_online_changed",function(e){e=t._bool_to_string(e)}).on("settings_packets_per_second_changed",function(e){t.settings_packets_per_second=e}).on("settings_reconnects_intervals_changed",function(e){t.settings_reconnects_intervals=e}).on("settings_send_ctrl_enter_changed",function(e){e=t._bool_to_string(e)})},_bool_to_string:function(e){return e?"1":"0"},_settings_announce_changed:function(){this.settings_announce!==this._bool_to_string(this.state.get_settings_announce())&&(this.state.set_settings_announce("1"===this.settings_announce),detox_chat_app.notify_success("Saved changes to announcement setting, but restart is needed for changes to take effect",3))},_help_settings_announce:function(){detox_chat_app.simple_modal("<p>Announcement is a process of publishing own contact information to the network, so that contacts can find and connect to you.</p>\n<p>When turned off, you'll be in stealth mode, meaning that no one will be able to see if you're online, send messages or interact in any other way unless you initiate such interaction first.</p>")},_settings_audio_notifications_changed:function(){this.settings_audio_notifications!==this._bool_to_string(this.state.get_settings_audio_notifications())&&(this.state.set_settings_audio_notifications("1"===this.settings_audio_notifications),detox_chat_app.notify_success("Saved changes to audio notifications setting",3))},_help_settings_audio_notifications:function(){detox_chat_app.simple_modal("<p>Notifications like sending and receiving messages might be accompanied with short sound. Turn of if you don't like it.</p>")},_settings_block_contact_requests_for_changed:function(){var e;(e=60*this.settings_block_contact_requests_for*60*24)!==this.state.get_settings_block_contact_requests_for()&&(this.state.set_settings_block_contact_requests_for(e),detox_chat_app.notify_success("Saved changes to block contacts request for setting",3))},_help_settings_block_contact_requests_for:function(){detox_chat_app.simple_modal("<p>When you reject contact request, nothing is sent back to that contact.<br>\nThis results in subsequent contacts requests being received even after rejection.</p>\n<p>This option makes your life better by blocking subsequent contacts requests after first rejection for some time, so that you're not annoyed by the same contact request all the time.<br>\nChanging this option will not affect already blocked contacts requests.</p>")},_settings_bootstrap_nodes_changed:function(e){this.settings_bootstrap_nodes_string=JSON.stringify(e,null,"  ")},_settings_bootstrap_nodes_blur:function(){var e;try{if(e=JSON.parse(this.settings_bootstrap_nodes_string),JSON.stringify(this.settings_bootstrap_nodes)===JSON.stringify(e))return;this.state.set_settings_bootstrap_nodes(e),detox_chat_app.notify_success("Saved changes to bootstrap nodes setting, but restart is needed for changes to take effect",3)}catch(e){e,detox_chat_app.notify_error("Bootstrap nodes syntax error, changes were not saved",3)}},_help_settings_bootstrap_nodes:function(){detox_chat_app.simple_modal("<p>Bootstrap nodes are special kind of nodes used during application startup in order to get information about other nodes in the network and establish initial connections with them.<br>\nThese nodes are crucial for operation and should be selected carefully.<br>\nBootstrap nodes that return misleading information cause anything from drastic reduction of anonymity to being unable to communicate with other nodes in the network.<br>\nDo not change this setting unless you know what you're doing.</p>")},_settings_bucket_size_changed:function(e){(e=parseInt(e))!==this.state.get_settings_bucket_size()&&(this.state.set_settings_bucket_size(e),detox_chat_app.notify_success("Saved changes to bucket size setting, but restart is needed for changes to take effect",3))},_help_settings_bucket_size:function(){detox_chat_app.simple_modal("<p>Bucket size is a data structure used in underlying Distributed Hash Table (DHT) implementation used in Detox network.</p>\n<p>Bigger number means more nodes will be stored, but this will also increase communication overhead.<br>\nDo not change this setting unless you know what you're doing.</p>")},_settings_experience_changed:function(e){(e=parseInt(e))!==this.state.get_settings_experience()&&(this.state.set_settings_experience(e),detox_chat_app.notify_success("Saved changes to user experience level setting",3))},_help_settings_experience:function(){detox_chat_app.simple_modal("<p>Regular makes UI as simple as possible. Advanced enables more features and settings. Developer mode gives most control.</p>")},_settings_help_changed:function(){this.settings_help!==this._bool_to_string(this.state.get_settings_help())&&(this.state.set_settings_help("1"===this.settings_help),detox_chat_app.notify_success("Saved changes to help setting",3))},_help_settings_help:function(){detox_chat_app.simple_modal("<p>Help buttons, one of which you've just clicked, are useful when you just started using Detox Chat, but may annoy later.<br>\nUse this option to hide them if needed.</p>")},_settings_ice_servers_changed:function(e){this.settings_ice_servers_string=JSON.stringify(e,null,"  ")},_settings_ice_servers_blur:function(){var e;try{if(e=JSON.parse(this.settings_ice_servers_string),JSON.stringify(this.settings_ice_servers)===JSON.stringify(e))return;this.state.set_settings_ice_servers(e),detox_chat_app.notify_success("Saved changes to ICE servers setting, but restart is needed for changes to take effect",3)}catch(e){e,detox_chat_app.notify_error("ICE servers syntax error, changes were not saved",3)}},_help_settings_ice_servers:function(){detox_chat_app.simple_modal("<p>ICE servers are used during connections to other nodes in the network.</p>\n<p>There are two kinds of ICE servers: STUN and TURN.<br>\nSTUN helps to figure out how to connect to this node from the outside if it is behind Network Address Translation (NAT) or firewall.<br>\nIf connection is not possible, TURN server can act as relay to enable communication even behind restricted NAT or firewall.</p>\n<p>Most of the time ICE servers are crucial for operation and should be selected carefully.<br>\nDo not change this setting unless you know what you're doing.</p>")},_settings_max_pending_segments_changed:function(e){(e=parseInt(e))!==this.state.get_settings_max_pending_segments()&&(this.state.set_settings_max_pending_segments(e),detox_chat_app.notify_success("Saved changes to max pending segments setting, but restart is needed for changes to take effect",3))},_help_settings_max_pending_segments:function(){detox_chat_app.simple_modal("<p>Pending segments is a low-level state of segments from transport layer of Detox network implementation that appear during routing paths construction.</p>\n<p>Do not change this setting unless you know what you're doing.</p>")},_settings_number_of_intermediate_nodes_changed:function(e){(e=parseInt(e))!==this.state.get_settings_number_of_intermediate_nodes()&&(this.state.set_settings_number_of_intermediate_nodes(e),detox_chat_app.notify_success("Saved changes to number of intermediate nodes setting, but restart is needed for changes to take effect",3))},_help_settings_number_of_intermediate_nodes:function(){detox_chat_app.simple_modal("<p>Intermediate nodes are nodes between this node and interested target node, used for routing paths creation in transport layer of Detox network implementation.</p>\n<p>More intermediate nodes means longer routing path and slower its creation. Lower numbers decrease anonymity, numbers higher than 3 are generally considered to be redundant.<br>\nDo not change this setting unless you know what you're doing.</p>")},_settings_number_of_introduction_nodes_changed:function(e){(e=parseInt(e))!==this.state.get_settings_number_of_introduction_nodes()&&(this.state.set_settings_number_of_introduction_nodes(e),detox_chat_app.notify_success("Saved changes to number of introduction nodes setting, but restart is needed for changes to take effect",3))},_help_settings_number_of_introduction_nodes:function(){detox_chat_app.simple_modal("<p>Introduction nodes are nodes to which announcement is made.</p>\n<p>More than one node is recommended to ensure good reliability of incoming connections, but very high numbers are redundant.<br>\nDo not change this setting unless you know what you're doing.</p>")},_settings_online_changed:function(){this.settings_online!==this._bool_to_string(this.state.get_settings_online())&&(this.state.set_settings_online("1"===this.settings_online),detox_chat_app.notify_success("Saved changes to online setting, but restart is needed for changes to take effect",3))},_help_settings_online:function(){detox_chat_app.simple_modal("<p>If not online then on next start application will not try to connect to Detox network and related functionality will not work properly.</p>")},_settings_packets_per_second_changed:function(e){(e=parseInt(e))!==this.state.get_settings_packets_per_second()&&(this.state.set_settings_packets_per_second(e),detox_chat_app.notify_success("Saved changes to packets per second setting, but restart is needed for changes to take effect",3))},_help_settings_packets_per_second:function(){detox_chat_app.simple_modal("<p>Detox network sends data at fixed rate on each opened connection regardless of how much bandwidth is actually utilized, this option specifies how may packets of 512 bytes will be sent on each link during one second.</p>\n<p>Bigger number means higher peak throughput and lower latencies (to some degree, as these can be bottlenecked by other nodes in particular routing path), but significantly increases requirements to Internet connection.<br>\nYou may increase or decrease this option slightly, but don't go too far unless you know what you're doing.</p>")},_settings_reconnects_intervals_changed:function(e){this.settings_reconnects_intervals_string=JSON.stringify(e,null,"  ")},_settings_reconnects_intervals_blur:function(){var e;try{if(e=JSON.parse(this.settings_reconnects_intervals_string),JSON.stringify(this.settings_reconnects_intervals)===JSON.stringify(e))return;this.state.set_settings_reconnects_intervals(e),detox_chat_app.notify_success("Saved changes to reconnects intervals setting",3)}catch(e){e,detox_chat_app.notify_error("Reconnects intervals syntax error, changes were not saved",3)}},_help_settings_reconnects_intervals:function(){detox_chat_app.simple_modal("<p>When you need to connect to one of your contacts, connection will not always succeed.</p>\n<p>This option controls time intervals (in seconds) between connection attempts.</p>\n<p>First number is max number of attempts and second is number is delay for it. More attempts is made, larger delays become.<br>\nDo not change this setting unless you know what you're doing.</p>")},_settings_send_ctrl_enter_changed:function(){this.settings_send_ctrl_enter!==this._bool_to_string(this.state.get_settings_send_ctrl_enter())&&(this.state.set_settings_send_ctrl_enter("1"===this.settings_send_ctrl_enter),detox_chat_app.notify_success("Saved changes to send message with setting",3))},_help_settings_send_ctrl_enter:function(){detox_chat_app.simple_modal("<p>Either send message with Ctrl+Enter and use Enter for new line or use Enter to send message and Shift+Enter for new line.</p>")},_backup:function(){this.state.get_as_blob().then(function(e){var t,n;t=[(t=new Date).getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()].join("-"),n='<p>Your backup is ready: <a href="'+URL.createObjectURL(e)+'" download="'+("detox-chat-backup-"+t+".bin")+'">Download</a></p>',detox_chat_app.simple_modal(n)})},_restore:function(){var e,t=this;(e=document.createElement("input")).type="file",e.accept=".bin",e.addEventListener("change",function(e){t.state.set_from_blob(e.target.files[0])}),e.click()},_help_backup_restore_data:function(){detox_chat_app.simple_modal("<p>This will backup your contacts, settings and messages history.</p>\n<p>If you're migrating from one browser to another or one machine to another, this will allow you to backup your data here and restore them somewhere else.</p>\n<p>NOTE: You can't have the same account on 2 machines/browsers yet (this will not work properly or at all, don't try or you'll be very disappointed with consequences).</p>\n<p>Always have only one instance and always use fresh backup or you're risking not being able to connect with some of your contacts.</p>")},_remove_all_of_the_data:function(){var e=this;csw.functions.confirm("<p>Are really, REALLY sure you want to proceed with deletion?</p>\n<p>WARNING: This operation can't be undone!</p>",function(){e.state.delete_data(),window.detox_service_worker_registration?caches.keys().then(function(e){var t;return Promise.all(function(){var n,i,r,s=[];for(n=0,r=(i=e).length;n<r;++n)t=i[n],s.push(caches.delete(t));return s}())}).then(function(){return detox_service_worker_registration.unregister()}).then(function(){detox_chat_app.notify_success("All of the data removed successfully, you can exit now")}):detox_chat_app.notify_success("All of the data removed successfully, you can exit now")})},_help_remove_all_of_the_data:function(){detox_chat_app.simple_modal("<p>WARNING: This operation can't be undone!</p>\n<p>This will remove all of the contacts, messages history, settings and any other data stored by this application (including unregistering Service Worker and cleaning its caches), after which application will close itself.</p>\n<p>Make sure to backup any useful data stored in this application before you proceed with deletion!</p>")}})})}.call(this),function(){require(["js/behaviors"]).then(function(e){var t;t=e[0],Polymer({is:"detox-chat-app-sidebar-status",behaviors:[t.state_instance],properties:{online:{type:Boolean,value:!1},announced:{type:Boolean,value:!1},connected_nodes_count:{type:Number,value:0},aware_of_nodes_count:{type:Number,value:0},routing_paths_count:{type:Number,value:0},application_connections_count:{type:Number,value:0}},ready:function(){var e=this;this.state.on("online_changed",function(t){e.online=t}).on("announced_changed",function(t){e.announced=t}).on("connected_nodes_count_changed",function(t){e.connected_nodes_count=t}).on("aware_of_nodes_count_changed",function(t){e.aware_of_nodes_count=t}).on("routing_paths_count_changed",function(t){e.routing_paths_count=t}).on("application_connections_count_changed",function(t){e.application_connections_count=t})},_online:function(e,t){return e&&t?"online":"offline"},_announced:function(e){return e?"announced":"not announced"}})})}.call(this),function(){Polymer({is:"detox-chat-icon-button",behaviors:csw.behaviors.cswButton})}.call(this),define("dist/script.js",function(){});